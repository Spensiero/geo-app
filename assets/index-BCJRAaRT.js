(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();var jd={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function pS(){if(ky)return Kl;ky=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,l){var h=null;if(l!==void 0&&(h=""+l),r.key!==void 0&&(h=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:i,type:s,key:h,ref:r!==void 0?r:null,props:l}}return Kl.Fragment=t,Kl.jsx=e,Kl.jsxs=e,Kl}var Xy;function SS(){return Xy||(Xy=1,jd.exports=pS()),jd.exports}var bt=SS(),Bd={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function MS(){if(jy)return St;jy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function x(C,X,z){this.props=C,this.context=X,this.refs=w,this.updater=z||p}x.prototype.isReactComponent={},x.prototype.setState=function(C,X){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,X,"setState")},x.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function b(){}b.prototype=x.prototype;function R(C,X,z){this.props=C,this.context=X,this.refs=w,this.updater=z||p}var L=R.prototype=new b;L.constructor=R,S(L,x.prototype),L.isPureReactComponent=!0;var O=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function j(C,X,z,$,rt,ft){return z=ft.ref,{$$typeof:i,type:C,key:X,ref:z!==void 0?z:null,props:ft}}function B(C,X){return j(C.type,X,void 0,void 0,void 0,C.props)}function Z(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function J(C){var X={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(z){return X[z]})}var st=/\/+/g;function tt(C,X){return typeof C=="object"&&C!==null&&C.key!=null?J(""+C.key):X.toString(36)}function it(){}function lt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(it,it):(C.status="pending",C.then(function(X){C.status==="pending"&&(C.status="fulfilled",C.value=X)},function(X){C.status==="pending"&&(C.status="rejected",C.reason=X)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ct(C,X,z,$,rt){var ft=typeof C;(ft==="undefined"||ft==="boolean")&&(C=null);var ht=!1;if(C===null)ht=!0;else switch(ft){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(C.$$typeof){case i:case t:ht=!0;break;case _:return ht=C._init,ct(ht(C._payload),X,z,$,rt)}}if(ht)return rt=rt(C),ht=$===""?"."+tt(C,0):$,O(rt)?(z="",ht!=null&&(z=ht.replace(st,"$&/")+"/"),ct(rt,X,z,"",function(fe){return fe})):rt!=null&&(Z(rt)&&(rt=B(rt,z+(rt.key==null||C&&C.key===rt.key?"":(""+rt.key).replace(st,"$&/")+"/")+ht)),X.push(rt)),1;ht=0;var Ut=$===""?".":$+":";if(O(C))for(var Ot=0;Ot<C.length;Ot++)$=C[Ot],ft=Ut+tt($,Ot),ht+=ct($,X,z,ft,rt);else if(Ot=v(C),typeof Ot=="function")for(C=Ot.call(C),Ot=0;!($=C.next()).done;)$=$.value,ft=Ut+tt($,Ot++),ht+=ct($,X,z,ft,rt);else if(ft==="object"){if(typeof C.then=="function")return ct(lt(C),X,z,$,rt);throw X=String(C),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ht}function D(C,X,z){if(C==null)return C;var $=[],rt=0;return ct(C,$,"","",function(ft){return X.call(z,ft,rt++)}),$}function K(C){if(C._status===-1){var X=C._result;X=X(),X.then(function(z){(C._status===0||C._status===-1)&&(C._status=1,C._result=z)},function(z){(C._status===0||C._status===-1)&&(C._status=2,C._result=z)}),C._status===-1&&(C._status=0,C._result=X)}if(C._status===1)return C._result.default;throw C._result}var W=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function at(){}return St.Children={map:D,forEach:function(C,X,z){D(C,function(){X.apply(this,arguments)},z)},count:function(C){var X=0;return D(C,function(){X++}),X},toArray:function(C){return D(C,function(X){return X})||[]},only:function(C){if(!Z(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},St.Component=x,St.Fragment=e,St.Profiler=r,St.PureComponent=R,St.StrictMode=s,St.Suspense=f,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,St.__COMPILER_RUNTIME={__proto__:null,c:function(C){return A.H.useMemoCache(C)}},St.cache=function(C){return function(){return C.apply(null,arguments)}},St.cloneElement=function(C,X,z){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var $=S({},C.props),rt=C.key,ft=void 0;if(X!=null)for(ht in X.ref!==void 0&&(ft=void 0),X.key!==void 0&&(rt=""+X.key),X)!k.call(X,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&X.ref===void 0||($[ht]=X[ht]);var ht=arguments.length-2;if(ht===1)$.children=z;else if(1<ht){for(var Ut=Array(ht),Ot=0;Ot<ht;Ot++)Ut[Ot]=arguments[Ot+2];$.children=Ut}return j(C.type,rt,void 0,void 0,ft,$)},St.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},St.createElement=function(C,X,z){var $,rt={},ft=null;if(X!=null)for($ in X.key!==void 0&&(ft=""+X.key),X)k.call(X,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(rt[$]=X[$]);var ht=arguments.length-2;if(ht===1)rt.children=z;else if(1<ht){for(var Ut=Array(ht),Ot=0;Ot<ht;Ot++)Ut[Ot]=arguments[Ot+2];rt.children=Ut}if(C&&C.defaultProps)for($ in ht=C.defaultProps,ht)rt[$]===void 0&&(rt[$]=ht[$]);return j(C,ft,void 0,void 0,null,rt)},St.createRef=function(){return{current:null}},St.forwardRef=function(C){return{$$typeof:u,render:C}},St.isValidElement=Z,St.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:K}},St.memo=function(C,X){return{$$typeof:g,type:C,compare:X===void 0?null:X}},St.startTransition=function(C){var X=A.T,z={};A.T=z;try{var $=C(),rt=A.S;rt!==null&&rt(z,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(at,W)}catch(ft){W(ft)}finally{A.T=X}},St.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},St.use=function(C){return A.H.use(C)},St.useActionState=function(C,X,z){return A.H.useActionState(C,X,z)},St.useCallback=function(C,X){return A.H.useCallback(C,X)},St.useContext=function(C){return A.H.useContext(C)},St.useDebugValue=function(){},St.useDeferredValue=function(C,X){return A.H.useDeferredValue(C,X)},St.useEffect=function(C,X,z){var $=A.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(C,X)},St.useId=function(){return A.H.useId()},St.useImperativeHandle=function(C,X,z){return A.H.useImperativeHandle(C,X,z)},St.useInsertionEffect=function(C,X){return A.H.useInsertionEffect(C,X)},St.useLayoutEffect=function(C,X){return A.H.useLayoutEffect(C,X)},St.useMemo=function(C,X){return A.H.useMemo(C,X)},St.useOptimistic=function(C,X){return A.H.useOptimistic(C,X)},St.useReducer=function(C,X,z){return A.H.useReducer(C,X,z)},St.useRef=function(C){return A.H.useRef(C)},St.useState=function(C){return A.H.useState(C)},St.useSyncExternalStore=function(C,X,z){return A.H.useSyncExternalStore(C,X,z)},St.useTransition=function(){return A.H.useTransition()},St.version="19.1.1",St}var By;function J0(){return By||(By=1,Bd.exports=MS()),Bd.exports}var qi=J0(),Yd={exports:{}},Vl={},qd={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function xS(){return Yy||(Yy=1,function(i){function t(D,K){var W=D.length;D.push(K);t:for(;0<W;){var at=W-1>>>1,C=D[at];if(0<r(C,K))D[at]=K,D[W]=C,W=at;else break t}}function e(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var K=D[0],W=D.pop();if(W!==K){D[0]=W;t:for(var at=0,C=D.length,X=C>>>1;at<X;){var z=2*(at+1)-1,$=D[z],rt=z+1,ft=D[rt];if(0>r($,W))rt<C&&0>r(ft,$)?(D[at]=ft,D[rt]=W,at=rt):(D[at]=$,D[z]=W,at=z);else if(rt<C&&0>r(ft,W))D[at]=ft,D[rt]=W,at=rt;else break t}}return K}function r(D,K){var W=D.sortIndex-K.sortIndex;return W!==0?W:D.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var h=Date,u=h.now();i.unstable_now=function(){return h.now()-u}}var f=[],g=[],_=1,y=null,v=3,p=!1,S=!1,w=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(D){for(var K=e(g);K!==null;){if(K.callback===null)s(g);else if(K.startTime<=D)s(g),K.sortIndex=K.expirationTime,t(f,K);else break;K=e(g)}}function A(D){if(w=!1,O(D),!S)if(e(f)!==null)S=!0,k||(k=!0,tt());else{var K=e(g);K!==null&&ct(A,K.startTime-D)}}var k=!1,j=-1,B=5,Z=-1;function J(){return x?!0:!(i.unstable_now()-Z<B)}function st(){if(x=!1,k){var D=i.unstable_now();Z=D;var K=!0;try{t:{S=!1,w&&(w=!1,R(j),j=-1),p=!0;var W=v;try{e:{for(O(D),y=e(f);y!==null&&!(y.expirationTime>D&&J());){var at=y.callback;if(typeof at=="function"){y.callback=null,v=y.priorityLevel;var C=at(y.expirationTime<=D);if(D=i.unstable_now(),typeof C=="function"){y.callback=C,O(D),K=!0;break e}y===e(f)&&s(f),O(D)}else s(f);y=e(f)}if(y!==null)K=!0;else{var X=e(g);X!==null&&ct(A,X.startTime-D),K=!1}}break t}finally{y=null,v=W,p=!1}K=void 0}}finally{K?tt():k=!1}}}var tt;if(typeof L=="function")tt=function(){L(st)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,lt=it.port2;it.port1.onmessage=st,tt=function(){lt.postMessage(null)}}else tt=function(){b(st,0)};function ct(D,K){j=b(function(){D(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(D){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var W=v;v=K;try{return D()}finally{v=W}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=v;v=D;try{return K()}finally{v=W}},i.unstable_scheduleCallback=function(D,K,W){var at=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?at+W:at):W=at,D){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=W+C,D={id:_++,callback:K,priorityLevel:D,startTime:W,expirationTime:C,sortIndex:-1},W>at?(D.sortIndex=W,t(g,D),e(f)===null&&D===e(g)&&(w?(R(j),j=-1):w=!0,ct(A,W-at))):(D.sortIndex=C,t(f,D),S||p||(S=!0,k||(k=!0,tt()))),D},i.unstable_shouldYield=J,i.unstable_wrapCallback=function(D){var K=v;return function(){var W=v;v=K;try{return D.apply(this,arguments)}finally{v=W}}}}(Hd)),Hd}var qy;function wS(){return qy||(qy=1,qd.exports=xS()),qd.exports}var Zd={exports:{}},ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function bS(){if(Hy)return ze;Hy=1;var i=J0();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,g,_){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:g,implementation:_}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ze.createPortal=function(f,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(f,g,null,_)},ze.flushSync=function(f){var g=h.T,_=s.p;try{if(h.T=null,s.p=2,f)return f()}finally{h.T=g,s.p=_,s.d.f()}},ze.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(f,g))},ze.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ze.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var _=g.as,y=u(_,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,p=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:p}):_==="script"&&s.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:p,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ze.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=u(g.as,g.crossOrigin);s.d.M(f,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(f)},ze.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,y=u(_,g.crossOrigin);s.d.L(f,_,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ze.preloadModule=function(f,g){if(typeof f=="string")if(g){var _=u(g.as,g.crossOrigin);s.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(f)},ze.requestFormReset=function(f){s.d.r(f)},ze.unstable_batchedUpdates=function(f,g){return f(g)},ze.useFormState=function(f,g,_){return h.H.useFormState(f,g,_)},ze.useFormStatus=function(){return h.H.useHostTransitionStatus()},ze.version="19.1.1",ze}var Zy;function CS(){if(Zy)return Zd.exports;Zy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Zd.exports=bS(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function TS(){if(Ky)return Vl;Ky=1;var i=wS(),t=J0(),e=CS();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function h(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function u(n){if(l(n)!==n)throw Error(s(188))}function f(n){var a=n.alternate;if(!a){if(a=l(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,c=a;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return u(d),n;if(m===c)return u(d),a;m=m.sibling}throw Error(s(188))}if(o.return!==c.return)o=d,c=m;else{for(var E=!1,M=d.child;M;){if(M===o){E=!0,o=d,c=m;break}if(M===c){E=!0,c=d,o=m;break}M=M.sibling}if(!E){for(M=m.child;M;){if(M===o){E=!0,o=m,c=d;break}if(M===c){E=!0,c=m,o=d;break}M=M.sibling}if(!E)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function g(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=g(n),a!==null)return a;n=n.sibling}return null}var _=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),st=Symbol.iterator;function tt(n){return n===null||typeof n!="object"?null:(n=st&&n[st]||n["@@iterator"],typeof n=="function"?n:null)}var it=Symbol.for("react.client.reference");function lt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===it?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList";case Z:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case p:return"Portal";case L:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case O:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return a=n.displayName||null,a!==null?a:lt(n.type)||"Memo";case B:a=n._payload,n=n._init;try{return lt(n(a))}catch{}}return null}var ct=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},at=[],C=-1;function X(n){return{current:n}}function z(n){0>C||(n.current=at[C],at[C]=null,C--)}function $(n,a){C++,at[C]=n.current,n.current=a}var rt=X(null),ft=X(null),ht=X(null),Ut=X(null);function Ot(n,a){switch($(ht,a),$(ft,n),$(rt,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?gy(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=gy(a),n=_y(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(rt),$(rt,n)}function fe(){z(rt),z(ft),z(ht)}function Te(n){n.memoizedState!==null&&$(Ut,n);var a=rt.current,o=_y(a,n.type);a!==o&&($(ft,n),$(rt,o))}function gn(n){ft.current===n&&(z(rt),z(ft)),Ut.current===n&&(z(Ut),Bl._currentValue=W)}var ks=Object.prototype.hasOwnProperty,_n=i.unstable_scheduleCallback,Ii=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Ei=i.unstable_requestPaint,Re=i.unstable_now,Bn=i.unstable_getCurrentPriorityLevel,Yn=i.unstable_ImmediatePriority,Wi=i.unstable_UserBlockingPriority,Pi=i.unstable_NormalPriority,qn=i.unstable_LowPriority,oe=i.unstable_IdlePriority,Wr=i.log,Qr=i.unstable_setDisableYieldValue,Qi=null,Ee=null;function $i(n){if(typeof Wr=="function"&&Qr(n),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Qi,n)}catch{}}var De=Math.clz32?Math.clz32:Gc,$o=Math.log,$r=Math.LN2;function Gc(n){return n>>>=0,n===0?32:31-($o(n)/$r|0)|0}var Oa=256,Xs=4194304;function Ji(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Hn(n,a,o){var c=n.pendingLanes;if(c===0)return 0;var d=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var M=c&134217727;return M!==0?(c=M&~m,c!==0?d=Ji(c):(E&=M,E!==0?d=Ji(E):o||(o=M&~n,o!==0&&(d=Ji(o))))):(M=c&~m,M!==0?d=Ji(M):E!==0?d=Ji(E):o||(o=c&~n,o!==0&&(d=Ji(o)))),d===0?0:a!==0&&a!==d&&(a&m)===0&&(m=d&-d,o=a&-a,m>=o||m===32&&(o&4194048)!==0)?a:d}function Zn(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Lc(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ga(){var n=Oa;return Oa<<=1,(Oa&4194048)===0&&(Oa=256),n}function Kn(){var n=Xs;return Xs<<=1,(Xs&62914560)===0&&(Xs=4194304),n}function mn(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function zi(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Jo(n,a,o,c,d,m){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var M=n.entanglements,T=n.expirationTimes,P=n.hiddenUpdates;for(o=E&~o;0<o;){var Y=31-De(o),V=1<<Y;M[Y]=0,T[Y]=-1;var F=P[Y];if(F!==null)for(P[Y]=null,Y=0;Y<F.length;Y++){var U=F[Y];U!==null&&(U.lane&=-536870913)}o&=~V}c!==0&&Jr(n,c,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~a))}function Jr(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var c=31-De(a);n.entangledLanes|=a,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function Xe(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var c=31-De(o),d=1<<c;d&a|n[c]&a&&(n[c]|=a),o&=~d}}function Fi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ie(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function oi(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:Dy(n.type))}function Ke(n,a){var o=K.p;try{return K.p=n,a()}finally{K.p=o}}var pe=Math.random().toString(36).slice(2),Wt="__reactFiber$"+pe,Tt="__reactProps$"+pe,se="__reactContainer$"+pe,hi="__reactEvents$"+pe,Nc="__reactListeners$"+pe,cp="__reactHandles$"+pe,i_="__reactResources$"+pe,tl="__reactMarker$"+pe;function Dc(n){delete n[Wt],delete n[Tt],delete n[hi],delete n[Nc],delete n[cp]}function La(n){var a=n[Wt];if(a)return a;for(var o=n.parentNode;o;){if(a=o[se]||o[Wt]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=Ey(n);n!==null;){if(o=n[Wt])return o;n=Ey(n)}return a}n=o,o=n.parentNode}return null}function Na(n){if(n=n[Wt]||n[se]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function el(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function Da(n){var a=n[i_];return a||(a=n[i_]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Se(n){n[tl]=!0}var n_=new Set,s_={};function js(n,a){Ia(n,a),Ia(n+"Capture",a)}function Ia(n,a){for(s_[n]=a,n=0;n<a.length;n++)n_.add(a[n])}var fp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),a_={},r_={};function dp(n){return ks.call(r_,n)?!0:ks.call(a_,n)?!1:fp.test(n)?r_[n]=!0:(a_[n]=!0,!1)}function th(n,a,o){if(dp(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function eh(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function yn(n,a,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+c)}}var Ic,l_;function Pa(n){if(Ic===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Ic=a&&a[1]||"",l_=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ic+n+l_}var Pc=!1;function zc(n,a){if(!n||Pc)return"";Pc=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(U){var F=U}Reflect.construct(n,[],V)}else{try{V.call()}catch(U){F=U}n.call(V.prototype)}}else{try{throw Error()}catch(U){F=U}(V=n())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(U){if(U&&F&&typeof U.stack=="string")return[U.stack,F.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),E=m[0],M=m[1];if(E&&M){var T=E.split(`
`),P=M.split(`
`);for(d=c=0;c<T.length&&!T[c].includes("DetermineComponentFrameRoot");)c++;for(;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;if(c===T.length||d===P.length)for(c=T.length-1,d=P.length-1;1<=c&&0<=d&&T[c]!==P[d];)d--;for(;1<=c&&0<=d;c--,d--)if(T[c]!==P[d]){if(c!==1||d!==1)do if(c--,d--,0>d||T[c]!==P[d]){var Y=`
`+T[c].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=c&&0<=d);break}}}finally{Pc=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Pa(o):""}function gp(n){switch(n.tag){case 26:case 27:case 5:return Pa(n.type);case 16:return Pa("Lazy");case 13:return Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 15:return zc(n.type,!1);case 11:return zc(n.type.render,!1);case 1:return zc(n.type,!0);case 31:return Pa("Activity");default:return""}}function o_(n){try{var a="";do a+=gp(n),n=n.return;while(n);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pi(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function h_(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _p(n){var a=h_(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),c=""+n[a];if(!n.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,m=o.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,m.call(this,E)}}),Object.defineProperty(n,a,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function ih(n){n._valueTracker||(n._valueTracker=_p(n))}function u_(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),c="";return n&&(c=h_(n)?n.checked?"true":"false":n.value),n=c,n!==o?(a.setValue(n),!0):!1}function nh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var mp=/[\n"\\]/g;function Si(n){return n.replace(mp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fc(n,a,o,c,d,m,E,M){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),a!=null?E==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+pi(a)):n.value!==""+pi(a)&&(n.value=""+pi(a)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),a!=null?Uc(n,E,pi(a)):o!=null?Uc(n,E,pi(o)):c!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+pi(M):n.removeAttribute("name")}function c_(n,a,o,c,d,m,E,M){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),a!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||a!=null))return;o=o!=null?""+pi(o):"",a=a!=null?""+pi(a):o,M||a===n.value||(n.value=a),n.defaultValue=a}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=M?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Uc(n,a,o){a==="number"&&nh(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function za(n,a,o,c){if(n=n.options,a){a={};for(var d=0;d<o.length;d++)a["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=a.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&c&&(n[o].defaultSelected=!0)}else{for(o=""+pi(o),a=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}a!==null||n[d].disabled||(a=n[d])}a!==null&&(a.selected=!0)}}function f_(n,a,o){if(a!=null&&(a=""+pi(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+pi(o):""}function d_(n,a,o,c){if(a==null){if(c!=null){if(o!=null)throw Error(s(92));if(ct(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),a=o}o=pi(a),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function Fa(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var yp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function g_(n,a,o){var c=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":c?n.setProperty(a,o):typeof o!="number"||o===0||yp.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function __(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in a)c=a[d],a.hasOwnProperty(d)&&o[d]!==c&&g_(n,d,c)}else for(var m in a)a.hasOwnProperty(m)&&g_(n,m,a[m])}function kc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ep=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sh(n){return Ep.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Xc=null;function jc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ua=null,ka=null;function m_(n){var a=Na(n);if(a&&(n=a.stateNode)){var o=n[Tt]||null;t:switch(n=a.stateNode,a.type){case"input":if(Fc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Si(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var c=o[a];if(c!==n&&c.form===n.form){var d=c[Tt]||null;if(!d)throw Error(s(90));Fc(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<o.length;a++)c=o[a],c.form===n.form&&u_(c)}break t;case"textarea":f_(n,o.value,o.defaultValue);break t;case"select":a=o.value,a!=null&&za(n,!!o.multiple,a,!1)}}}var Bc=!1;function y_(n,a,o){if(Bc)return n(a,o);Bc=!0;try{var c=n(a);return c}finally{if(Bc=!1,(Ua!==null||ka!==null)&&(Bh(),Ua&&(a=Ua,n=ka,ka=Ua=null,m_(a),n)))for(a=0;a<n.length;a++)m_(n[a])}}function il(n,a){var o=n.stateNode;if(o===null)return null;var c=o[Tt]||null;if(c===null)return null;o=c[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=!1;if(vn)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Yc=!1}var Vn=null,qc=null,ah=null;function v_(){if(ah)return ah;var n,a=qc,o=a.length,c,d="value"in Vn?Vn.value:Vn.textContent,m=d.length;for(n=0;n<o&&a[n]===d[n];n++);var E=o-n;for(c=1;c<=E&&a[o-c]===d[m-c];c++);return ah=d.slice(n,1<c?1-c:void 0)}function rh(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function lh(){return!0}function E_(){return!1}function Ve(n){function a(o,c,d,m,E){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(o=n[M],this[M]=o?o(m):m[M]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lh:E_,this.isPropagationStopped=E_,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),a}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oh=Ve(Bs),sl=_({},Bs,{view:0,detail:0}),pp=Ve(sl),Hc,Zc,al,hh=_({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==al&&(al&&n.type==="mousemove"?(Hc=n.screenX-al.screenX,Zc=n.screenY-al.screenY):Zc=Hc=0,al=n),Hc)},movementY:function(n){return"movementY"in n?n.movementY:Zc}}),p_=Ve(hh),Sp=_({},hh,{dataTransfer:0}),Mp=Ve(Sp),xp=_({},sl,{relatedTarget:0}),Kc=Ve(xp),wp=_({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),bp=Ve(wp),Cp=_({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tp=Ve(Cp),Rp=_({},Bs,{data:0}),S_=Ve(Rp),Ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lp(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Gp[n])?!!a[n]:!1}function Vc(){return Lp}var Np=_({},sl,{key:function(n){if(n.key){var a=Ap[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=rh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Op[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(n){return n.type==="keypress"?rh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?rh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Dp=Ve(Np),Ip=_({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M_=Ve(Ip),Pp=_({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),zp=Ve(Pp),Fp=_({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Up=Ve(Fp),kp=_({},hh,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=Ve(kp),jp=_({},Bs,{newState:0,oldState:0}),Bp=Ve(jp),Yp=[9,13,27,32],Wc=vn&&"CompositionEvent"in window,rl=null;vn&&"documentMode"in document&&(rl=document.documentMode);var qp=vn&&"TextEvent"in window&&!rl,x_=vn&&(!Wc||rl&&8<rl&&11>=rl),w_=" ",b_=!1;function C_(n,a){switch(n){case"keyup":return Yp.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xa=!1;function Hp(n,a){switch(n){case"compositionend":return T_(a);case"keypress":return a.which!==32?null:(b_=!0,w_);case"textInput":return n=a.data,n===w_&&b_?null:n;default:return null}}function Zp(n,a){if(Xa)return n==="compositionend"||!Wc&&C_(n,a)?(n=v_(),ah=qc=Vn=null,Xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x_&&a.locale!=="ko"?null:a.data;default:return null}}var Kp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R_(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Kp[n.type]:a==="textarea"}function A_(n,a,o,c){Ua?ka?ka.push(c):ka=[c]:Ua=c,a=Vh(a,"onChange"),0<a.length&&(o=new oh("onChange","change",null,o,c),n.push({event:o,listeners:a}))}var ll=null,ol=null;function Vp(n){hy(n,0)}function uh(n){var a=el(n);if(u_(a))return n}function O_(n,a){if(n==="change")return a}var G_=!1;if(vn){var Qc;if(vn){var $c="oninput"in document;if(!$c){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),$c=typeof L_.oninput=="function"}Qc=$c}else Qc=!1;G_=Qc&&(!document.documentMode||9<document.documentMode)}function N_(){ll&&(ll.detachEvent("onpropertychange",D_),ol=ll=null)}function D_(n){if(n.propertyName==="value"&&uh(ol)){var a=[];A_(a,ol,n,jc(n)),y_(Vp,a)}}function Wp(n,a,o){n==="focusin"?(N_(),ll=a,ol=o,ll.attachEvent("onpropertychange",D_)):n==="focusout"&&N_()}function Qp(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uh(ol)}function $p(n,a){if(n==="click")return uh(a)}function Jp(n,a){if(n==="input"||n==="change")return uh(a)}function t4(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var ui=typeof Object.is=="function"?Object.is:t4;function hl(n,a){if(ui(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),c=Object.keys(a);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!ks.call(a,d)||!ui(n[d],a[d]))return!1}return!0}function I_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function P_(n,a){var o=I_(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=a&&c>=a)return{node:o,offset:a-n};n=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=I_(o)}}function z_(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?z_(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function F_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=nh(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=nh(n.document)}return a}function Jc(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var e4=vn&&"documentMode"in document&&11>=document.documentMode,ja=null,tf=null,ul=null,ef=!1;function U_(n,a,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ef||ja==null||ja!==nh(c)||(c=ja,"selectionStart"in c&&Jc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ul&&hl(ul,c)||(ul=c,c=Vh(tf,"onSelect"),0<c.length&&(a=new oh("onSelect","select",null,a,o),n.push({event:a,listeners:c}),a.target=ja)))}function Ys(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Ba={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},nf={},k_={};vn&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function qs(n){if(nf[n])return nf[n];if(!Ba[n])return n;var a=Ba[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in k_)return nf[n]=a[o];return n}var X_=qs("animationend"),j_=qs("animationiteration"),B_=qs("animationstart"),i4=qs("transitionrun"),n4=qs("transitionstart"),s4=qs("transitioncancel"),Y_=qs("transitionend"),q_=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function Ui(n,a){q_.set(n,a),js(a,[n])}var H_=new WeakMap;function Mi(n,a){if(typeof n=="object"&&n!==null){var o=H_.get(n);return o!==void 0?o:(a={value:n,source:a,stack:o_(a)},H_.set(n,a),a)}return{value:n,source:a,stack:o_(a)}}var xi=[],Ya=0,af=0;function ch(){for(var n=Ya,a=af=Ya=0;a<n;){var o=xi[a];xi[a++]=null;var c=xi[a];xi[a++]=null;var d=xi[a];xi[a++]=null;var m=xi[a];if(xi[a++]=null,c!==null&&d!==null){var E=c.pending;E===null?d.next=d:(d.next=E.next,E.next=d),c.pending=d}m!==0&&Z_(o,d,m)}}function fh(n,a,o,c){xi[Ya++]=n,xi[Ya++]=a,xi[Ya++]=o,xi[Ya++]=c,af|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function rf(n,a,o,c){return fh(n,a,o,c),dh(n)}function qa(n,a){return fh(n,null,null,a),dh(n)}function Z_(n,a,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&a!==null&&(d=31-De(o),n=m.hiddenUpdates,c=n[d],c===null?n[d]=[a]:c.push(a),a.lane=o|536870912),m):null}function dh(n){if(50<Il)throw Il=0,fd=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Ha={};function a4(n,a,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(n,a,o,c){return new a4(n,a,o,c)}function lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function En(n,a){var o=n.alternate;return o===null?(o=ci(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function K_(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function gh(n,a,o,c,d,m){var E=0;if(c=n,typeof n=="function")lf(n)&&(E=1);else if(typeof n=="string")E=lS(n,o,rt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Z:return n=ci(31,o,a,d),n.elementType=Z,n.lanes=m,n;case S:return Hs(o.children,d,m,a);case w:E=8,d|=24;break;case x:return n=ci(12,o,a,d|2),n.elementType=x,n.lanes=m,n;case A:return n=ci(13,o,a,d),n.elementType=A,n.lanes=m,n;case k:return n=ci(19,o,a,d),n.elementType=k,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:case L:E=10;break t;case R:E=9;break t;case O:E=11;break t;case j:E=14;break t;case B:E=16,c=null;break t}E=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return a=ci(E,o,a,d),a.elementType=n,a.type=c,a.lanes=m,a}function Hs(n,a,o,c){return n=ci(7,n,c,a),n.lanes=o,n}function of(n,a,o){return n=ci(6,n,null,a),n.lanes=o,n}function hf(n,a,o){return a=ci(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Za=[],Ka=0,_h=null,mh=0,wi=[],bi=0,Zs=null,pn=1,Sn="";function Ks(n,a){Za[Ka++]=mh,Za[Ka++]=_h,_h=n,mh=a}function V_(n,a,o){wi[bi++]=pn,wi[bi++]=Sn,wi[bi++]=Zs,Zs=n;var c=pn;n=Sn;var d=32-De(c)-1;c&=~(1<<d),o+=1;var m=32-De(a)+d;if(30<m){var E=d-d%5;m=(c&(1<<E)-1).toString(32),c>>=E,d-=E,pn=1<<32-De(a)+d|o<<d|c,Sn=m+n}else pn=1<<m|o<<d|c,Sn=n}function uf(n){n.return!==null&&(Ks(n,1),V_(n,1,0))}function cf(n){for(;n===_h;)_h=Za[--Ka],Za[Ka]=null,mh=Za[--Ka],Za[Ka]=null;for(;n===Zs;)Zs=wi[--bi],wi[bi]=null,Sn=wi[--bi],wi[bi]=null,pn=wi[--bi],wi[bi]=null}var je=null,ae=null,Pt=!1,Vs=null,tn=!1,ff=Error(s(519));function Ws(n){var a=Error(s(418,""));throw dl(Mi(a,n)),ff}function W_(n){var a=n.stateNode,o=n.type,c=n.memoizedProps;switch(a[Wt]=n,a[Tt]=c,o){case"dialog":At("cancel",a),At("close",a);break;case"iframe":case"object":case"embed":At("load",a);break;case"video":case"audio":for(o=0;o<zl.length;o++)At(zl[o],a);break;case"source":At("error",a);break;case"img":case"image":case"link":At("error",a),At("load",a);break;case"details":At("toggle",a);break;case"input":At("invalid",a),c_(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ih(a);break;case"select":At("invalid",a);break;case"textarea":At("invalid",a),d_(a,c.value,c.defaultValue,c.children),ih(a)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||c.suppressHydrationWarning===!0||dy(a.textContent,o)?(c.popover!=null&&(At("beforetoggle",a),At("toggle",a)),c.onScroll!=null&&At("scroll",a),c.onScrollEnd!=null&&At("scrollend",a),c.onClick!=null&&(a.onclick=Wh),a=!0):a=!1,a||Ws(n)}function Q_(n){for(je=n.return;je;)switch(je.tag){case 5:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:je=je.return}}function cl(n){if(n!==je)return!1;if(!Pt)return Q_(n),Pt=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Rd(n.type,n.memoizedProps)),o=!o),o&&ae&&Ws(n),Q_(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));t:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(a===0){ae=Xi(n.nextSibling);break t}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;n=n.nextSibling}ae=null}}else a===27?(a=ae,cs(n.type)?(n=Ld,Ld=null,ae=n):ae=a):ae=je?Xi(n.stateNode.nextSibling):null;return!0}function fl(){ae=je=null,Pt=!1}function $_(){var n=Vs;return n!==null&&($e===null?$e=n:$e.push.apply($e,n),Vs=null),n}function dl(n){Vs===null?Vs=[n]:Vs.push(n)}var df=X(null),Qs=null,Mn=null;function Wn(n,a,o){$(df,a._currentValue),a._currentValue=o}function xn(n){n._currentValue=df.current,z(df)}function gf(n,a,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),n===o)break;n=n.return}}function _f(n,a,o,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var E=d.child;m=m.firstContext;t:for(;m!==null;){var M=m;m=d;for(var T=0;T<a.length;T++)if(M.context===a[T]){m.lanes|=o,M=m.alternate,M!==null&&(M.lanes|=o),gf(m.return,o,n),c||(E=null);break t}m=M.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(s(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),gf(E,o,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function gl(n,a,o,c){n=null;for(var d=a,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var M=d.type;ui(d.pendingProps.value,E.value)||(n!==null?n.push(M):n=[M])}}else if(d===Ut.current){if(E=d.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}d=d.return}n!==null&&_f(a,n,o,c),a.flags|=262144}function yh(n){for(n=n.firstContext;n!==null;){if(!ui(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Qs=n,Mn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Pe(n){return J_(Qs,n)}function vh(n,a){return Qs===null&&$s(n),J_(n,a)}function J_(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Mn===null){if(n===null)throw Error(s(308));Mn=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Mn=Mn.next=a;return o}var r4=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},l4=i.unstable_scheduleCallback,o4=i.unstable_NormalPriority,_e={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mf(){return{controller:new r4,data:new Map,refCount:0}}function _l(n){n.refCount--,n.refCount===0&&l4(o4,function(){n.controller.abort()})}var ml=null,yf=0,Va=0,Wa=null;function h4(n,a){if(ml===null){var o=ml=[];yf=0,Va=Ed(),Wa={status:"pending",value:void 0,then:function(c){o.push(c)}}}return yf++,a.then(t1,t1),a}function t1(){if(--yf===0&&ml!==null){Wa!==null&&(Wa.status="fulfilled");var n=ml;ml=null,Va=0,Wa=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function u4(n,a){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){c.status="fulfilled",c.value=a;for(var d=0;d<o.length;d++)(0,o[d])(a)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var e1=D.S;D.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&h4(n,a),e1!==null&&e1(n,a)};var Js=X(null);function vf(){var n=Js.current;return n!==null?n:Qt.pooledCache}function Eh(n,a){a===null?$(Js,Js.current):$(Js,a.pool)}function i1(){var n=vf();return n===null?null:{parent:_e._currentValue,pool:n}}var yl=Error(s(460)),n1=Error(s(474)),ph=Error(s(542)),Ef={then:function(){}};function s1(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Sh(){}function a1(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(Sh,Sh),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,l1(n),n;default:if(typeof a.status=="string")a.then(Sh,Sh);else{if(n=Qt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(c){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=c}},function(c){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,l1(n),n}throw vl=a,yl}}var vl=null;function r1(){if(vl===null)throw Error(s(459));var n=vl;return vl=null,n}function l1(n){if(n===yl||n===ph)throw Error(s(483))}var Qn=!1;function pf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $n(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Jn(n,a,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var d=c.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a,a=dh(n),Z_(n,null,o),a}return fh(n,c,a,o),dh(n)}function El(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var c=a.lanes;c&=n.pendingLanes,o|=c,a.lanes=o,Xe(n,o)}}function Mf(n,a){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?d=m=a:m=m.next=a}else d=m=a;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var xf=!1;function pl(){if(xf){var n=Wa;if(n!==null)throw n}}function Sl(n,a,o,c){xf=!1;var d=n.updateQueue;Qn=!1;var m=d.firstBaseUpdate,E=d.lastBaseUpdate,M=d.shared.pending;if(M!==null){d.shared.pending=null;var T=M,P=T.next;T.next=null,E===null?m=P:E.next=P,E=T;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,M=Y.lastBaseUpdate,M!==E&&(M===null?Y.firstBaseUpdate=P:M.next=P,Y.lastBaseUpdate=T))}if(m!==null){var V=d.baseState;E=0,Y=P=T=null,M=m;do{var F=M.lane&-536870913,U=F!==M.lane;if(U?(Nt&F)===F:(c&F)===F){F!==0&&F===Va&&(xf=!0),Y!==null&&(Y=Y.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var yt=n,_t=M;F=a;var Kt=o;switch(_t.tag){case 1:if(yt=_t.payload,typeof yt=="function"){V=yt.call(Kt,V,F);break t}V=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=_t.payload,F=typeof yt=="function"?yt.call(Kt,V,F):yt,F==null)break t;V=_({},V,F);break t;case 2:Qn=!0}}F=M.callback,F!==null&&(n.flags|=64,U&&(n.flags|=8192),U=d.callbacks,U===null?d.callbacks=[F]:U.push(F))}else U={lane:F,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Y===null?(P=Y=U,T=V):Y=Y.next=U,E|=F;if(M=M.next,M===null){if(M=d.shared.pending,M===null)break;U=M,M=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);Y===null&&(T=V),d.baseState=T,d.firstBaseUpdate=P,d.lastBaseUpdate=Y,m===null&&(d.shared.lanes=0),ls|=E,n.lanes=E,n.memoizedState=V}}function o1(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function h1(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)o1(o[n],a)}var Qa=X(null),Mh=X(0);function u1(n,a){n=On,$(Mh,n),$(Qa,a),On=n|a.baseLanes}function wf(){$(Mh,On),$(Qa,Qa.current)}function bf(){On=Mh.current,z(Qa),z(Mh)}var ts=0,wt=null,Ht=null,de=null,xh=!1,$a=!1,ta=!1,wh=0,Ml=0,Ja=null,c4=0;function he(){throw Error(s(321))}function Cf(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!ui(n[o],a[o]))return!1;return!0}function Tf(n,a,o,c,d,m){return ts=m,wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,D.H=n===null||n.memoizedState===null?Z1:K1,ta=!1,m=o(c,d),ta=!1,$a&&(m=f1(a,o,c,d)),c1(n),m}function c1(n){D.H=Oh;var a=Ht!==null&&Ht.next!==null;if(ts=0,de=Ht=wt=null,xh=!1,Ml=0,Ja=null,a)throw Error(s(300));n===null||Me||(n=n.dependencies,n!==null&&yh(n)&&(Me=!0))}function f1(n,a,o,c){wt=n;var d=0;do{if($a&&(Ja=null),Ml=0,$a=!1,25<=d)throw Error(s(301));if(d+=1,de=Ht=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=v4,m=a(o,c)}while($a);return m}function f4(){var n=D.H,a=n.useState()[0];return a=typeof a.then=="function"?xl(a):a,n=n.useState()[0],(Ht!==null?Ht.memoizedState:null)!==n&&(wt.flags|=1024),a}function Rf(){var n=wh!==0;return wh=0,n}function Af(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function Of(n){if(xh){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}xh=!1}ts=0,de=Ht=wt=null,$a=!1,Ml=wh=0,Ja=null}function We(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?wt.memoizedState=de=n:de=de.next=n,de}function ge(){if(Ht===null){var n=wt.alternate;n=n!==null?n.memoizedState:null}else n=Ht.next;var a=de===null?wt.memoizedState:de.next;if(a!==null)de=a,Ht=n;else{if(n===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Ht=n,n={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},de===null?wt.memoizedState=de=n:de=de.next=n}return de}function Gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(n){var a=Ml;return Ml+=1,Ja===null&&(Ja=[]),n=a1(Ja,n,a),a=wt,(de===null?a.memoizedState:de.next)===null&&(a=a.alternate,D.H=a===null||a.memoizedState===null?Z1:K1),n}function bh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xl(n);if(n.$$typeof===L)return Pe(n)}throw Error(s(438,String(n)))}function Lf(n){var a=null,o=wt.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var c=wt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Gf(),wt.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),c=0;c<n;c++)o[c]=J;return a.index++,o}function wn(n,a){return typeof a=="function"?a(n):a}function Ch(n){var a=ge();return Nf(a,Ht,n)}function Nf(n,a,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var d=n.baseQueue,m=c.pending;if(m!==null){if(d!==null){var E=d.next;d.next=m.next,m.next=E}a.baseQueue=d=m,c.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{a=d.next;var M=E=null,T=null,P=a,Y=!1;do{var V=P.lane&-536870913;if(V!==P.lane?(Nt&V)===V:(ts&V)===V){var F=P.revertLane;if(F===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),V===Va&&(Y=!0);else if((ts&F)===F){P=P.next,F===Va&&(Y=!0);continue}else V={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},T===null?(M=T=V,E=m):T=T.next=V,wt.lanes|=F,ls|=F;V=P.action,ta&&o(m,V),m=P.hasEagerState?P.eagerState:o(m,V)}else F={lane:V,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},T===null?(M=T=F,E=m):T=T.next=F,wt.lanes|=V,ls|=V;P=P.next}while(P!==null&&P!==a);if(T===null?E=m:T.next=M,!ui(m,n.memoizedState)&&(Me=!0,Y&&(o=Wa,o!==null)))throw o;n.memoizedState=m,n.baseState=E,n.baseQueue=T,c.lastRenderedState=m}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Df(n){var a=ge(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,d=o.pending,m=a.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do m=n(m,E.action),E=E.next;while(E!==d);ui(m,a.memoizedState)||(Me=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),o.lastRenderedState=m}return[m,c]}function d1(n,a,o){var c=wt,d=ge(),m=Pt;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=a();var E=!ui((Ht||d).memoizedState,o);E&&(d.memoizedState=o,Me=!0),d=d.queue;var M=m1.bind(null,c,d,n);if(wl(2048,8,M,[n]),d.getSnapshot!==a||E||de!==null&&de.memoizedState.tag&1){if(c.flags|=2048,tr(9,Th(),_1.bind(null,c,d,o,a),null),Qt===null)throw Error(s(349));m||(ts&124)!==0||g1(c,a,o)}return o}function g1(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=wt.updateQueue,a===null?(a=Gf(),wt.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function _1(n,a,o,c){a.value=o,a.getSnapshot=c,y1(a)&&v1(n)}function m1(n,a,o){return o(function(){y1(a)&&v1(n)})}function y1(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!ui(n,o)}catch{return!0}}function v1(n){var a=qa(n,2);a!==null&&mi(a,n,2)}function If(n){var a=We();if(typeof n=="function"){var o=n;if(n=o(),ta){$i(!0);try{o()}finally{$i(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:n},a}function E1(n,a,o,c){return n.baseState=o,Nf(n,Ht,typeof c=="function"?c:wn)}function d4(n,a,o,c,d){if(Ah(n))throw Error(s(485));if(n=a.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};D.T!==null?o(!0):m.isTransition=!1,c(m),o=a.pending,o===null?(m.next=a.pending=m,p1(a,m)):(m.next=o.next,a.pending=o.next=m)}}function p1(n,a){var o=a.action,c=a.payload,d=n.state;if(a.isTransition){var m=D.T,E={};D.T=E;try{var M=o(d,c),T=D.S;T!==null&&T(E,M),S1(n,a,M)}catch(P){Pf(n,a,P)}finally{D.T=m}}else try{m=o(d,c),S1(n,a,m)}catch(P){Pf(n,a,P)}}function S1(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){M1(n,a,c)},function(c){return Pf(n,a,c)}):M1(n,a,o)}function M1(n,a,o){a.status="fulfilled",a.value=o,x1(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,p1(n,o)))}function Pf(n,a,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=o,x1(a),a=a.next;while(a!==c)}n.action=null}function x1(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function w1(n,a){return a}function b1(n,a){if(Pt){var o=Qt.formState;if(o!==null){t:{var c=wt;if(Pt){if(ae){e:{for(var d=ae,m=tn;d.nodeType!==8;){if(!m){d=null;break e}if(d=Xi(d.nextSibling),d===null){d=null;break e}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){ae=Xi(d.nextSibling),c=d.data==="F!";break t}}Ws(c)}c=!1}c&&(a=o[0])}}return o=We(),o.memoizedState=o.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w1,lastRenderedState:a},o.queue=c,o=Y1.bind(null,wt,c),c.dispatch=o,c=If(!1),m=Xf.bind(null,wt,!1,c.queue),c=We(),d={state:a,dispatch:null,action:n,pending:null},c.queue=d,o=d4.bind(null,wt,d,m,o),d.dispatch=o,c.memoizedState=n,[a,o,!1]}function C1(n){var a=ge();return T1(a,Ht,n)}function T1(n,a,o){if(a=Nf(n,a,w1)[0],n=Ch(wn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=xl(a)}catch(E){throw E===yl?ph:E}else c=a;a=ge();var d=a.queue,m=d.dispatch;return o!==a.memoizedState&&(wt.flags|=2048,tr(9,Th(),g4.bind(null,d,o),null)),[c,m,n]}function g4(n,a){n.action=a}function R1(n){var a=ge(),o=Ht;if(o!==null)return T1(a,o,n);ge(),a=a.memoizedState,o=ge();var c=o.queue.dispatch;return o.memoizedState=n,[a,c,!1]}function tr(n,a,o,c){return n={tag:n,create:o,deps:c,inst:a,next:null},a=wt.updateQueue,a===null&&(a=Gf(),wt.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,a.lastEffect=n),n}function Th(){return{destroy:void 0,resource:void 0}}function A1(){return ge().memoizedState}function Rh(n,a,o,c){var d=We();c=c===void 0?null:c,wt.flags|=n,d.memoizedState=tr(1|a,Th(),o,c)}function wl(n,a,o,c){var d=ge();c=c===void 0?null:c;var m=d.memoizedState.inst;Ht!==null&&c!==null&&Cf(c,Ht.memoizedState.deps)?d.memoizedState=tr(a,m,o,c):(wt.flags|=n,d.memoizedState=tr(1|a,m,o,c))}function O1(n,a){Rh(8390656,8,n,a)}function G1(n,a){wl(2048,8,n,a)}function L1(n,a){return wl(4,2,n,a)}function N1(n,a){return wl(4,4,n,a)}function D1(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function I1(n,a,o){o=o!=null?o.concat([n]):null,wl(4,4,D1.bind(null,a,n),o)}function zf(){}function P1(n,a){var o=ge();a=a===void 0?null:a;var c=o.memoizedState;return a!==null&&Cf(a,c[1])?c[0]:(o.memoizedState=[n,a],n)}function z1(n,a){var o=ge();a=a===void 0?null:a;var c=o.memoizedState;if(a!==null&&Cf(a,c[1]))return c[0];if(c=n(),ta){$i(!0);try{n()}finally{$i(!1)}}return o.memoizedState=[c,a],c}function Ff(n,a,o){return o===void 0||(ts&1073741824)!==0?n.memoizedState=a:(n.memoizedState=o,n=km(),wt.lanes|=n,ls|=n,o)}function F1(n,a,o,c){return ui(o,a)?o:Qa.current!==null?(n=Ff(n,o,c),ui(n,a)||(Me=!0),n):(ts&42)===0?(Me=!0,n.memoizedState=o):(n=km(),wt.lanes|=n,ls|=n,a)}function U1(n,a,o,c,d){var m=K.p;K.p=m!==0&&8>m?m:8;var E=D.T,M={};D.T=M,Xf(n,!1,a,o);try{var T=d(),P=D.S;if(P!==null&&P(M,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var Y=u4(T,c);bl(n,a,Y,_i(n))}else bl(n,a,c,_i(n))}catch(V){bl(n,a,{then:function(){},status:"rejected",reason:V},_i())}finally{K.p=m,D.T=E}}function _4(){}function Uf(n,a,o,c){if(n.tag!==5)throw Error(s(476));var d=k1(n).queue;U1(n,d,a,W,o===null?_4:function(){return X1(n),o(c)})}function k1(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:W},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function X1(n){var a=k1(n).next.queue;bl(n,a,{},_i())}function kf(){return Pe(Bl)}function j1(){return ge().memoizedState}function B1(){return ge().memoizedState}function m4(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=_i();n=$n(o);var c=Jn(a,n,o);c!==null&&(mi(c,a,o),El(c,a,o)),a={cache:mf()},n.payload=a;return}a=a.return}}function y4(n,a,o){var c=_i();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ah(n)?q1(a,o):(o=rf(n,a,o,c),o!==null&&(mi(o,n,c),H1(o,a,c)))}function Y1(n,a,o){var c=_i();bl(n,a,o,c)}function bl(n,a,o,c){var d={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ah(n))q1(a,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var E=a.lastRenderedState,M=m(E,o);if(d.hasEagerState=!0,d.eagerState=M,ui(M,E))return fh(n,a,d,0),Qt===null&&ch(),!1}catch{}finally{}if(o=rf(n,a,d,c),o!==null)return mi(o,n,c),H1(o,a,c),!0}return!1}function Xf(n,a,o,c){if(c={lane:2,revertLane:Ed(),action:c,hasEagerState:!1,eagerState:null,next:null},Ah(n)){if(a)throw Error(s(479))}else a=rf(n,o,c,2),a!==null&&mi(a,n,2)}function Ah(n){var a=n.alternate;return n===wt||a!==null&&a===wt}function q1(n,a){$a=xh=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function H1(n,a,o){if((o&4194048)!==0){var c=a.lanes;c&=n.pendingLanes,o|=c,a.lanes=o,Xe(n,o)}}var Oh={readContext:Pe,use:bh,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Z1={readContext:Pe,use:bh,useCallback:function(n,a){return We().memoizedState=[n,a===void 0?null:a],n},useContext:Pe,useEffect:O1,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,Rh(4194308,4,D1.bind(null,a,n),o)},useLayoutEffect:function(n,a){return Rh(4194308,4,n,a)},useInsertionEffect:function(n,a){Rh(4,2,n,a)},useMemo:function(n,a){var o=We();a=a===void 0?null:a;var c=n();if(ta){$i(!0);try{n()}finally{$i(!1)}}return o.memoizedState=[c,a],c},useReducer:function(n,a,o){var c=We();if(o!==void 0){var d=o(a);if(ta){$i(!0);try{o(a)}finally{$i(!1)}}}else d=a;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=y4.bind(null,wt,n),[c.memoizedState,n]},useRef:function(n){var a=We();return n={current:n},a.memoizedState=n},useState:function(n){n=If(n);var a=n.queue,o=Y1.bind(null,wt,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:zf,useDeferredValue:function(n,a){var o=We();return Ff(o,n,a)},useTransition:function(){var n=If(!1);return n=U1.bind(null,wt,n.queue,!0,!1),We().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var c=wt,d=We();if(Pt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),Qt===null)throw Error(s(349));(Nt&124)!==0||g1(c,a,o)}d.memoizedState=o;var m={value:o,getSnapshot:a};return d.queue=m,O1(m1.bind(null,c,m,n),[n]),c.flags|=2048,tr(9,Th(),_1.bind(null,c,m,o,a),null),o},useId:function(){var n=We(),a=Qt.identifierPrefix;if(Pt){var o=Sn,c=pn;o=(c&~(1<<32-De(c)-1)).toString(32)+o,a=""+a+"R"+o,o=wh++,0<o&&(a+="H"+o.toString(32)),a+=""}else o=c4++,a=""+a+"r"+o.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:kf,useFormState:b1,useActionState:b1,useOptimistic:function(n){var a=We();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Xf.bind(null,wt,!0,o),o.dispatch=a,[n,a]},useMemoCache:Lf,useCacheRefresh:function(){return We().memoizedState=m4.bind(null,wt)}},K1={readContext:Pe,use:bh,useCallback:P1,useContext:Pe,useEffect:G1,useImperativeHandle:I1,useInsertionEffect:L1,useLayoutEffect:N1,useMemo:z1,useReducer:Ch,useRef:A1,useState:function(){return Ch(wn)},useDebugValue:zf,useDeferredValue:function(n,a){var o=ge();return F1(o,Ht.memoizedState,n,a)},useTransition:function(){var n=Ch(wn)[0],a=ge().memoizedState;return[typeof n=="boolean"?n:xl(n),a]},useSyncExternalStore:d1,useId:j1,useHostTransitionStatus:kf,useFormState:C1,useActionState:C1,useOptimistic:function(n,a){var o=ge();return E1(o,Ht,n,a)},useMemoCache:Lf,useCacheRefresh:B1},v4={readContext:Pe,use:bh,useCallback:P1,useContext:Pe,useEffect:G1,useImperativeHandle:I1,useInsertionEffect:L1,useLayoutEffect:N1,useMemo:z1,useReducer:Df,useRef:A1,useState:function(){return Df(wn)},useDebugValue:zf,useDeferredValue:function(n,a){var o=ge();return Ht===null?Ff(o,n,a):F1(o,Ht.memoizedState,n,a)},useTransition:function(){var n=Df(wn)[0],a=ge().memoizedState;return[typeof n=="boolean"?n:xl(n),a]},useSyncExternalStore:d1,useId:j1,useHostTransitionStatus:kf,useFormState:R1,useActionState:R1,useOptimistic:function(n,a){var o=ge();return Ht!==null?E1(o,Ht,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:B1},er=null,Cl=0;function Gh(n){var a=Cl;return Cl+=1,er===null&&(er=[]),a1(er,n,a)}function Tl(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Lh(n,a){throw a.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function V1(n){var a=n._init;return a(n._payload)}function W1(n){function a(N,G){if(n){var I=N.deletions;I===null?(N.deletions=[G],N.flags|=16):I.push(G)}}function o(N,G){if(!n)return null;for(;G!==null;)a(N,G),G=G.sibling;return null}function c(N){for(var G=new Map;N!==null;)N.key!==null?G.set(N.key,N):G.set(N.index,N),N=N.sibling;return G}function d(N,G){return N=En(N,G),N.index=0,N.sibling=null,N}function m(N,G,I){return N.index=I,n?(I=N.alternate,I!==null?(I=I.index,I<G?(N.flags|=67108866,G):I):(N.flags|=67108866,G)):(N.flags|=1048576,G)}function E(N){return n&&N.alternate===null&&(N.flags|=67108866),N}function M(N,G,I,H){return G===null||G.tag!==6?(G=of(I,N.mode,H),G.return=N,G):(G=d(G,I),G.return=N,G)}function T(N,G,I,H){var ot=I.type;return ot===S?Y(N,G,I.props.children,H,I.key):G!==null&&(G.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===B&&V1(ot)===G.type)?(G=d(G,I.props),Tl(G,I),G.return=N,G):(G=gh(I.type,I.key,I.props,null,N.mode,H),Tl(G,I),G.return=N,G)}function P(N,G,I,H){return G===null||G.tag!==4||G.stateNode.containerInfo!==I.containerInfo||G.stateNode.implementation!==I.implementation?(G=hf(I,N.mode,H),G.return=N,G):(G=d(G,I.children||[]),G.return=N,G)}function Y(N,G,I,H,ot){return G===null||G.tag!==7?(G=Hs(I,N.mode,H,ot),G.return=N,G):(G=d(G,I),G.return=N,G)}function V(N,G,I){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=of(""+G,N.mode,I),G.return=N,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return I=gh(G.type,G.key,G.props,null,N.mode,I),Tl(I,G),I.return=N,I;case p:return G=hf(G,N.mode,I),G.return=N,G;case B:var H=G._init;return G=H(G._payload),V(N,G,I)}if(ct(G)||tt(G))return G=Hs(G,N.mode,I,null),G.return=N,G;if(typeof G.then=="function")return V(N,Gh(G),I);if(G.$$typeof===L)return V(N,vh(N,G),I);Lh(N,G)}return null}function F(N,G,I,H){var ot=G!==null?G.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ot!==null?null:M(N,G,""+I,H);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return I.key===ot?T(N,G,I,H):null;case p:return I.key===ot?P(N,G,I,H):null;case B:return ot=I._init,I=ot(I._payload),F(N,G,I,H)}if(ct(I)||tt(I))return ot!==null?null:Y(N,G,I,H,null);if(typeof I.then=="function")return F(N,G,Gh(I),H);if(I.$$typeof===L)return F(N,G,vh(N,I),H);Lh(N,I)}return null}function U(N,G,I,H,ot){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return N=N.get(I)||null,M(G,N,""+H,ot);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return N=N.get(H.key===null?I:H.key)||null,T(G,N,H,ot);case p:return N=N.get(H.key===null?I:H.key)||null,P(G,N,H,ot);case B:var Ct=H._init;return H=Ct(H._payload),U(N,G,I,H,ot)}if(ct(H)||tt(H))return N=N.get(I)||null,Y(G,N,H,ot,null);if(typeof H.then=="function")return U(N,G,I,Gh(H),ot);if(H.$$typeof===L)return U(N,G,I,vh(G,H),ot);Lh(G,H)}return null}function yt(N,G,I,H){for(var ot=null,Ct=null,ut=G,mt=G=0,we=null;ut!==null&&mt<I.length;mt++){ut.index>mt?(we=ut,ut=null):we=ut.sibling;var Dt=F(N,ut,I[mt],H);if(Dt===null){ut===null&&(ut=we);break}n&&ut&&Dt.alternate===null&&a(N,ut),G=m(Dt,G,mt),Ct===null?ot=Dt:Ct.sibling=Dt,Ct=Dt,ut=we}if(mt===I.length)return o(N,ut),Pt&&Ks(N,mt),ot;if(ut===null){for(;mt<I.length;mt++)ut=V(N,I[mt],H),ut!==null&&(G=m(ut,G,mt),Ct===null?ot=ut:Ct.sibling=ut,Ct=ut);return Pt&&Ks(N,mt),ot}for(ut=c(ut);mt<I.length;mt++)we=U(ut,N,mt,I[mt],H),we!==null&&(n&&we.alternate!==null&&ut.delete(we.key===null?mt:we.key),G=m(we,G,mt),Ct===null?ot=we:Ct.sibling=we,Ct=we);return n&&ut.forEach(function(ms){return a(N,ms)}),Pt&&Ks(N,mt),ot}function _t(N,G,I,H){if(I==null)throw Error(s(151));for(var ot=null,Ct=null,ut=G,mt=G=0,we=null,Dt=I.next();ut!==null&&!Dt.done;mt++,Dt=I.next()){ut.index>mt?(we=ut,ut=null):we=ut.sibling;var ms=F(N,ut,Dt.value,H);if(ms===null){ut===null&&(ut=we);break}n&&ut&&ms.alternate===null&&a(N,ut),G=m(ms,G,mt),Ct===null?ot=ms:Ct.sibling=ms,Ct=ms,ut=we}if(Dt.done)return o(N,ut),Pt&&Ks(N,mt),ot;if(ut===null){for(;!Dt.done;mt++,Dt=I.next())Dt=V(N,Dt.value,H),Dt!==null&&(G=m(Dt,G,mt),Ct===null?ot=Dt:Ct.sibling=Dt,Ct=Dt);return Pt&&Ks(N,mt),ot}for(ut=c(ut);!Dt.done;mt++,Dt=I.next())Dt=U(ut,N,mt,Dt.value,H),Dt!==null&&(n&&Dt.alternate!==null&&ut.delete(Dt.key===null?mt:Dt.key),G=m(Dt,G,mt),Ct===null?ot=Dt:Ct.sibling=Dt,Ct=Dt);return n&&ut.forEach(function(ES){return a(N,ES)}),Pt&&Ks(N,mt),ot}function Kt(N,G,I,H){if(typeof I=="object"&&I!==null&&I.type===S&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case v:t:{for(var ot=I.key;G!==null;){if(G.key===ot){if(ot=I.type,ot===S){if(G.tag===7){o(N,G.sibling),H=d(G,I.props.children),H.return=N,N=H;break t}}else if(G.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===B&&V1(ot)===G.type){o(N,G.sibling),H=d(G,I.props),Tl(H,I),H.return=N,N=H;break t}o(N,G);break}else a(N,G);G=G.sibling}I.type===S?(H=Hs(I.props.children,N.mode,H,I.key),H.return=N,N=H):(H=gh(I.type,I.key,I.props,null,N.mode,H),Tl(H,I),H.return=N,N=H)}return E(N);case p:t:{for(ot=I.key;G!==null;){if(G.key===ot)if(G.tag===4&&G.stateNode.containerInfo===I.containerInfo&&G.stateNode.implementation===I.implementation){o(N,G.sibling),H=d(G,I.children||[]),H.return=N,N=H;break t}else{o(N,G);break}else a(N,G);G=G.sibling}H=hf(I,N.mode,H),H.return=N,N=H}return E(N);case B:return ot=I._init,I=ot(I._payload),Kt(N,G,I,H)}if(ct(I))return yt(N,G,I,H);if(tt(I)){if(ot=tt(I),typeof ot!="function")throw Error(s(150));return I=ot.call(I),_t(N,G,I,H)}if(typeof I.then=="function")return Kt(N,G,Gh(I),H);if(I.$$typeof===L)return Kt(N,G,vh(N,I),H);Lh(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,G!==null&&G.tag===6?(o(N,G.sibling),H=d(G,I),H.return=N,N=H):(o(N,G),H=of(I,N.mode,H),H.return=N,N=H),E(N)):o(N,G)}return function(N,G,I,H){try{Cl=0;var ot=Kt(N,G,I,H);return er=null,ot}catch(ut){if(ut===yl||ut===ph)throw ut;var Ct=ci(29,ut,null,N.mode);return Ct.lanes=H,Ct.return=N,Ct}finally{}}}var ir=W1(!0),Q1=W1(!1),Ci=X(null),en=null;function es(n){var a=n.alternate;$(me,me.current&1),$(Ci,n),en===null&&(a===null||Qa.current!==null||a.memoizedState!==null)&&(en=n)}function $1(n){if(n.tag===22){if($(me,me.current),$(Ci,n),en===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(en=n)}}else is()}function is(){$(me,me.current),$(Ci,Ci.current)}function bn(n){z(Ci),en===n&&(en=null),z(me)}var me=X(0);function Nh(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Gd(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function jf(n,a,o,c){a=n.memoizedState,o=o(c,a),o=o==null?a:_({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Bf={enqueueSetState:function(n,a,o){n=n._reactInternals;var c=_i(),d=$n(c);d.payload=a,o!=null&&(d.callback=o),a=Jn(n,d,c),a!==null&&(mi(a,n,c),El(a,n,c))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var c=_i(),d=$n(c);d.tag=1,d.payload=a,o!=null&&(d.callback=o),a=Jn(n,d,c),a!==null&&(mi(a,n,c),El(a,n,c))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=_i(),c=$n(o);c.tag=2,a!=null&&(c.callback=a),a=Jn(n,c,o),a!==null&&(mi(a,n,o),El(a,n,o))}};function J1(n,a,o,c,d,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,E):a.prototype&&a.prototype.isPureReactComponent?!hl(o,c)||!hl(d,m):!0}function tm(n,a,o,c){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,c),a.state!==n&&Bf.enqueueReplaceState(a,a.state,null)}function ea(n,a){var o=a;if("ref"in a){o={};for(var c in a)c!=="ref"&&(o[c]=a[c])}if(n=n.defaultProps){o===a&&(o=_({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}var Dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function em(n){Dh(n)}function im(n){console.error(n)}function nm(n){Dh(n)}function Ih(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function sm(n,a,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Yf(n,a,o){return o=$n(o),o.tag=3,o.payload={element:null},o.callback=function(){Ih(n,a)},o}function am(n){return n=$n(n),n.tag=3,n}function rm(n,a,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=c.value;n.payload=function(){return d(m)},n.callback=function(){sm(a,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){sm(a,o,c),typeof d!="function"&&(os===null?os=new Set([this]):os.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function E4(n,a,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=o.alternate,a!==null&&gl(a,o,d,!0),o=Ci.current,o!==null){switch(o.tag){case 13:return en===null?gd():o.alternate===null&&re===0&&(re=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===Ef?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([c]):a.add(c),md(n,c,d)),!1;case 22:return o.flags|=65536,c===Ef?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([c]):o.add(c)),md(n,c,d)),!1}throw Error(s(435,o.tag))}return md(n,c,d),gd(),!1}if(Pt)return a=Ci.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,c!==ff&&(n=Error(s(422),{cause:c}),dl(Mi(n,o)))):(c!==ff&&(a=Error(s(423),{cause:c}),dl(Mi(a,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=Mi(c,o),d=Yf(n.stateNode,c,d),Mf(n,d),re!==4&&(re=2)),!1;var m=Error(s(520),{cause:c});if(m=Mi(m,o),Dl===null?Dl=[m]:Dl.push(m),re!==4&&(re=2),a===null)return!0;c=Mi(c,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Yf(o.stateNode,c,n),Mf(o,n),!1;case 1:if(a=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(os===null||!os.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=am(d),rm(d,n,o,c),Mf(o,d),!1}o=o.return}while(o!==null);return!1}var lm=Error(s(461)),Me=!1;function Ae(n,a,o,c){a.child=n===null?Q1(a,null,o,c):ir(a,n.child,o,c)}function om(n,a,o,c,d){o=o.render;var m=a.ref;if("ref"in c){var E={};for(var M in c)M!=="ref"&&(E[M]=c[M])}else E=c;return $s(a),c=Tf(n,a,o,E,m,d),M=Rf(),n!==null&&!Me?(Af(n,a,d),Cn(n,a,d)):(Pt&&M&&uf(a),a.flags|=1,Ae(n,a,c,d),a.child)}function hm(n,a,o,c,d){if(n===null){var m=o.type;return typeof m=="function"&&!lf(m)&&m.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=m,um(n,a,m,c,d)):(n=gh(o.type,null,c,a,a.mode,d),n.ref=a.ref,n.return=a,a.child=n)}if(m=n.child,!$f(n,d)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:hl,o(E,c)&&n.ref===a.ref)return Cn(n,a,d)}return a.flags|=1,n=En(m,c),n.ref=a.ref,n.return=a,a.child=n}function um(n,a,o,c,d){if(n!==null){var m=n.memoizedProps;if(hl(m,c)&&n.ref===a.ref)if(Me=!1,a.pendingProps=c=m,$f(n,d))(n.flags&131072)!==0&&(Me=!0);else return a.lanes=n.lanes,Cn(n,a,d)}return qf(n,a,o,c,d)}function cm(n,a,o){var c=a.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=m!==null?m.baseLanes|o:o,n!==null){for(d=a.child=n.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;a.childLanes=m&~c}else a.childLanes=0,a.child=null;return fm(n,a,c,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Eh(a,m!==null?m.cachePool:null),m!==null?u1(a,m):wf(),$1(a);else return a.lanes=a.childLanes=536870912,fm(n,a,m!==null?m.baseLanes|o:o,o)}else m!==null?(Eh(a,m.cachePool),u1(a,m),is(),a.memoizedState=null):(n!==null&&Eh(a,null),wf(),is());return Ae(n,a,d,o),a.child}function fm(n,a,o,c){var d=vf();return d=d===null?null:{parent:_e._currentValue,pool:d},a.memoizedState={baseLanes:o,cachePool:d},n!==null&&Eh(a,null),wf(),$1(a),n!==null&&gl(n,a,c,!0),null}function Ph(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function qf(n,a,o,c,d){return $s(a),o=Tf(n,a,o,c,void 0,d),c=Rf(),n!==null&&!Me?(Af(n,a,d),Cn(n,a,d)):(Pt&&c&&uf(a),a.flags|=1,Ae(n,a,o,d),a.child)}function dm(n,a,o,c,d,m){return $s(a),a.updateQueue=null,o=f1(a,c,o,d),c1(n),c=Rf(),n!==null&&!Me?(Af(n,a,m),Cn(n,a,m)):(Pt&&c&&uf(a),a.flags|=1,Ae(n,a,o,m),a.child)}function gm(n,a,o,c,d){if($s(a),a.stateNode===null){var m=Ha,E=o.contextType;typeof E=="object"&&E!==null&&(m=Pe(E)),m=new o(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Bf,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},pf(a),E=o.contextType,m.context=typeof E=="object"&&E!==null?Pe(E):Ha,m.state=a.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(jf(a,o,E,c),m.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Bf.enqueueReplaceState(m,m.state,null),Sl(a,c,m,d),pl(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(n===null){m=a.stateNode;var M=a.memoizedProps,T=ea(o,M);m.props=T;var P=m.context,Y=o.contextType;E=Ha,typeof Y=="object"&&Y!==null&&(E=Pe(Y));var V=o.getDerivedStateFromProps;Y=typeof V=="function"||typeof m.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(M||P!==E)&&tm(a,m,c,E),Qn=!1;var F=a.memoizedState;m.state=F,Sl(a,c,m,d),pl(),P=a.memoizedState,M||F!==P||Qn?(typeof V=="function"&&(jf(a,o,V,c),P=a.memoizedState),(T=Qn||J1(a,o,T,c,F,P,E))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=P),m.props=c,m.state=P,m.context=E,c=T):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,Sf(n,a),E=a.memoizedProps,Y=ea(o,E),m.props=Y,V=a.pendingProps,F=m.context,P=o.contextType,T=Ha,typeof P=="object"&&P!==null&&(T=Pe(P)),M=o.getDerivedStateFromProps,(P=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==V||F!==T)&&tm(a,m,c,T),Qn=!1,F=a.memoizedState,m.state=F,Sl(a,c,m,d),pl();var U=a.memoizedState;E!==V||F!==U||Qn||n!==null&&n.dependencies!==null&&yh(n.dependencies)?(typeof M=="function"&&(jf(a,o,M,c),U=a.memoizedState),(Y=Qn||J1(a,o,Y,c,F,U,T)||n!==null&&n.dependencies!==null&&yh(n.dependencies))?(P||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,U,T),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,U,T)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=U),m.props=c,m.state=U,m.context=T,c=Y):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(a.flags|=1024),c=!1)}return m=c,Ph(n,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,n!==null&&c?(a.child=ir(a,n.child,null,d),a.child=ir(a,null,o,d)):Ae(n,a,o,d),a.memoizedState=m.state,n=a.child):n=Cn(n,a,d),n}function _m(n,a,o,c){return fl(),a.flags|=256,Ae(n,a,o,c),a.child}var Hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zf(n){return{baseLanes:n,cachePool:i1()}}function Kf(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=Ti),n}function mm(n,a,o){var c=a.pendingProps,d=!1,m=(a.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(me.current&2)!==0),E&&(d=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,n===null){if(Pt){if(d?es(a):is(),Pt){var M=ae,T;if(T=M){t:{for(T=M,M=tn;T.nodeType!==8;){if(!M){M=null;break t}if(T=Xi(T.nextSibling),T===null){M=null;break t}}M=T}M!==null?(a.memoizedState={dehydrated:M,treeContext:Zs!==null?{id:pn,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},T=ci(18,null,null,0),T.stateNode=M,T.return=a,a.child=T,je=a,ae=null,T=!0):T=!1}T||Ws(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Gd(M)?a.lanes=32:a.lanes=536870912,null;bn(a)}return M=c.children,c=c.fallback,d?(is(),d=a.mode,M=zh({mode:"hidden",children:M},d),c=Hs(c,d,o,null),M.return=a,c.return=a,M.sibling=c,a.child=M,d=a.child,d.memoizedState=Zf(o),d.childLanes=Kf(n,E,o),a.memoizedState=Hf,c):(es(a),Vf(a,M))}if(T=n.memoizedState,T!==null&&(M=T.dehydrated,M!==null)){if(m)a.flags&256?(es(a),a.flags&=-257,a=Wf(n,a,o)):a.memoizedState!==null?(is(),a.child=n.child,a.flags|=128,a=null):(is(),d=c.fallback,M=a.mode,c=zh({mode:"visible",children:c.children},M),d=Hs(d,M,o,null),d.flags|=2,c.return=a,d.return=a,c.sibling=d,a.child=c,ir(a,n.child,null,o),c=a.child,c.memoizedState=Zf(o),c.childLanes=Kf(n,E,o),a.memoizedState=Hf,a=d);else if(es(a),Gd(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var P=E.dgst;E=P,c=Error(s(419)),c.stack="",c.digest=E,dl({value:c,source:null,stack:null}),a=Wf(n,a,o)}else if(Me||gl(n,a,o,!1),E=(o&n.childLanes)!==0,Me||E){if(E=Qt,E!==null&&(c=o&-o,c=(c&42)!==0?1:Fi(c),c=(c&(E.suspendedLanes|o))!==0?0:c,c!==0&&c!==T.retryLane))throw T.retryLane=c,qa(n,c),mi(E,n,c),lm;M.data==="$?"||gd(),a=Wf(n,a,o)}else M.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=T.treeContext,ae=Xi(M.nextSibling),je=a,Pt=!0,Vs=null,tn=!1,n!==null&&(wi[bi++]=pn,wi[bi++]=Sn,wi[bi++]=Zs,pn=n.id,Sn=n.overflow,Zs=a),a=Vf(a,c.children),a.flags|=4096);return a}return d?(is(),d=c.fallback,M=a.mode,T=n.child,P=T.sibling,c=En(T,{mode:"hidden",children:c.children}),c.subtreeFlags=T.subtreeFlags&65011712,P!==null?d=En(P,d):(d=Hs(d,M,o,null),d.flags|=2),d.return=a,c.return=a,c.sibling=d,a.child=c,c=d,d=a.child,M=n.child.memoizedState,M===null?M=Zf(o):(T=M.cachePool,T!==null?(P=_e._currentValue,T=T.parent!==P?{parent:P,pool:P}:T):T=i1(),M={baseLanes:M.baseLanes|o,cachePool:T}),d.memoizedState=M,d.childLanes=Kf(n,E,o),a.memoizedState=Hf,c):(es(a),o=n.child,n=o.sibling,o=En(o,{mode:"visible",children:c.children}),o.return=a,o.sibling=null,n!==null&&(E=a.deletions,E===null?(a.deletions=[n],a.flags|=16):E.push(n)),a.child=o,a.memoizedState=null,o)}function Vf(n,a){return a=zh({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function zh(n,a){return n=ci(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Wf(n,a,o){return ir(a,n.child,null,o),n=Vf(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function ym(n,a,o){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a),gf(n.return,a,o)}function Qf(n,a,o,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(m.isBackwards=a,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=o,m.tailMode=d)}function vm(n,a,o){var c=a.pendingProps,d=c.revealOrder,m=c.tail;if(Ae(n,a,c.children,o),c=me.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ym(n,o,a);else if(n.tag===19)ym(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break t;for(;n.sibling===null;){if(n.return===null||n.return===a)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch($(me,c),d){case"forwards":for(o=a.child,d=null;o!==null;)n=o.alternate,n!==null&&Nh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=a.child,a.child=null):(d=o.sibling,o.sibling=null),Qf(a,!1,d,o,m);break;case"backwards":for(o=null,d=a.child,a.child=null;d!==null;){if(n=d.alternate,n!==null&&Nh(n)===null){a.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Qf(a,!0,o,null,m);break;case"together":Qf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Cn(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),ls|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(gl(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=En(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=En(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function $f(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&yh(n)))}function p4(n,a,o){switch(a.tag){case 3:Ot(a,a.stateNode.containerInfo),Wn(a,_e,n.memoizedState.cache),fl();break;case 27:case 5:Te(a);break;case 4:Ot(a,a.stateNode.containerInfo);break;case 10:Wn(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(es(a),a.flags|=128,null):(o&a.child.childLanes)!==0?mm(n,a,o):(es(a),n=Cn(n,a,o),n!==null?n.sibling:null);es(a);break;case 19:var d=(n.flags&128)!==0;if(c=(o&a.childLanes)!==0,c||(gl(n,a,o,!1),c=(o&a.childLanes)!==0),d){if(c)return vm(n,a,o);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(me,me.current),c)break;return null;case 22:case 23:return a.lanes=0,cm(n,a,o);case 24:Wn(a,_e,n.memoizedState.cache)}return Cn(n,a,o)}function Em(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)Me=!0;else{if(!$f(n,o)&&(a.flags&128)===0)return Me=!1,p4(n,a,o);Me=(n.flags&131072)!==0}else Me=!1,Pt&&(a.flags&1048576)!==0&&V_(a,mh,a.index);switch(a.lanes=0,a.tag){case 16:t:{n=a.pendingProps;var c=a.elementType,d=c._init;if(c=d(c._payload),a.type=c,typeof c=="function")lf(c)?(n=ea(c,n),a.tag=1,a=gm(null,a,c,n,o)):(a.tag=0,a=qf(null,a,c,n,o));else{if(c!=null){if(d=c.$$typeof,d===O){a.tag=11,a=om(null,a,c,n,o);break t}else if(d===j){a.tag=14,a=hm(null,a,c,n,o);break t}}throw a=lt(c)||c,Error(s(306,a,""))}}return a;case 0:return qf(n,a,a.type,a.pendingProps,o);case 1:return c=a.type,d=ea(c,a.pendingProps),gm(n,a,c,d,o);case 3:t:{if(Ot(a,a.stateNode.containerInfo),n===null)throw Error(s(387));c=a.pendingProps;var m=a.memoizedState;d=m.element,Sf(n,a),Sl(a,c,null,o);var E=a.memoizedState;if(c=E.cache,Wn(a,_e,c),c!==m.cache&&_f(a,[_e],o,!0),pl(),c=E.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=_m(n,a,c,o);break t}else if(c!==d){d=Mi(Error(s(424)),a),dl(d),a=_m(n,a,c,o);break t}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ae=Xi(n.firstChild),je=a,Pt=!0,Vs=null,tn=!0,o=Q1(a,null,c,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(fl(),c===d){a=Cn(n,a,o);break t}Ae(n,a,c,o)}a=a.child}return a;case 26:return Ph(n,a),n===null?(o=xy(a.type,null,a.pendingProps,null))?a.memoizedState=o:Pt||(o=a.type,n=a.pendingProps,c=Qh(ht.current).createElement(o),c[Wt]=a,c[Tt]=n,Ge(c,o,n),Se(c),a.stateNode=c):a.memoizedState=xy(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Te(a),n===null&&Pt&&(c=a.stateNode=py(a.type,a.pendingProps,ht.current),je=a,tn=!0,d=ae,cs(a.type)?(Ld=d,ae=Xi(c.firstChild)):ae=d),Ae(n,a,a.pendingProps.children,o),Ph(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&Pt&&((d=c=ae)&&(c=K4(c,a.type,a.pendingProps,tn),c!==null?(a.stateNode=c,je=a,ae=Xi(c.firstChild),tn=!1,d=!0):d=!1),d||Ws(a)),Te(a),d=a.type,m=a.pendingProps,E=n!==null?n.memoizedProps:null,c=m.children,Rd(d,m)?c=null:E!==null&&Rd(d,E)&&(a.flags|=32),a.memoizedState!==null&&(d=Tf(n,a,f4,null,null,o),Bl._currentValue=d),Ph(n,a),Ae(n,a,c,o),a.child;case 6:return n===null&&Pt&&((n=o=ae)&&(o=V4(o,a.pendingProps,tn),o!==null?(a.stateNode=o,je=a,ae=null,n=!0):n=!1),n||Ws(a)),null;case 13:return mm(n,a,o);case 4:return Ot(a,a.stateNode.containerInfo),c=a.pendingProps,n===null?a.child=ir(a,null,c,o):Ae(n,a,c,o),a.child;case 11:return om(n,a,a.type,a.pendingProps,o);case 7:return Ae(n,a,a.pendingProps,o),a.child;case 8:return Ae(n,a,a.pendingProps.children,o),a.child;case 12:return Ae(n,a,a.pendingProps.children,o),a.child;case 10:return c=a.pendingProps,Wn(a,a.type,c.value),Ae(n,a,c.children,o),a.child;case 9:return d=a.type._context,c=a.pendingProps.children,$s(a),d=Pe(d),c=c(d),a.flags|=1,Ae(n,a,c,o),a.child;case 14:return hm(n,a,a.type,a.pendingProps,o);case 15:return um(n,a,a.type,a.pendingProps,o);case 19:return vm(n,a,o);case 31:return c=a.pendingProps,o=a.mode,c={mode:c.mode,children:c.children},n===null?(o=zh(c,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=En(n.child,c),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return cm(n,a,o);case 24:return $s(a),c=Pe(_e),n===null?(d=vf(),d===null&&(d=Qt,m=mf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),a.memoizedState={parent:c,cache:d},pf(a),Wn(a,_e,d)):((n.lanes&o)!==0&&(Sf(n,a),Sl(a,null,null,o),pl()),d=n.memoizedState,m=a.memoizedState,d.parent!==c?(d={parent:c,cache:c},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Wn(a,_e,c)):(c=m.cache,Wn(a,_e,c),c!==d.cache&&_f(a,[_e],o,!0))),Ae(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Tn(n){n.flags|=4}function pm(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ry(a)){if(a=Ci.current,a!==null&&((Nt&4194048)===Nt?en!==null:(Nt&62914560)!==Nt&&(Nt&536870912)===0||a!==en))throw vl=Ef,n1;n.flags|=8192}}function Fh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Kn():536870912,n.lanes|=a,rr|=a)}function Rl(n,a){if(!Pt)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ie(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(a)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=o,a}function S4(n,a,o){var c=a.pendingProps;switch(cf(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(a),null;case 1:return ie(a),null;case 3:return o=a.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),xn(_e),fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(cl(a)?Tn(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$_())),ie(a),null;case 26:return o=a.memoizedState,n===null?(Tn(a),o!==null?(ie(a),pm(a,o)):(ie(a),a.flags&=-16777217)):o?o!==n.memoizedState?(Tn(a),ie(a),pm(a,o)):(ie(a),a.flags&=-16777217):(n.memoizedProps!==c&&Tn(a),ie(a),a.flags&=-16777217),null;case 27:gn(a),o=ht.current;var d=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==c&&Tn(a);else{if(!c){if(a.stateNode===null)throw Error(s(166));return ie(a),null}n=rt.current,cl(a)?W_(a):(n=py(d,c,o),a.stateNode=n,Tn(a))}return ie(a),null;case 5:if(gn(a),o=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&Tn(a);else{if(!c){if(a.stateNode===null)throw Error(s(166));return ie(a),null}if(n=rt.current,cl(a))W_(a);else{switch(d=Qh(ht.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(o,{is:c.is}):d.createElement(o)}}n[Wt]=a,n[Tt]=c;t:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break t;for(;d.sibling===null;){if(d.return===null||d.return===a)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=n;t:switch(Ge(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Tn(a)}}return ie(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==c&&Tn(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(s(166));if(n=ht.current,cl(a)){if(n=a.stateNode,o=a.memoizedProps,c=null,d=je,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[Wt]=a,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||dy(n.nodeValue,o)),n||Ws(a)}else n=Qh(n).createTextNode(c),n[Wt]=a,a.stateNode=n}return ie(a),null;case 13:if(c=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=cl(a),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Wt]=a}else fl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ie(a),d=!1}else d=$_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(bn(a),a):(bn(a),null)}if(bn(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=a.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==d&&(c.flags|=2048)}return o!==n&&o&&(a.child.flags|=8192),Fh(a,a.updateQueue),ie(a),null;case 4:return fe(),n===null&&xd(a.stateNode.containerInfo),ie(a),null;case 10:return xn(a.type),ie(a),null;case 19:if(z(me),d=a.memoizedState,d===null)return ie(a),null;if(c=(a.flags&128)!==0,m=d.rendering,m===null)if(c)Rl(d,!1);else{if(re!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(m=Nh(n),m!==null){for(a.flags|=128,Rl(d,!1),n=m.updateQueue,a.updateQueue=n,Fh(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)K_(o,n),o=o.sibling;return $(me,me.current&1|2),a.child}n=n.sibling}d.tail!==null&&Re()>Xh&&(a.flags|=128,c=!0,Rl(d,!1),a.lanes=4194304)}else{if(!c)if(n=Nh(m),n!==null){if(a.flags|=128,c=!0,n=n.updateQueue,a.updateQueue=n,Fh(a,n),Rl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Pt)return ie(a),null}else 2*Re()-d.renderingStartTime>Xh&&o!==536870912&&(a.flags|=128,c=!0,Rl(d,!1),a.lanes=4194304);d.isBackwards?(m.sibling=a.child,a.child=m):(n=d.last,n!==null?n.sibling=m:a.child=m,d.last=m)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Re(),a.sibling=null,n=me.current,$(me,c?n&1|2:n&1),a):(ie(a),null);case 22:case 23:return bn(a),bf(),c=a.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(o&536870912)!==0&&(a.flags&128)===0&&(ie(a),a.subtreeFlags&6&&(a.flags|=8192)):ie(a),o=a.updateQueue,o!==null&&Fh(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==o&&(a.flags|=2048),n!==null&&z(Js),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),xn(_e),ie(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function M4(n,a){switch(cf(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return xn(_e),fe(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return gn(a),null;case 13:if(bn(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));fl()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return z(me),null;case 4:return fe(),null;case 10:return xn(a.type),null;case 22:case 23:return bn(a),bf(),n!==null&&z(Js),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return xn(_e),null;case 25:return null;default:return null}}function Sm(n,a){switch(cf(a),a.tag){case 3:xn(_e),fe();break;case 26:case 27:case 5:gn(a);break;case 4:fe();break;case 13:bn(a);break;case 19:z(me);break;case 10:xn(a.type);break;case 22:case 23:bn(a),bf(),n!==null&&z(Js);break;case 24:xn(_e)}}function Al(n,a){try{var o=a.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&n)===n){c=void 0;var m=o.create,E=o.inst;c=m(),E.destroy=c}o=o.next}while(o!==d)}}catch(M){Vt(a,a.return,M)}}function ns(n,a,o){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&n)===n){var E=c.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,d=a;var T=o,P=M;try{P()}catch(Y){Vt(d,T,Y)}}}c=c.next}while(c!==m)}}catch(Y){Vt(a,a.return,Y)}}function Mm(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{h1(a,o)}catch(c){Vt(n,n.return,c)}}}function xm(n,a,o){o.props=ea(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Vt(n,a,c)}}function Ol(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(d){Vt(n,a,d)}}function nn(n,a){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){Vt(n,a,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Vt(n,a,d)}else o.current=null}function wm(n){var a=n.type,o=n.memoizedProps,c=n.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){Vt(n,n.return,d)}}function Jf(n,a,o){try{var c=n.stateNode;B4(c,n.type,o,a),c[Tt]=a}catch(d){Vt(n,n.return,d)}}function bm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cs(n.type)||n.tag===4}function td(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||bm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,a,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Wh));else if(c!==4&&(c===27&&cs(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(ed(n,a,o),n=n.sibling;n!==null;)ed(n,a,o),n=n.sibling}function Uh(n,a,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(c!==4&&(c===27&&cs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Uh(n,a,o),n=n.sibling;n!==null;)Uh(n,a,o),n=n.sibling}function Cm(n){var a=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Ge(a,c,o),a[Wt]=n,a[Tt]=o}catch(m){Vt(n,n.return,m)}}var Rn=!1,ue=!1,id=!1,Tm=typeof WeakSet=="function"?WeakSet:Set,xe=null;function x4(n,a){if(n=n.containerInfo,Cd=nu,n=F_(n),Jc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var E=0,M=-1,T=-1,P=0,Y=0,V=n,F=null;e:for(;;){for(var U;V!==o||d!==0&&V.nodeType!==3||(M=E+d),V!==m||c!==0&&V.nodeType!==3||(T=E+c),V.nodeType===3&&(E+=V.nodeValue.length),(U=V.firstChild)!==null;)F=V,V=U;for(;;){if(V===n)break e;if(F===o&&++P===d&&(M=E),F===m&&++Y===c&&(T=E),(U=V.nextSibling)!==null)break;V=F,F=V.parentNode}V=U}o=M===-1||T===-1?null:{start:M,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(Td={focusedElem:n,selectionRange:o},nu=!1,xe=a;xe!==null;)if(a=xe,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,xe=n;else for(;xe!==null;){switch(a=xe,m=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=a,d=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var yt=ea(o.type,d,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(yt,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(_t){Vt(o,o.return,_t)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)Od(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Od(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,xe=n;break}xe=a.return}}function Rm(n,a,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ss(n,o),c&4&&Al(5,o);break;case 1:if(ss(n,o),c&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(E){Vt(o,o.return,E)}else{var d=ea(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(d,a,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Vt(o,o.return,E)}}c&64&&Mm(o),c&512&&Ol(o,o.return);break;case 3:if(ss(n,o),c&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{h1(n,a)}catch(E){Vt(o,o.return,E)}}break;case 27:a===null&&c&4&&Cm(o);case 26:case 5:ss(n,o),a===null&&c&4&&wm(o),c&512&&Ol(o,o.return);break;case 12:ss(n,o);break;case 13:ss(n,o),c&4&&Gm(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=L4.bind(null,o),W4(n,o))));break;case 22:if(c=o.memoizedState!==null||Rn,!c){a=a!==null&&a.memoizedState!==null||ue,d=Rn;var m=ue;Rn=c,(ue=a)&&!m?as(n,o,(o.subtreeFlags&8772)!==0):ss(n,o),Rn=d,ue=m}break;case 30:break;default:ss(n,o)}}function Am(n){var a=n.alternate;a!==null&&(n.alternate=null,Am(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Dc(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ee=null,Qe=!1;function An(n,a,o){for(o=o.child;o!==null;)Om(n,a,o),o=o.sibling}function Om(n,a,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Qi,o)}catch{}switch(o.tag){case 26:ue||nn(o,a),An(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ue||nn(o,a);var c=ee,d=Qe;cs(o.type)&&(ee=o.stateNode,Qe=!1),An(n,a,o),Ul(o.stateNode),ee=c,Qe=d;break;case 5:ue||nn(o,a);case 6:if(c=ee,d=Qe,ee=null,An(n,a,o),ee=c,Qe=d,ee!==null)if(Qe)try{(ee.nodeType===9?ee.body:ee.nodeName==="HTML"?ee.ownerDocument.body:ee).removeChild(o.stateNode)}catch(m){Vt(o,a,m)}else try{ee.removeChild(o.stateNode)}catch(m){Vt(o,a,m)}break;case 18:ee!==null&&(Qe?(n=ee,vy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Zl(n)):vy(ee,o.stateNode));break;case 4:c=ee,d=Qe,ee=o.stateNode.containerInfo,Qe=!0,An(n,a,o),ee=c,Qe=d;break;case 0:case 11:case 14:case 15:ue||ns(2,o,a),ue||ns(4,o,a),An(n,a,o);break;case 1:ue||(nn(o,a),c=o.stateNode,typeof c.componentWillUnmount=="function"&&xm(o,a,c)),An(n,a,o);break;case 21:An(n,a,o);break;case 22:ue=(c=ue)||o.memoizedState!==null,An(n,a,o),ue=c;break;default:An(n,a,o)}}function Gm(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Zl(n)}catch(o){Vt(a,a.return,o)}}function w4(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Tm),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Tm),a;default:throw Error(s(435,n.tag))}}function nd(n,a){var o=w4(n);a.forEach(function(c){var d=N4.bind(null,n,c);o.has(c)||(o.add(c),c.then(d,d))})}function fi(n,a){var o=a.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],m=n,E=a,M=E;t:for(;M!==null;){switch(M.tag){case 27:if(cs(M.type)){ee=M.stateNode,Qe=!1;break t}break;case 5:ee=M.stateNode,Qe=!1;break t;case 3:case 4:ee=M.stateNode.containerInfo,Qe=!0;break t}M=M.return}if(ee===null)throw Error(s(160));Om(m,E,d),ee=null,Qe=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Lm(a,n),a=a.sibling}var ki=null;function Lm(n,a){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fi(a,n),di(n),c&4&&(ns(3,n,n.return),Al(3,n),ns(5,n,n.return));break;case 1:fi(a,n),di(n),c&512&&(ue||o===null||nn(o,o.return)),c&64&&Rn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=ki;if(fi(a,n),di(n),c&512&&(ue||o===null||nn(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){t:{c=n.type,o=n.memoizedProps,d=d.ownerDocument||d;e:switch(c){case"title":m=d.getElementsByTagName("title")[0],(!m||m[tl]||m[Wt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(c),d.head.insertBefore(m,d.querySelector("head > title"))),Ge(m,c,o),m[Wt]=n,Se(m),c=m;break t;case"link":var E=Cy("link","href",d).get(c+(o.href||""));if(E){for(var M=0;M<E.length;M++)if(m=E[M],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(M,1);break e}}m=d.createElement(c),Ge(m,c,o),d.head.appendChild(m);break;case"meta":if(E=Cy("meta","content",d).get(c+(o.content||""))){for(M=0;M<E.length;M++)if(m=E[M],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(M,1);break e}}m=d.createElement(c),Ge(m,c,o),d.head.appendChild(m);break;default:throw Error(s(468,c))}m[Wt]=n,Se(m),c=m}n.stateNode=c}else Ty(d,n.type,n.stateNode);else n.stateNode=by(d,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?Ty(d,n.type,n.stateNode):by(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Jf(n,n.memoizedProps,o.memoizedProps)}break;case 27:fi(a,n),di(n),c&512&&(ue||o===null||nn(o,o.return)),o!==null&&c&4&&Jf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(fi(a,n),di(n),c&512&&(ue||o===null||nn(o,o.return)),n.flags&32){d=n.stateNode;try{Fa(d,"")}catch(U){Vt(n,n.return,U)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,Jf(n,d,o!==null?o.memoizedProps:d)),c&1024&&(id=!0);break;case 6:if(fi(a,n),di(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(U){Vt(n,n.return,U)}}break;case 3:if(tu=null,d=ki,ki=$h(a.containerInfo),fi(a,n),ki=d,di(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Zl(a.containerInfo)}catch(U){Vt(n,n.return,U)}id&&(id=!1,Nm(n));break;case 4:c=ki,ki=$h(n.stateNode.containerInfo),fi(a,n),di(n),ki=c;break;case 12:fi(a,n),di(n);break;case 13:fi(a,n),di(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hd=Re()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,nd(n,c)));break;case 22:d=n.memoizedState!==null;var T=o!==null&&o.memoizedState!==null,P=Rn,Y=ue;if(Rn=P||d,ue=Y||T,fi(a,n),ue=Y,Rn=P,di(n),c&8192)t:for(a=n.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(o===null||T||Rn||ue||ia(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){T=o=a;try{if(m=T.stateNode,d)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=T.stateNode;var V=T.memoizedProps.style,F=V!=null&&V.hasOwnProperty("display")?V.display:null;M.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(U){Vt(T,T.return,U)}}}else if(a.tag===6){if(o===null){T=a;try{T.stateNode.nodeValue=d?"":T.memoizedProps}catch(U){Vt(T,T.return,U)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break t;for(;a.sibling===null;){if(a.return===null||a.return===n)break t;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,nd(n,o))));break;case 19:fi(a,n),di(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,nd(n,c)));break;case 30:break;case 21:break;default:fi(a,n),di(n)}}function di(n){var a=n.flags;if(a&2){try{for(var o,c=n.return;c!==null;){if(bm(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var d=o.stateNode,m=td(n);Uh(n,m,d);break;case 5:var E=o.stateNode;o.flags&32&&(Fa(E,""),o.flags&=-33);var M=td(n);Uh(n,M,E);break;case 3:case 4:var T=o.stateNode.containerInfo,P=td(n);ed(n,P,T);break;default:throw Error(s(161))}}catch(Y){Vt(n,n.return,Y)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Nm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Nm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ss(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rm(n,a.alternate,a),a=a.sibling}function ia(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:ns(4,a,a.return),ia(a);break;case 1:nn(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&xm(a,a.return,o),ia(a);break;case 27:Ul(a.stateNode);case 26:case 5:nn(a,a.return),ia(a);break;case 22:a.memoizedState===null&&ia(a);break;case 30:ia(a);break;default:ia(a)}n=n.sibling}}function as(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,d=n,m=a,E=m.flags;switch(m.tag){case 0:case 11:case 15:as(d,m,o),Al(4,m);break;case 1:if(as(d,m,o),c=m,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(P){Vt(c,c.return,P)}if(c=m,d=c.updateQueue,d!==null){var M=c.stateNode;try{var T=d.shared.hiddenCallbacks;if(T!==null)for(d.shared.hiddenCallbacks=null,d=0;d<T.length;d++)o1(T[d],M)}catch(P){Vt(c,c.return,P)}}o&&E&64&&Mm(m),Ol(m,m.return);break;case 27:Cm(m);case 26:case 5:as(d,m,o),o&&c===null&&E&4&&wm(m),Ol(m,m.return);break;case 12:as(d,m,o);break;case 13:as(d,m,o),o&&E&4&&Gm(d,m);break;case 22:m.memoizedState===null&&as(d,m,o),Ol(m,m.return);break;case 30:break;default:as(d,m,o)}a=a.sibling}}function sd(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&_l(o))}function ad(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&_l(n))}function sn(n,a,o,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dm(n,a,o,c),a=a.sibling}function Dm(n,a,o,c){var d=a.flags;switch(a.tag){case 0:case 11:case 15:sn(n,a,o,c),d&2048&&Al(9,a);break;case 1:sn(n,a,o,c);break;case 3:sn(n,a,o,c),d&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&_l(n)));break;case 12:if(d&2048){sn(n,a,o,c),n=a.stateNode;try{var m=a.memoizedProps,E=m.id,M=m.onPostCommit;typeof M=="function"&&M(E,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(T){Vt(a,a.return,T)}}else sn(n,a,o,c);break;case 13:sn(n,a,o,c);break;case 23:break;case 22:m=a.stateNode,E=a.alternate,a.memoizedState!==null?m._visibility&2?sn(n,a,o,c):Gl(n,a):m._visibility&2?sn(n,a,o,c):(m._visibility|=2,nr(n,a,o,c,(a.subtreeFlags&10256)!==0)),d&2048&&sd(E,a);break;case 24:sn(n,a,o,c),d&2048&&ad(a.alternate,a);break;default:sn(n,a,o,c)}}function nr(n,a,o,c,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var m=n,E=a,M=o,T=c,P=E.flags;switch(E.tag){case 0:case 11:case 15:nr(m,E,M,T,d),Al(8,E);break;case 23:break;case 22:var Y=E.stateNode;E.memoizedState!==null?Y._visibility&2?nr(m,E,M,T,d):Gl(m,E):(Y._visibility|=2,nr(m,E,M,T,d)),d&&P&2048&&sd(E.alternate,E);break;case 24:nr(m,E,M,T,d),d&&P&2048&&ad(E.alternate,E);break;default:nr(m,E,M,T,d)}a=a.sibling}}function Gl(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,c=a,d=c.flags;switch(c.tag){case 22:Gl(o,c),d&2048&&sd(c.alternate,c);break;case 24:Gl(o,c),d&2048&&ad(c.alternate,c);break;default:Gl(o,c)}a=a.sibling}}var Ll=8192;function sr(n){if(n.subtreeFlags&Ll)for(n=n.child;n!==null;)Im(n),n=n.sibling}function Im(n){switch(n.tag){case 26:sr(n),n.flags&Ll&&n.memoizedState!==null&&hS(ki,n.memoizedState,n.memoizedProps);break;case 5:sr(n);break;case 3:case 4:var a=ki;ki=$h(n.stateNode.containerInfo),sr(n),ki=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=Ll,Ll=16777216,sr(n),Ll=a):sr(n));break;default:sr(n)}}function Pm(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Nl(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];xe=c,Fm(c,n)}Pm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zm(n),n=n.sibling}function zm(n){switch(n.tag){case 0:case 11:case 15:Nl(n),n.flags&2048&&ns(9,n,n.return);break;case 3:Nl(n);break;case 12:Nl(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,kh(n)):Nl(n);break;default:Nl(n)}}function kh(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];xe=c,Fm(c,n)}Pm(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:ns(8,a,a.return),kh(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,kh(a));break;default:kh(a)}n=n.sibling}}function Fm(n,a){for(;xe!==null;){var o=xe;switch(o.tag){case 0:case 11:case 15:ns(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_l(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,xe=c;else t:for(o=n;xe!==null;){c=xe;var d=c.sibling,m=c.return;if(Am(c),c===o){xe=null;break t}if(d!==null){d.return=m,xe=d;break t}xe=m}}}var b4={getCacheForType:function(n){var a=Pe(_e),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o}},C4=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Qt=null,Rt=null,Nt=0,Yt=0,gi=null,rs=!1,ar=!1,rd=!1,On=0,re=0,ls=0,na=0,ld=0,Ti=0,rr=0,Dl=null,$e=null,od=!1,hd=0,Xh=1/0,jh=null,os=null,Oe=0,hs=null,lr=null,or=0,ud=0,cd=null,Um=null,Il=0,fd=null;function _i(){if((Bt&2)!==0&&Nt!==0)return Nt&-Nt;if(D.T!==null){var n=Va;return n!==0?n:Ed()}return oi()}function km(){Ti===0&&(Ti=(Nt&536870912)===0||Pt?Ga():536870912);var n=Ci.current;return n!==null&&(n.flags|=32),Ti}function mi(n,a,o){(n===Qt&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)&&(hr(n,0),us(n,Nt,Ti,!1)),zi(n,o),((Bt&2)===0||n!==Qt)&&(n===Qt&&((Bt&2)===0&&(na|=o),re===4&&us(n,Nt,Ti,!1)),an(n))}function Xm(n,a,o){if((Bt&6)!==0)throw Error(s(327));var c=!o&&(a&124)===0&&(a&n.expiredLanes)===0||Zn(n,a),d=c?A4(n,a):_d(n,a,!0),m=c;do{if(d===0){ar&&!c&&us(n,a,0,!1);break}else{if(o=n.current.alternate,m&&!T4(o)){d=_d(n,a,!1),m=!1;continue}if(d===2){if(m=a,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var M=n;d=Dl;var T=M.current.memoizedState.isDehydrated;if(T&&(hr(M,E).flags|=256),E=_d(M,E,!1),E!==2){if(rd&&!T){M.errorRecoveryDisabledLanes|=m,na|=m,d=4;break t}m=$e,$e=d,m!==null&&($e===null?$e=m:$e.push.apply($e,m))}d=E}if(m=!1,d!==2)continue}}if(d===1){hr(n,0),us(n,a,0,!0);break}t:{switch(c=n,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:us(c,a,Ti,!rs);break t;case 2:$e=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(d=hd+300-Re(),10<d)){if(us(c,a,Ti,!rs),Hn(c,0,!0)!==0)break t;c.timeoutHandle=my(jm.bind(null,c,o,$e,jh,od,a,Ti,na,rr,rs,m,2,-0,0),d);break t}jm(c,o,$e,jh,od,a,Ti,na,rr,rs,m,0,-0,0)}}break}while(!0);an(n)}function jm(n,a,o,c,d,m,E,M,T,P,Y,V,F,U){if(n.timeoutHandle=-1,V=a.subtreeFlags,(V&8192||(V&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:oS},Im(a),V=uS(),V!==null)){n.cancelPendingCommit=V(Vm.bind(null,n,a,m,o,c,d,E,M,T,Y,1,F,U)),us(n,m,E,!P);return}Vm(n,a,m,o,c,d,E,M,T)}function T4(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],m=d.getSnapshot;d=d.value;try{if(!ui(m(),d))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function us(n,a,o,c){a&=~ld,a&=~na,n.suspendedLanes|=a,n.pingedLanes&=~a,c&&(n.warmLanes|=a),c=n.expirationTimes;for(var d=a;0<d;){var m=31-De(d),E=1<<m;c[m]=-1,d&=~E}o!==0&&Jr(n,o,a)}function Bh(){return(Bt&6)===0?(Pl(0),!1):!0}function dd(){if(Rt!==null){if(Yt===0)var n=Rt.return;else n=Rt,Mn=Qs=null,Of(n),er=null,Cl=0,n=Rt;for(;n!==null;)Sm(n.alternate,n),n=n.return;Rt=null}}function hr(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,q4(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),dd(),Qt=n,Rt=o=En(n.current,null),Nt=a,Yt=0,gi=null,rs=!1,ar=Zn(n,a),rd=!1,rr=Ti=ld=na=ls=re=0,$e=Dl=null,od=!1,(a&8)!==0&&(a|=a&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=a;0<c;){var d=31-De(c),m=1<<d;a|=n[d],c&=~m}return On=a,ch(),o}function Bm(n,a){wt=null,D.H=Oh,a===yl||a===ph?(a=r1(),Yt=3):a===n1?(a=r1(),Yt=4):Yt=a===lm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,gi=a,Rt===null&&(re=1,Ih(n,Mi(a,n.current)))}function Ym(){var n=D.H;return D.H=Oh,n===null?Oh:n}function qm(){var n=D.A;return D.A=b4,n}function gd(){re=4,rs||(Nt&4194048)!==Nt&&Ci.current!==null||(ar=!0),(ls&134217727)===0&&(na&134217727)===0||Qt===null||us(Qt,Nt,Ti,!1)}function _d(n,a,o){var c=Bt;Bt|=2;var d=Ym(),m=qm();(Qt!==n||Nt!==a)&&(jh=null,hr(n,a)),a=!1;var E=re;t:do try{if(Yt!==0&&Rt!==null){var M=Rt,T=gi;switch(Yt){case 8:dd(),E=6;break t;case 3:case 2:case 9:case 6:Ci.current===null&&(a=!0);var P=Yt;if(Yt=0,gi=null,ur(n,M,T,P),o&&ar){E=0;break t}break;default:P=Yt,Yt=0,gi=null,ur(n,M,T,P)}}R4(),E=re;break}catch(Y){Bm(n,Y)}while(!0);return a&&n.shellSuspendCounter++,Mn=Qs=null,Bt=c,D.H=d,D.A=m,Rt===null&&(Qt=null,Nt=0,ch()),E}function R4(){for(;Rt!==null;)Hm(Rt)}function A4(n,a){var o=Bt;Bt|=2;var c=Ym(),d=qm();Qt!==n||Nt!==a?(jh=null,Xh=Re()+500,hr(n,a)):ar=Zn(n,a);t:do try{if(Yt!==0&&Rt!==null){a=Rt;var m=gi;e:switch(Yt){case 1:Yt=0,gi=null,ur(n,a,m,1);break;case 2:case 9:if(s1(m)){Yt=0,gi=null,Zm(a);break}a=function(){Yt!==2&&Yt!==9||Qt!==n||(Yt=7),an(n)},m.then(a,a);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:s1(m)?(Yt=0,gi=null,Zm(a)):(Yt=0,gi=null,ur(n,a,m,7));break;case 5:var E=null;switch(Rt.tag){case 26:E=Rt.memoizedState;case 5:case 27:var M=Rt;if(!E||Ry(E)){Yt=0,gi=null;var T=M.sibling;if(T!==null)Rt=T;else{var P=M.return;P!==null?(Rt=P,Yh(P)):Rt=null}break e}}Yt=0,gi=null,ur(n,a,m,5);break;case 6:Yt=0,gi=null,ur(n,a,m,6);break;case 8:dd(),re=6;break t;default:throw Error(s(462))}}O4();break}catch(Y){Bm(n,Y)}while(!0);return Mn=Qs=null,D.H=c,D.A=d,Bt=o,Rt!==null?0:(Qt=null,Nt=0,ch(),re)}function O4(){for(;Rt!==null&&!Ze();)Hm(Rt)}function Hm(n){var a=Em(n.alternate,n,On);n.memoizedProps=n.pendingProps,a===null?Yh(n):Rt=a}function Zm(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=dm(o,a,a.pendingProps,a.type,void 0,Nt);break;case 11:a=dm(o,a,a.pendingProps,a.type.render,a.ref,Nt);break;case 5:Of(a);default:Sm(o,a),a=Rt=K_(a,On),a=Em(o,a,On)}n.memoizedProps=n.pendingProps,a===null?Yh(n):Rt=a}function ur(n,a,o,c){Mn=Qs=null,Of(a),er=null,Cl=0;var d=a.return;try{if(E4(n,d,a,o,Nt)){re=1,Ih(n,Mi(o,n.current)),Rt=null;return}}catch(m){if(d!==null)throw Rt=d,m;re=1,Ih(n,Mi(o,n.current)),Rt=null;return}a.flags&32768?(Pt||c===1?n=!0:ar||(Nt&536870912)!==0?n=!1:(rs=n=!0,(c===2||c===9||c===3||c===6)&&(c=Ci.current,c!==null&&c.tag===13&&(c.flags|=16384))),Km(a,n)):Yh(a)}function Yh(n){var a=n;do{if((a.flags&32768)!==0){Km(a,rs);return}n=a.return;var o=S4(a.alternate,a,On);if(o!==null){Rt=o;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=n}while(a!==null);re===0&&(re=5)}function Km(n,a){do{var o=M4(n.alternate,n);if(o!==null){o.flags&=32767,Rt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Rt=n;return}Rt=n=o}while(n!==null);re=6,Rt=null}function Vm(n,a,o,c,d,m,E,M,T){n.cancelPendingCommit=null;do qh();while(Oe!==0);if((Bt&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(m=a.lanes|a.childLanes,m|=af,Jo(n,o,m,E,M,T),n===Qt&&(Rt=Qt=null,Nt=0),lr=a,hs=n,or=o,ud=m,cd=d,Um=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,D4(Pi,function(){return ty(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=D.T,D.T=null,d=K.p,K.p=2,E=Bt,Bt|=4;try{x4(n,a,o)}finally{Bt=E,K.p=d,D.T=c}}Oe=1,Wm(),Qm(),$m()}}function Wm(){if(Oe===1){Oe=0;var n=hs,a=lr,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var c=K.p;K.p=2;var d=Bt;Bt|=4;try{Lm(a,n);var m=Td,E=F_(n.containerInfo),M=m.focusedElem,T=m.selectionRange;if(E!==M&&M&&M.ownerDocument&&z_(M.ownerDocument.documentElement,M)){if(T!==null&&Jc(M)){var P=T.start,Y=T.end;if(Y===void 0&&(Y=P),"selectionStart"in M)M.selectionStart=P,M.selectionEnd=Math.min(Y,M.value.length);else{var V=M.ownerDocument||document,F=V&&V.defaultView||window;if(F.getSelection){var U=F.getSelection(),yt=M.textContent.length,_t=Math.min(T.start,yt),Kt=T.end===void 0?_t:Math.min(T.end,yt);!U.extend&&_t>Kt&&(E=Kt,Kt=_t,_t=E);var N=P_(M,_t),G=P_(M,Kt);if(N&&G&&(U.rangeCount!==1||U.anchorNode!==N.node||U.anchorOffset!==N.offset||U.focusNode!==G.node||U.focusOffset!==G.offset)){var I=V.createRange();I.setStart(N.node,N.offset),U.removeAllRanges(),_t>Kt?(U.addRange(I),U.extend(G.node,G.offset)):(I.setEnd(G.node,G.offset),U.addRange(I))}}}}for(V=[],U=M;U=U.parentNode;)U.nodeType===1&&V.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<V.length;M++){var H=V[M];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}nu=!!Cd,Td=Cd=null}finally{Bt=d,K.p=c,D.T=o}}n.current=a,Oe=2}}function Qm(){if(Oe===2){Oe=0;var n=hs,a=lr,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var c=K.p;K.p=2;var d=Bt;Bt|=4;try{Rm(n,a.alternate,a)}finally{Bt=d,K.p=c,D.T=o}}Oe=3}}function $m(){if(Oe===4||Oe===3){Oe=0,Ei();var n=hs,a=lr,o=or,c=Um;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Oe=5:(Oe=0,lr=hs=null,Jm(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(os=null),Ie(o),a=a.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Qi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=D.T,d=K.p,K.p=2,D.T=null;try{for(var m=n.onRecoverableError,E=0;E<c.length;E++){var M=c[E];m(M.value,{componentStack:M.stack})}}finally{D.T=a,K.p=d}}(or&3)!==0&&qh(),an(n),d=n.pendingLanes,(o&4194090)!==0&&(d&42)!==0?n===fd?Il++:(Il=0,fd=n):Il=0,Pl(0)}}function Jm(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,_l(a)))}function qh(n){return Wm(),Qm(),$m(),ty()}function ty(){if(Oe!==5)return!1;var n=hs,a=ud;ud=0;var o=Ie(or),c=D.T,d=K.p;try{K.p=32>o?32:o,D.T=null,o=cd,cd=null;var m=hs,E=or;if(Oe=0,lr=hs=null,or=0,(Bt&6)!==0)throw Error(s(331));var M=Bt;if(Bt|=4,zm(m.current),Dm(m,m.current,E,o),Bt=M,Pl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Qi,m)}catch{}return!0}finally{K.p=d,D.T=c,Jm(n,a)}}function ey(n,a,o){a=Mi(o,a),a=Yf(n.stateNode,a,2),n=Jn(n,a,2),n!==null&&(zi(n,2),an(n))}function Vt(n,a,o){if(n.tag===3)ey(n,n,o);else for(;a!==null;){if(a.tag===3){ey(a,n,o);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(os===null||!os.has(c))){n=Mi(o,n),o=am(2),c=Jn(a,o,2),c!==null&&(rm(o,c,a,n),zi(c,2),an(c));break}}a=a.return}}function md(n,a,o){var c=n.pingCache;if(c===null){c=n.pingCache=new C4;var d=new Set;c.set(a,d)}else d=c.get(a),d===void 0&&(d=new Set,c.set(a,d));d.has(o)||(rd=!0,d.add(o),n=G4.bind(null,n,a,o),a.then(n,n))}function G4(n,a,o){var c=n.pingCache;c!==null&&c.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Qt===n&&(Nt&o)===o&&(re===4||re===3&&(Nt&62914560)===Nt&&300>Re()-hd?(Bt&2)===0&&hr(n,0):ld|=o,rr===Nt&&(rr=0)),an(n)}function iy(n,a){a===0&&(a=Kn()),n=qa(n,a),n!==null&&(zi(n,a),an(n))}function L4(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),iy(n,o)}function N4(n,a){var o=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(a),iy(n,o)}function D4(n,a){return _n(n,a)}var Hh=null,cr=null,yd=!1,Zh=!1,vd=!1,sa=0;function an(n){n!==cr&&n.next===null&&(cr===null?Hh=cr=n:cr=cr.next=n),Zh=!0,yd||(yd=!0,P4())}function Pl(n,a){if(!vd&&Zh){vd=!0;do for(var o=!1,c=Hh;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var m=0;else{var E=c.suspendedLanes,M=c.pingedLanes;m=(1<<31-De(42|n)+1)-1,m&=d&~(E&~M),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,ry(c,m))}else m=Nt,m=Hn(c,c===Qt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Zn(c,m)||(o=!0,ry(c,m));c=c.next}while(o);vd=!1}}function I4(){ny()}function ny(){Zh=yd=!1;var n=0;sa!==0&&(Y4()&&(n=sa),sa=0);for(var a=Re(),o=null,c=Hh;c!==null;){var d=c.next,m=sy(c,a);m===0?(c.next=null,o===null?Hh=d:o.next=d,d===null&&(cr=o)):(o=c,(n!==0||(m&3)!==0)&&(Zh=!0)),c=d}Pl(n)}function sy(n,a){for(var o=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-De(m),M=1<<E,T=d[E];T===-1?((M&o)===0||(M&c)!==0)&&(d[E]=Lc(M,a)):T<=a&&(n.expiredLanes|=M),m&=~M}if(a=Qt,o=Nt,o=Hn(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===a&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ii(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Zn(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(c!==null&&Ii(c),Ie(o)){case 2:case 8:o=Wi;break;case 32:o=Pi;break;case 268435456:o=oe;break;default:o=Pi}return c=ay.bind(null,n),o=_n(o,c),n.callbackPriority=a,n.callbackNode=o,a}return c!==null&&c!==null&&Ii(c),n.callbackPriority=2,n.callbackNode=null,2}function ay(n,a){if(Oe!==0&&Oe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(qh()&&n.callbackNode!==o)return null;var c=Nt;return c=Hn(n,n===Qt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Xm(n,c,a),sy(n,Re()),n.callbackNode!=null&&n.callbackNode===o?ay.bind(null,n):null)}function ry(n,a){if(qh())return null;Xm(n,a,!0)}function P4(){H4(function(){(Bt&6)!==0?_n(Yn,I4):ny()})}function Ed(){return sa===0&&(sa=Ga()),sa}function ly(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:sh(""+n)}function oy(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function z4(n,a,o,c,d){if(a==="submit"&&o&&o.stateNode===d){var m=ly((d[Tt]||null).action),E=c.submitter;E&&(a=(a=E[Tt]||null)?ly(a.formAction):E.getAttribute("formAction"),a!==null&&(m=a,E=null));var M=new oh("action","action",null,c,d);n.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(sa!==0){var T=E?oy(d,E):new FormData(d);Uf(o,{pending:!0,data:T,method:d.method,action:m},null,T)}}else typeof m=="function"&&(M.preventDefault(),T=E?oy(d,E):new FormData(d),Uf(o,{pending:!0,data:T,method:d.method,action:m},m,T))},currentTarget:d}]})}}for(var pd=0;pd<sf.length;pd++){var Sd=sf[pd],F4=Sd.toLowerCase(),U4=Sd[0].toUpperCase()+Sd.slice(1);Ui(F4,"on"+U4)}Ui(X_,"onAnimationEnd"),Ui(j_,"onAnimationIteration"),Ui(B_,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(i4,"onTransitionRun"),Ui(n4,"onTransitionStart"),Ui(s4,"onTransitionCancel"),Ui(Y_,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function hy(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],d=c.event;c=c.listeners;t:{var m=void 0;if(a)for(var E=c.length-1;0<=E;E--){var M=c[E],T=M.instance,P=M.currentTarget;if(M=M.listener,T!==m&&d.isPropagationStopped())break t;m=M,d.currentTarget=P;try{m(d)}catch(Y){Dh(Y)}d.currentTarget=null,m=T}else for(E=0;E<c.length;E++){if(M=c[E],T=M.instance,P=M.currentTarget,M=M.listener,T!==m&&d.isPropagationStopped())break t;m=M,d.currentTarget=P;try{m(d)}catch(Y){Dh(Y)}d.currentTarget=null,m=T}}}}function At(n,a){var o=a[hi];o===void 0&&(o=a[hi]=new Set);var c=n+"__bubble";o.has(c)||(uy(a,n,2,!1),o.add(c))}function Md(n,a,o){var c=0;a&&(c|=4),uy(o,n,c,a)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function xd(n){if(!n[Kh]){n[Kh]=!0,n_.forEach(function(o){o!=="selectionchange"&&(k4.has(o)||Md(o,!1,n),Md(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Kh]||(a[Kh]=!0,Md("selectionchange",!1,a))}}function uy(n,a,o,c){switch(Dy(a)){case 2:var d=dS;break;case 8:d=gS;break;default:d=zd}o=d.bind(null,a,o,n),d=void 0,!Yc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(a,o,{capture:!0,passive:d}):n.addEventListener(a,o,!0):d!==void 0?n.addEventListener(a,o,{passive:d}):n.addEventListener(a,o,!1)}function wd(n,a,o,c,d){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)t:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var M=c.stateNode.containerInfo;if(M===d)break;if(E===4)for(E=c.return;E!==null;){var T=E.tag;if((T===3||T===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;M!==null;){if(E=La(M),E===null)return;if(T=E.tag,T===5||T===6||T===26||T===27){c=m=E;continue t}M=M.parentNode}}c=c.return}y_(function(){var P=m,Y=jc(o),V=[];t:{var F=q_.get(n);if(F!==void 0){var U=oh,yt=n;switch(n){case"keypress":if(rh(o)===0)break t;case"keydown":case"keyup":U=Dp;break;case"focusin":yt="focus",U=Kc;break;case"focusout":yt="blur",U=Kc;break;case"beforeblur":case"afterblur":U=Kc;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=p_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=zp;break;case X_:case j_:case B_:U=bp;break;case Y_:U=Up;break;case"scroll":case"scrollend":U=pp;break;case"wheel":U=Xp;break;case"copy":case"cut":case"paste":U=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=M_;break;case"toggle":case"beforetoggle":U=Bp}var _t=(a&4)!==0,Kt=!_t&&(n==="scroll"||n==="scrollend"),N=_t?F!==null?F+"Capture":null:F;_t=[];for(var G=P,I;G!==null;){var H=G;if(I=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||I===null||N===null||(H=il(G,N),H!=null&&_t.push(Fl(G,H,I))),Kt)break;G=G.return}0<_t.length&&(F=new U(F,yt,null,o,Y),V.push({event:F,listeners:_t}))}}if((a&7)===0){t:{if(F=n==="mouseover"||n==="pointerover",U=n==="mouseout"||n==="pointerout",F&&o!==Xc&&(yt=o.relatedTarget||o.fromElement)&&(La(yt)||yt[se]))break t;if((U||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,U?(yt=o.relatedTarget||o.toElement,U=P,yt=yt?La(yt):null,yt!==null&&(Kt=l(yt),_t=yt.tag,yt!==Kt||_t!==5&&_t!==27&&_t!==6)&&(yt=null)):(U=null,yt=P),U!==yt)){if(_t=p_,H="onMouseLeave",N="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(_t=M_,H="onPointerLeave",N="onPointerEnter",G="pointer"),Kt=U==null?F:el(U),I=yt==null?F:el(yt),F=new _t(H,G+"leave",U,o,Y),F.target=Kt,F.relatedTarget=I,H=null,La(Y)===P&&(_t=new _t(N,G+"enter",yt,o,Y),_t.target=I,_t.relatedTarget=Kt,H=_t),Kt=H,U&&yt)e:{for(_t=U,N=yt,G=0,I=_t;I;I=fr(I))G++;for(I=0,H=N;H;H=fr(H))I++;for(;0<G-I;)_t=fr(_t),G--;for(;0<I-G;)N=fr(N),I--;for(;G--;){if(_t===N||N!==null&&_t===N.alternate)break e;_t=fr(_t),N=fr(N)}_t=null}else _t=null;U!==null&&cy(V,F,U,_t,!1),yt!==null&&Kt!==null&&cy(V,Kt,yt,_t,!0)}}t:{if(F=P?el(P):window,U=F.nodeName&&F.nodeName.toLowerCase(),U==="select"||U==="input"&&F.type==="file")var ot=O_;else if(R_(F))if(G_)ot=Jp;else{ot=Qp;var Ct=Wp}else U=F.nodeName,!U||U.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?P&&kc(P.elementType)&&(ot=O_):ot=$p;if(ot&&(ot=ot(n,P))){A_(V,ot,o,Y);break t}Ct&&Ct(n,F,P),n==="focusout"&&P&&F.type==="number"&&P.memoizedProps.value!=null&&Uc(F,"number",F.value)}switch(Ct=P?el(P):window,n){case"focusin":(R_(Ct)||Ct.contentEditable==="true")&&(ja=Ct,tf=P,ul=null);break;case"focusout":ul=tf=ja=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,U_(V,o,Y);break;case"selectionchange":if(e4)break;case"keydown":case"keyup":U_(V,o,Y)}var ut;if(Wc)t:{switch(n){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Xa?C_(n,o)&&(mt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(mt="onCompositionStart");mt&&(x_&&o.locale!=="ko"&&(Xa||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Xa&&(ut=v_()):(Vn=Y,qc="value"in Vn?Vn.value:Vn.textContent,Xa=!0)),Ct=Vh(P,mt),0<Ct.length&&(mt=new S_(mt,n,null,o,Y),V.push({event:mt,listeners:Ct}),ut?mt.data=ut:(ut=T_(o),ut!==null&&(mt.data=ut)))),(ut=qp?Hp(n,o):Zp(n,o))&&(mt=Vh(P,"onBeforeInput"),0<mt.length&&(Ct=new S_("onBeforeInput","beforeinput",null,o,Y),V.push({event:Ct,listeners:mt}),Ct.data=ut)),z4(V,n,P,o,Y)}hy(V,a)})}function Fl(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Vh(n,a){for(var o=a+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=il(n,o),d!=null&&c.unshift(Fl(n,d,m)),d=il(n,a),d!=null&&c.push(Fl(n,d,m))),n.tag===3)return c;n=n.return}return[]}function fr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function cy(n,a,o,c,d){for(var m=a._reactName,E=[];o!==null&&o!==c;){var M=o,T=M.alternate,P=M.stateNode;if(M=M.tag,T!==null&&T===c)break;M!==5&&M!==26&&M!==27||P===null||(T=P,d?(P=il(o,m),P!=null&&E.unshift(Fl(o,P,T))):d||(P=il(o,m),P!=null&&E.push(Fl(o,P,T)))),o=o.return}E.length!==0&&n.push({event:a,listeners:E})}var X4=/\r\n?/g,j4=/\u0000|\uFFFD/g;function fy(n){return(typeof n=="string"?n:""+n).replace(X4,`
`).replace(j4,"")}function dy(n,a){return a=fy(a),fy(n)===a}function Wh(){}function Zt(n,a,o,c,d,m){switch(o){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Fa(n,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Fa(n,""+c);break;case"className":eh(n,"class",c);break;case"tabIndex":eh(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":eh(n,o,c);break;case"style":__(n,c,m);break;case"data":if(a!=="object"){eh(n,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=sh(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(a!=="input"&&Zt(n,a,"name",d.name,d,null),Zt(n,a,"formEncType",d.formEncType,d,null),Zt(n,a,"formMethod",d.formMethod,d,null),Zt(n,a,"formTarget",d.formTarget,d,null)):(Zt(n,a,"encType",d.encType,d,null),Zt(n,a,"method",d.method,d,null),Zt(n,a,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=sh(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Wh);break;case"onScroll":c!=null&&At("scroll",n);break;case"onScrollEnd":c!=null&&At("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=sh(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":At("beforetoggle",n),At("toggle",n),th(n,"popover",c);break;case"xlinkActuate":yn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":yn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":yn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":yn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":yn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":yn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":yn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":yn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":yn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":th(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=vp.get(o)||o,th(n,o,c))}}function bd(n,a,o,c,d,m){switch(o){case"style":__(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Fa(n,c):(typeof c=="number"||typeof c=="bigint")&&Fa(n,""+c);break;case"onScroll":c!=null&&At("scroll",n);break;case"onScrollEnd":c!=null&&At("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!s_.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),a=o.slice(2,d?o.length-7:void 0),m=n[Tt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(a,m,d),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,c,d);break t}o in n?n[o]=c:c===!0?n.setAttribute(o,""):th(n,o,c)}}}function Ge(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",n),At("load",n);var c=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Zt(n,a,m,E,o,null)}}d&&Zt(n,a,"srcSet",o.srcSet,o,null),c&&Zt(n,a,"src",o.src,o,null);return;case"input":At("invalid",n);var M=m=E=d=null,T=null,P=null;for(c in o)if(o.hasOwnProperty(c)){var Y=o[c];if(Y!=null)switch(c){case"name":d=Y;break;case"type":E=Y;break;case"checked":T=Y;break;case"defaultChecked":P=Y;break;case"value":m=Y;break;case"defaultValue":M=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,a));break;default:Zt(n,a,c,Y,o,null)}}c_(n,m,M,T,P,E,d,!1),ih(n);return;case"select":At("invalid",n),c=E=m=null;for(d in o)if(o.hasOwnProperty(d)&&(M=o[d],M!=null))switch(d){case"value":m=M;break;case"defaultValue":E=M;break;case"multiple":c=M;default:Zt(n,a,d,M,o,null)}a=m,o=E,n.multiple=!!c,a!=null?za(n,!!c,a,!1):o!=null&&za(n,!!c,o,!0);return;case"textarea":At("invalid",n),m=d=c=null;for(E in o)if(o.hasOwnProperty(E)&&(M=o[E],M!=null))switch(E){case"value":c=M;break;case"defaultValue":d=M;break;case"children":m=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(s(91));break;default:Zt(n,a,E,M,o,null)}d_(n,c,d,m),ih(n);return;case"option":for(T in o)if(o.hasOwnProperty(T)&&(c=o[T],c!=null))switch(T){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Zt(n,a,T,c,o,null)}return;case"dialog":At("beforetoggle",n),At("toggle",n),At("cancel",n),At("close",n);break;case"iframe":case"object":At("load",n);break;case"video":case"audio":for(c=0;c<zl.length;c++)At(zl[c],n);break;case"image":At("error",n),At("load",n);break;case"details":At("toggle",n);break;case"embed":case"source":case"link":At("error",n),At("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in o)if(o.hasOwnProperty(P)&&(c=o[P],c!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Zt(n,a,P,c,o,null)}return;default:if(kc(a)){for(Y in o)o.hasOwnProperty(Y)&&(c=o[Y],c!==void 0&&bd(n,a,Y,c,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(c=o[M],c!=null&&Zt(n,a,M,c,o,null))}function B4(n,a,o,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,E=null,M=null,T=null,P=null,Y=null;for(U in o){var V=o[U];if(o.hasOwnProperty(U)&&V!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":T=V;default:c.hasOwnProperty(U)||Zt(n,a,U,null,c,V)}}for(var F in c){var U=c[F];if(V=o[F],c.hasOwnProperty(F)&&(U!=null||V!=null))switch(F){case"type":m=U;break;case"name":d=U;break;case"checked":P=U;break;case"defaultChecked":Y=U;break;case"value":E=U;break;case"defaultValue":M=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,a));break;default:U!==V&&Zt(n,a,F,U,c,V)}}Fc(n,E,M,T,P,Y,m,d);return;case"select":U=E=M=F=null;for(m in o)if(T=o[m],o.hasOwnProperty(m)&&T!=null)switch(m){case"value":break;case"multiple":U=T;default:c.hasOwnProperty(m)||Zt(n,a,m,null,c,T)}for(d in c)if(m=c[d],T=o[d],c.hasOwnProperty(d)&&(m!=null||T!=null))switch(d){case"value":F=m;break;case"defaultValue":M=m;break;case"multiple":E=m;default:m!==T&&Zt(n,a,d,m,c,T)}a=M,o=E,c=U,F!=null?za(n,!!o,F,!1):!!c!=!!o&&(a!=null?za(n,!!o,a,!0):za(n,!!o,o?[]:"",!1));return;case"textarea":U=F=null;for(M in o)if(d=o[M],o.hasOwnProperty(M)&&d!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Zt(n,a,M,null,c,d)}for(E in c)if(d=c[E],m=o[E],c.hasOwnProperty(E)&&(d!=null||m!=null))switch(E){case"value":F=d;break;case"defaultValue":U=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&Zt(n,a,E,d,c,m)}f_(n,F,U);return;case"option":for(var yt in o)if(F=o[yt],o.hasOwnProperty(yt)&&F!=null&&!c.hasOwnProperty(yt))switch(yt){case"selected":n.selected=!1;break;default:Zt(n,a,yt,null,c,F)}for(T in c)if(F=c[T],U=o[T],c.hasOwnProperty(T)&&F!==U&&(F!=null||U!=null))switch(T){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Zt(n,a,T,F,c,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)F=o[_t],o.hasOwnProperty(_t)&&F!=null&&!c.hasOwnProperty(_t)&&Zt(n,a,_t,null,c,F);for(P in c)if(F=c[P],U=o[P],c.hasOwnProperty(P)&&F!==U&&(F!=null||U!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,a));break;default:Zt(n,a,P,F,c,U)}return;default:if(kc(a)){for(var Kt in o)F=o[Kt],o.hasOwnProperty(Kt)&&F!==void 0&&!c.hasOwnProperty(Kt)&&bd(n,a,Kt,void 0,c,F);for(Y in c)F=c[Y],U=o[Y],!c.hasOwnProperty(Y)||F===U||F===void 0&&U===void 0||bd(n,a,Y,F,c,U);return}}for(var N in o)F=o[N],o.hasOwnProperty(N)&&F!=null&&!c.hasOwnProperty(N)&&Zt(n,a,N,null,c,F);for(V in c)F=c[V],U=o[V],!c.hasOwnProperty(V)||F===U||F==null&&U==null||Zt(n,a,V,F,c,U)}var Cd=null,Td=null;function Qh(n){return n.nodeType===9?n:n.ownerDocument}function gy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _y(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Rd(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ad=null;function Y4(){var n=window.event;return n&&n.type==="popstate"?n===Ad?!1:(Ad=n,!0):(Ad=null,!1)}var my=typeof setTimeout=="function"?setTimeout:void 0,q4=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,H4=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(n){return yy.resolve(null).then(n).catch(Z4)}:my;function Z4(n){setTimeout(function(){throw n})}function cs(n){return n==="head"}function vy(n,a){var o=a,c=0,d=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<c&&8>c){o=c;var E=n.ownerDocument;if(o&1&&Ul(E.documentElement),o&2&&Ul(E.body),o&4)for(o=E.head,Ul(o),E=o.firstChild;E;){var M=E.nextSibling,T=E.nodeName;E[tl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=M}}if(d===0){n.removeChild(m),Zl(a);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:c=o.charCodeAt(0)-48;else c=0;o=m}while(o);Zl(a)}function Od(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Od(o),Dc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function K4(n,a,o,c){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[tl])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Xi(n.nextSibling),n===null)break}return null}function V4(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Xi(n.nextSibling),n===null))return null;return n}function Gd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function W4(n,a){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")a();else{var c=function(){a(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Xi(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var Ld=null;function Ey(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return n;a--}else o==="/$"&&a++}n=n.previousSibling}return null}function py(n,a,o){switch(a=Qh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ul(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Dc(n)}var Ri=new Map,Sy=new Set;function $h(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Gn=K.d;K.d={f:Q4,r:$4,D:J4,C:tS,L:eS,m:iS,X:sS,S:nS,M:aS};function Q4(){var n=Gn.f(),a=Bh();return n||a}function $4(n){var a=Na(n);a!==null&&a.tag===5&&a.type==="form"?X1(a):Gn.r(n)}var dr=typeof document>"u"?null:document;function My(n,a,o){var c=dr;if(c&&typeof a=="string"&&a){var d=Si(a);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Sy.has(d)||(Sy.add(d),n={rel:n,crossOrigin:o,href:a},c.querySelector(d)===null&&(a=c.createElement("link"),Ge(a,"link",n),Se(a),c.head.appendChild(a)))}}function J4(n){Gn.D(n),My("dns-prefetch",n,null)}function tS(n,a){Gn.C(n,a),My("preconnect",n,a)}function eS(n,a,o){Gn.L(n,a,o);var c=dr;if(c&&n&&a){var d='link[rel="preload"][as="'+Si(a)+'"]';a==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Si(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Si(o.imageSizes)+'"]')):d+='[href="'+Si(n)+'"]';var m=d;switch(a){case"style":m=gr(n);break;case"script":m=_r(n)}Ri.has(m)||(n=_({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),Ri.set(m,n),c.querySelector(d)!==null||a==="style"&&c.querySelector(kl(m))||a==="script"&&c.querySelector(Xl(m))||(a=c.createElement("link"),Ge(a,"link",n),Se(a),c.head.appendChild(a)))}}function iS(n,a){Gn.m(n,a);var o=dr;if(o&&n){var c=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Si(c)+'"][href="'+Si(n)+'"]',m=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=_r(n)}if(!Ri.has(m)&&(n=_({rel:"modulepreload",href:n},a),Ri.set(m,n),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Xl(m)))return}c=o.createElement("link"),Ge(c,"link",n),Se(c),o.head.appendChild(c)}}}function nS(n,a,o){Gn.S(n,a,o);var c=dr;if(c&&n){var d=Da(c).hoistableStyles,m=gr(n);a=a||"default";var E=d.get(m);if(!E){var M={loading:0,preload:null};if(E=c.querySelector(kl(m)))M.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":a},o),(o=Ri.get(m))&&Nd(n,o);var T=E=c.createElement("link");Se(T),Ge(T,"link",n),T._p=new Promise(function(P,Y){T.onload=P,T.onerror=Y}),T.addEventListener("load",function(){M.loading|=1}),T.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Jh(E,a,c)}E={type:"stylesheet",instance:E,count:1,state:M},d.set(m,E)}}}function sS(n,a){Gn.X(n,a);var o=dr;if(o&&n){var c=Da(o).hoistableScripts,d=_r(n),m=c.get(d);m||(m=o.querySelector(Xl(d)),m||(n=_({src:n,async:!0},a),(a=Ri.get(d))&&Dd(n,a),m=o.createElement("script"),Se(m),Ge(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function aS(n,a){Gn.M(n,a);var o=dr;if(o&&n){var c=Da(o).hoistableScripts,d=_r(n),m=c.get(d);m||(m=o.querySelector(Xl(d)),m||(n=_({src:n,async:!0,type:"module"},a),(a=Ri.get(d))&&Dd(n,a),m=o.createElement("script"),Se(m),Ge(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(d,m))}}function xy(n,a,o,c){var d=(d=ht.current)?$h(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=gr(o.href),o=Da(d).hoistableStyles,c=o.get(a),c||(c={type:"style",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=gr(o.href);var m=Da(d).hoistableStyles,E=m.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=d.querySelector(kl(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Ri.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ri.set(n,o),m||rS(d,n,o,E.state))),a&&c===null)throw Error(s(528,""));return E}if(a&&c!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=_r(o),o=Da(d).hoistableScripts,c=o.get(a),c||(c={type:"script",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function gr(n){return'href="'+Si(n)+'"'}function kl(n){return'link[rel="stylesheet"]['+n+"]"}function wy(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function rS(n,a,o,c){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=n.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Ge(a,"link",o),Se(a),n.head.appendChild(a))}function _r(n){return'[src="'+Si(n)+'"]'}function Xl(n){return"script[async]"+n}function by(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var c=n.querySelector('style[data-href~="'+Si(o.href)+'"]');if(c)return a.instance=c,Se(c),c;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Se(c),Ge(c,"style",d),Jh(c,o.precedence,n),a.instance=c;case"stylesheet":d=gr(o.href);var m=n.querySelector(kl(d));if(m)return a.state.loading|=4,a.instance=m,Se(m),m;c=wy(o),(d=Ri.get(d))&&Nd(c,d),m=(n.ownerDocument||n).createElement("link"),Se(m);var E=m;return E._p=new Promise(function(M,T){E.onload=M,E.onerror=T}),Ge(m,"link",c),a.state.loading|=4,Jh(m,o.precedence,n),a.instance=m;case"script":return m=_r(o.src),(d=n.querySelector(Xl(m)))?(a.instance=d,Se(d),d):(c=o,(d=Ri.get(m))&&(c=_({},o),Dd(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),Se(d),Ge(d,"link",c),n.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Jh(c,o.precedence,n));return a.instance}function Jh(n,a,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,m=d,E=0;E<c.length;E++){var M=c[E];if(M.dataset.precedence===a)m=M;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Nd(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Dd(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var tu=null;function Cy(n,a,o){if(tu===null){var c=new Map,d=tu=new Map;d.set(o,c)}else d=tu,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[tl]||m[Wt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(a)||"";E=n+E;var M=c.get(E);M?M.push(m):c.set(E,[m])}}return c}function Ty(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function lS(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ry(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var jl=null;function oS(){}function hS(n,a,o){if(jl===null)throw Error(s(475));var c=jl;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=gr(o.href),m=n.querySelector(kl(d));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=eu.bind(c),n.then(c,c)),a.state.loading|=4,a.instance=m,Se(m);return}m=n.ownerDocument||n,o=wy(o),(d=Ri.get(d))&&Nd(o,d),m=m.createElement("link"),Se(m);var E=m;E._p=new Promise(function(M,T){E.onload=M,E.onerror=T}),Ge(m,"link",o),a.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=eu.bind(c),n.addEventListener("load",a),n.addEventListener("error",a))}}function uS(){if(jl===null)throw Error(s(475));var n=jl;return n.stylesheets&&n.count===0&&Id(n,n.stylesheets),0<n.count?function(a){var o=setTimeout(function(){if(n.stylesheets&&Id(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(o)}}:null}function eu(){if(this.count--,this.count===0){if(this.stylesheets)Id(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var iu=null;function Id(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,iu=new Map,a.forEach(cS,n),iu=null,eu.call(n))}function cS(n,a){if(!(a.state.loading&4)){var o=iu.get(n);if(o)var c=o.get(null);else{o=new Map,iu.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var E=d[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}d=a.instance,E=d.getAttribute("data-precedence"),m=o.get(E)||c,m===c&&o.set(null,d),o.set(E,d),this.count++,c=eu.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),a.state.loading|=4}}var Bl={$$typeof:L,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function fS(n,a,o,c,d,m,E,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.hiddenUpdates=mn(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Ay(n,a,o,c,d,m,E,M,T,P,Y,V){return n=new fS(n,a,o,E,M,T,P,V),a=1,m===!0&&(a|=24),m=ci(3,null,null,a),n.current=m,m.stateNode=n,a=mf(),a.refCount++,n.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:a},pf(m),n}function Oy(n){return n?(n=Ha,n):Ha}function Gy(n,a,o,c,d,m){d=Oy(d),c.context===null?c.context=d:c.pendingContext=d,c=$n(a),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Jn(n,c,a),o!==null&&(mi(o,n,a),El(o,n,a))}function Ly(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Pd(n,a){Ly(n,a),(n=n.alternate)&&Ly(n,a)}function Ny(n){if(n.tag===13){var a=qa(n,67108864);a!==null&&mi(a,n,67108864),Pd(n,67108864)}}var nu=!0;function dS(n,a,o,c){var d=D.T;D.T=null;var m=K.p;try{K.p=2,zd(n,a,o,c)}finally{K.p=m,D.T=d}}function gS(n,a,o,c){var d=D.T;D.T=null;var m=K.p;try{K.p=8,zd(n,a,o,c)}finally{K.p=m,D.T=d}}function zd(n,a,o,c){if(nu){var d=Fd(c);if(d===null)wd(n,a,c,su,o),Iy(n,c);else if(mS(d,n,a,o,c))c.stopPropagation();else if(Iy(n,c),a&4&&-1<_S.indexOf(n)){for(;d!==null;){var m=Na(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Ji(m.pendingLanes);if(E!==0){var M=m;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var T=1<<31-De(E);M.entanglements[1]|=T,E&=~T}an(m),(Bt&6)===0&&(Xh=Re()+500,Pl(0))}}break;case 13:M=qa(m,2),M!==null&&mi(M,m,2),Bh(),Pd(m,2)}if(m=Fd(c),m===null&&wd(n,a,c,su,o),m===d)break;d=m}d!==null&&c.stopPropagation()}else wd(n,a,c,null,o)}}function Fd(n){return n=jc(n),Ud(n)}var su=null;function Ud(n){if(su=null,n=La(n),n!==null){var a=l(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=h(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return su=n,null}function Dy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case Yn:return 2;case Wi:return 8;case Pi:case qn:return 32;case oe:return 268435456;default:return 32}default:return 32}}var kd=!1,fs=null,ds=null,gs=null,Yl=new Map,ql=new Map,_s=[],_S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iy(n,a){switch(n){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Yl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(a.pointerId)}}function Hl(n,a,o,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:a,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},a!==null&&(a=Na(a),a!==null&&Ny(a)),n):(n.eventSystemFlags|=c,a=n.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),n)}function mS(n,a,o,c,d){switch(a){case"focusin":return fs=Hl(fs,n,a,o,c,d),!0;case"dragenter":return ds=Hl(ds,n,a,o,c,d),!0;case"mouseover":return gs=Hl(gs,n,a,o,c,d),!0;case"pointerover":var m=d.pointerId;return Yl.set(m,Hl(Yl.get(m)||null,n,a,o,c,d)),!0;case"gotpointercapture":return m=d.pointerId,ql.set(m,Hl(ql.get(m)||null,n,a,o,c,d)),!0}return!1}function Py(n){var a=La(n.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=h(o),a!==null){n.blockedOn=a,Ke(n.priority,function(){if(o.tag===13){var c=_i();c=Fi(c);var d=qa(o,c);d!==null&&mi(d,o,c),Pd(o,c)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function au(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Fd(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Xc=c,o.target.dispatchEvent(c),Xc=null}else return a=Na(o),a!==null&&Ny(a),n.blockedOn=o,!1;a.shift()}return!0}function zy(n,a,o){au(n)&&o.delete(a)}function yS(){kd=!1,fs!==null&&au(fs)&&(fs=null),ds!==null&&au(ds)&&(ds=null),gs!==null&&au(gs)&&(gs=null),Yl.forEach(zy),ql.forEach(zy)}function ru(n,a){n.blockedOn===a&&(n.blockedOn=null,kd||(kd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,yS)))}var lu=null;function Fy(n){lu!==n&&(lu=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){lu===n&&(lu=null);for(var a=0;a<n.length;a+=3){var o=n[a],c=n[a+1],d=n[a+2];if(typeof c!="function"){if(Ud(c||o)===null)continue;break}var m=Na(o);m!==null&&(n.splice(a,3),a-=3,Uf(m,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function Zl(n){function a(T){return ru(T,n)}fs!==null&&ru(fs,n),ds!==null&&ru(ds,n),gs!==null&&ru(gs,n),Yl.forEach(a),ql.forEach(a);for(var o=0;o<_s.length;o++){var c=_s[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<_s.length&&(o=_s[0],o.blockedOn===null);)Py(o),o.blockedOn===null&&_s.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],m=o[c+1],E=d[Tt]||null;if(typeof m=="function")E||Fy(o);else if(E){var M=null;if(m&&m.hasAttribute("formAction")){if(d=m,E=m[Tt]||null)M=E.formAction;else if(Ud(d)!==null)continue}else M=E.action;typeof M=="function"?o[c+1]=M:(o.splice(c,3),c-=3),Fy(o)}}}function Xd(n){this._internalRoot=n}ou.prototype.render=Xd.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,c=_i();Gy(o,c,n,a,null,null)},ou.prototype.unmount=Xd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Gy(n.current,2,null,n,null,null),Bh(),a[se]=null}};function ou(n){this._internalRoot=n}ou.prototype.unstable_scheduleHydration=function(n){if(n){var a=oi();n={blockedOn:null,target:n,priority:a};for(var o=0;o<_s.length&&a!==0&&a<_s[o].priority;o++);_s.splice(o,0,n),o===0&&Py(n)}};var Uy=t.version;if(Uy!=="19.1.1")throw Error(s(527,Uy,"19.1.1"));K.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=f(a),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var vS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Qi=hu.inject(vS),Ee=hu}catch{}}return Vl.createRoot=function(n,a){if(!r(n))throw Error(s(299));var o=!1,c="",d=em,m=im,E=nm,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=Ay(n,1,!1,null,null,o,c,d,m,E,M,null),n[se]=a.current,xd(n),new Xd(a)},Vl.hydrateRoot=function(n,a,o){if(!r(n))throw Error(s(299));var c=!1,d="",m=em,E=im,M=nm,T=null,P=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks),o.formState!==void 0&&(P=o.formState)),a=Ay(n,1,!0,a,o??null,c,d,m,E,M,T,P),a.context=Oy(null),o=a.current,c=_i(),c=Fi(c),d=$n(c),d.callback=null,Jn(o,d,c),o=c,a.current.lanes=o,zi(a,o),an(a),n[se]=a.current,xd(n),new ou(a)},Vl.version="19.1.1",Vl}var Vy;function RS(){if(Vy)return Yd.exports;Vy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Yd.exports=TS(),Yd.exports}var AS=RS();const OS=({title:i="Geo App",logo:t={src:"/geo-app/map-pin.svg",alt:"GA",tl:"GA"}})=>{const{src:e,alt:s,tl:r}=t;return bt.jsxs(bt.Fragment,{children:[bt.jsxs("header",{className:"flex gap-2 m-4",children:[bt.jsx("img",{className:"w-6 cursor-pointer",src:e,alt:s,title:r}),bt.jsx("h1",{className:" font-semibold display-inline-block color-action-default",children:i})]}),bt.jsx("hr",{})]})};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),Wy=i=>{const t=LS(i);return t.charAt(0).toUpperCase()+t.slice(1)},Sv=(...i)=>i.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),NS=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=qi.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:h,...u},f)=>qi.createElement("svg",{ref:f,...DS,width:t,height:t,stroke:i,strokeWidth:s?Number(e)*24/Number(t):e,className:Sv("lucide",r),...!l&&!NS(u)&&{"aria-hidden":"true"},...u},[...h.map(([g,_])=>qi.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=(i,t)=>{const e=qi.forwardRef(({className:s,...r},l)=>qi.createElement(IS,{ref:l,iconNode:t,className:Sv(`lucide-${GS(Wy(i))}`,`lucide-${i}`,s),...r}));return e.displayName=Wy(i),e};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"m9 6-6 6 6 6",key:"7v63n9"}],["path",{d:"M3 12h14",key:"13k4hi"}],["path",{d:"M21 19V5",key:"b4bplr"}]],zS=wa("arrow-left-from-line",PS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],US=wa("arrow-right-from-line",FS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],XS=wa("blend",kS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BS=wa("eye-off",jS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qS=wa("eye",YS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ZS=wa("loader-circle",HS);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VS=wa("x",KS),Ue={ANIMATING:0,INTERACTING:1};function WS(i,t,e){let s,r;e=e||Pn;let l=0,h=i.length,u=!1;for(;l<h;)s=l+(h-l>>1),r=+e(i[s],t),r<0?l=s+1:(h=s,u=!r);return u?l:~l}function Pn(i,t){return i>t?1:i<t?-1:0}function QS(i,t){return i<t?1:i>t?-1:0}function tg(i,t,e){if(i[0]<=t)return 0;const s=i.length;if(t<=i[s-1])return s-1;if(typeof e=="function"){for(let r=1;r<s;++r){const l=i[r];if(l===t)return r;if(l<t)return e(t,i[r-1],l)>0?r-1:r}return s-1}if(e>0){for(let r=1;r<s;++r)if(i[r]<t)return r-1;return s-1}if(e<0){for(let r=1;r<s;++r)if(i[r]<=t)return r;return s-1}for(let r=1;r<s;++r){if(i[r]==t)return r;if(i[r]<t)return i[r-1]-t<t-i[r]?r-1:r}return s-1}function $S(i,t,e){for(;t<e;){const s=i[t];i[t]=i[e],i[e]=s,++t,--e}}function cn(i,t){const e=Array.isArray(t)?t:[t],s=e.length;for(let r=0;r<s;r++)i[i.length]=e[r]}function Fs(i,t){const e=i.length;if(e!==t.length)return!1;for(let s=0;s<e;s++)if(i[s]!==t[s])return!1;return!0}function JS(i,t,e){const s=t||Pn;return i.every(function(r,l){if(l===0)return!0;const h=s(i[l-1],r);return!(h>0||h===0)})}const be={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qy(i){const t=Di();for(let e=0,s=i.length;e<s;++e)fo(t,i[e]);return t}function eg(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function Mv(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function ba(i,t,e){let s,r;return t<i[0]?s=i[0]-t:i[2]<t?s=t-i[2]:s=0,e<i[1]?r=i[1]-e:i[3]<e?r=e-i[3]:r=0,s*s+r*r}function Fr(i,t){return ig(i,t[0],t[1])}function io(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function ig(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function w0(i,t){const e=i[0],s=i[1],r=i[2],l=i[3],h=t[0],u=t[1];let f=be.UNKNOWN;return h<e?f=f|be.LEFT:h>r&&(f=f|be.RIGHT),u<s?f=f|be.BELOW:u>l&&(f=f|be.ABOVE),f===be.UNKNOWN&&(f=be.INTERSECTING),f}function Di(){return[1/0,1/0,-1/0,-1/0]}function Ns(i,t,e,s,r){return r?(r[0]=i,r[1]=t,r[2]=e,r[3]=s,r):[i,t,e,s]}function zo(i){return Ns(1/0,1/0,-1/0,-1/0,i)}function xv(i,t){const e=i[0],s=i[1];return Ns(e,s,e,s,t)}function ng(i,t,e,s,r){const l=zo(r);return bv(l,i,t,e,s)}function po(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function wv(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function fo(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function bv(i,t,e,s,r){for(;e<s;e+=r)tM(i,t[e],t[e+1]);return i}function tM(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function Cv(i,t){let e;return e=t(nc(i)),e||(e=t(sc(i)),e)||(e=t(ac(i)),e)||(e=t(Ca(i)),e)?e:!1}function b0(i){let t=0;return rc(i)||(t=Ft(i)*qe(i)),t}function nc(i){return[i[0],i[1]]}function sc(i){return[i[2],i[1]]}function Ds(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function eM(i,t){let e;if(t==="bottom-left")e=nc(i);else if(t==="bottom-right")e=sc(i);else if(t==="top-left")e=Ca(i);else if(t==="top-right")e=ac(i);else throw new Error("Invalid corner");return e}function C0(i,t,e,s,r){const[l,h,u,f,g,_,y,v]=Tv(i,t,e,s);return Ns(Math.min(l,u,g,y),Math.min(h,f,_,v),Math.max(l,u,g,y),Math.max(h,f,_,v),r)}function Tv(i,t,e,s){const r=t*s[0]/2,l=t*s[1]/2,h=Math.cos(e),u=Math.sin(e),f=r*h,g=r*u,_=l*h,y=l*u,v=i[0],p=i[1];return[v-f+y,p-g-_,v-f-y,p-g+_,v+f-y,p+g+_,v+f+y,p+g-_,v-f+y,p-g-_]}function qe(i){return i[3]-i[1]}function _a(i,t,e){const s=e||Di();return ni(i,t)?(i[0]>t[0]?s[0]=i[0]:s[0]=t[0],i[1]>t[1]?s[1]=i[1]:s[1]=t[1],i[2]<t[2]?s[2]=i[2]:s[2]=t[2],i[3]<t[3]?s[3]=i[3]:s[3]=t[3]):zo(s),s}function Ca(i){return[i[0],i[3]]}function ac(i){return[i[2],i[3]]}function Ft(i){return i[2]-i[0]}function ni(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function rc(i){return i[2]<i[0]||i[3]<i[1]}function iM(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function nM(i,t,e){let s=!1;const r=w0(i,t),l=w0(i,e);if(r===be.INTERSECTING||l===be.INTERSECTING)s=!0;else{const h=i[0],u=i[1],f=i[2],g=i[3],_=t[0],y=t[1],v=e[0],p=e[1],S=(p-y)/(v-_);let w,x;l&be.ABOVE&&!(r&be.ABOVE)&&(w=v-(p-g)/S,s=w>=h&&w<=f),!s&&l&be.RIGHT&&!(r&be.RIGHT)&&(x=p-(v-f)*S,s=x>=u&&x<=g),!s&&l&be.BELOW&&!(r&be.BELOW)&&(w=v-(p-u)/S,s=w>=h&&w<=f),!s&&l&be.LEFT&&!(r&be.LEFT)&&(x=p-(v-h)*S,s=x>=u&&x<=g)}return s}function Rv(i,t){const e=t.getExtent(),s=Ds(i);if(t.canWrapX()&&(s[0]<e[0]||s[0]>=e[2])){const r=Ft(e),h=Math.floor((s[0]-e[0])/r)*r;i[0]-=h,i[2]-=h}return i}function Av(i,t,e){if(t.canWrapX()){const s=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[s[0],i[1],s[2],i[3]]];Rv(i,t);const r=Ft(s);if(Ft(i)>r&&!e)return[[s[0],i[1],s[2],i[3]]];if(i[0]<s[0])return[[i[0]+r,i[1],s[2],i[3]],[s[0],i[1],i[2],i[3]]];if(i[2]>s[2])return[[i[0],i[1],s[2],i[3]],[s[0],i[1],i[2]-r,i[3]]]}return[i]}function Jt(i,t,e){return Math.min(Math.max(i,t),e)}function sM(i,t,e,s,r,l){const h=r-e,u=l-s;if(h!==0||u!==0){const f=((i-e)*h+(t-s)*u)/(h*h+u*u);f>1?(e=r,s=l):f>0&&(e+=h*f,s+=u*f)}return ma(i,t,e,s)}function ma(i,t,e,s){const r=e-i,l=s-t;return r*r+l*l}function aM(i){const t=i.length;for(let s=0;s<t;s++){let r=s,l=Math.abs(i[s][s]);for(let u=s+1;u<t;u++){const f=Math.abs(i[u][s]);f>l&&(l=f,r=u)}if(l===0)return null;const h=i[r];i[r]=i[s],i[s]=h;for(let u=s+1;u<t;u++){const f=-i[u][s]/i[s][s];for(let g=s;g<t+1;g++)s==g?i[u][g]=0:i[u][g]+=f*i[s][g]}}const e=new Array(t);for(let s=t-1;s>=0;s--){e[s]=i[s][t]/i[s][s];for(let r=s-1;r>=0;r--)i[r][t]-=i[r][s]*e[s]}return e}function $y(i){return i*180/Math.PI}function As(i){return i*Math.PI/180}function ya(i,t){const e=i%t;return e*t<0?e+t:e}function yi(i,t,e){return i+e*(t-i)}function lc(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function uu(i,t){return Math.floor(lc(i,t))}function cu(i,t){return Math.ceil(lc(i,t))}function T0(i,t,e){if(i>=t&&i<e)return i;const s=e-t;return((i-t)%s+s)%s+t}function rM(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function Nu(i,t){let e=!0;for(let s=i.length-1;s>=0;--s)if(i[s]!=t[s]){e=!1;break}return e}function sg(i,t){const e=Math.cos(t),s=Math.sin(t),r=i[0]*e-i[1]*s,l=i[1]*e+i[0]*s;return i[0]=r,i[1]=l,i}function lM(i,t){return i[0]*=t,i[1]*=t,i}function ag(i,t){if(t.canWrapX()){const e=Ft(t.getExtent()),s=Ov(i,t,e);s&&(i[0]-=s*e)}return i}function Ov(i,t,e){const s=t.getExtent();let r=0;return t.canWrapX()&&(i[0]<s[0]||i[0]>s[2])&&(e=e||Ft(s),r=Math.floor((i[0]-s[0])/e)),r}const va=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",oM=va.includes("safari")&&!va.includes("chrom");oM&&(va.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(va));const hM=va.includes("webkit")&&!va.includes("edge"),Gv=va.includes("macintosh"),uM=typeof devicePixelRatio<"u"?devicePixelRatio:1,rg=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Lv=typeof Image<"u"&&Image.prototype.decode,Nv=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function ve(i,t,e,s){let r;return e&&e.length?r=e.shift():rg?r=new OffscreenCanvas(i||300,t||300):r=document.createElement("canvas"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",s)}let Kd;function Du(){return Kd||(Kd=ve(1,1)),Kd}function oc(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function Jy(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function cM(i){for(;i.lastChild;)i.lastChild.remove()}function fM(i,t){const e=i.childNodes;for(let s=0;;++s){const r=e[s],l=t[s];if(!r&&!l)break;if(r!==l){if(!r){i.appendChild(l);continue}if(!l){i.removeChild(r),--s;continue}i.insertBefore(l,r)}}}function Dv(...i){console.warn(...i)}const lg={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let hc=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||lg[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Fo=6378137,Rr=Math.PI*Fo,dM=[-Rr,-Rr,Rr,Rr],gM=[-180,-85,180,85],fu=Fo*Math.log(Math.tan(Math.PI/2));class mr extends hc{constructor(t){super({code:t,units:"m",extent:dM,global:!0,worldExtent:gM,getPointResolution:function(e,s){return e/Math.cosh(s[1]/Fo)}})}}const t2=[new mr("EPSG:3857"),new mr("EPSG:102100"),new mr("EPSG:102113"),new mr("EPSG:900913"),new mr("http://www.opengis.net/def/crs/EPSG/0/3857"),new mr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _M(i,t,e,s){const r=i.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=i.slice():t=new Array(r));for(let l=0;l<r;l+=s){t[l]=Rr*i[l]/180;let h=Fo*Math.log(Math.tan(Math.PI*(+i[l+1]+90)/360));h>fu?h=fu:h<-fu&&(h=-fu),t[l+1]=h}return t}function mM(i,t,e,s){const r=i.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=i.slice():t=new Array(r));for(let l=0;l<r;l+=s)t[l]=180*i[l]/Rr,t[l+1]=360*Math.atan(Math.exp(i[l+1]/Fo))/Math.PI-90;return t}const yM=6378137,e2=[-180,-90,180,90],vM=Math.PI*yM/180;class aa extends hc{constructor(t,e){super({code:t,units:"degrees",extent:e2,axisOrientation:e,global:!0,metersPerUnit:vM,worldExtent:e2})}}const i2=[new aa("CRS:84"),new aa("EPSG:4326","neu"),new aa("urn:ogc:def:crs:OGC:1.3:CRS84"),new aa("urn:ogc:def:crs:OGC:2:84"),new aa("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new aa("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new aa("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let R0={};function Cu(i){return R0[i]||R0[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function EM(i,t){R0[i]=t}function Uo(i){for(const t in i)delete i[t]}function Ea(i){let t;for(t in i)return!1;return!t}let Nr={};function pa(i,t,e){const s=i.getCode(),r=t.getCode();s in Nr||(Nr[s]={}),Nr[s][r]=e}function Tu(i,t){return i in Nr&&t in Nr[i]?Nr[i][t]:null}const Iu=.9996,Ni=.00669438,uc=Ni*Ni,cc=uc*Ni,ca=Ni/(1-Ni),n2=Math.sqrt(1-Ni),Ur=(1-n2)/(1+n2),Iv=Ur*Ur,og=Iv*Ur,hg=og*Ur,Pv=hg*Ur,zv=1-Ni/4-3*uc/64-5*cc/256,pM=3*Ni/8+3*uc/32+45*cc/1024,SM=15*uc/256+45*cc/1024,MM=35*cc/3072,xM=3/2*Ur-27/32*og+269/512*Pv,wM=21/16*Iv-55/32*hg,bM=151/96*og-417/128*Pv,CM=1097/512*hg,Pu=6378137;function TM(i,t,e){const s=i-5e5,h=(e.north?t:t-1e7)/Iu/(Pu*zv),u=h+xM*Math.sin(2*h)+wM*Math.sin(4*h)+bM*Math.sin(6*h)+CM*Math.sin(8*h),f=Math.sin(u),g=f*f,_=Math.cos(u),y=f/_,v=y*y,p=v*v,S=1-Ni*g,w=Math.sqrt(1-Ni*g),x=Pu/w,b=(1-Ni)/S,R=ca*_**2,L=R*R,O=s/(x*Iu),A=O*O,k=A*O,j=k*O,B=j*O,Z=B*O,J=u-y/b*(A/2-j/24*(5+3*v+10*R-4*L-9*ca))+Z/720*(61+90*v+298*R+45*p-252*ca-3*L);let st=(O-k/6*(1+2*v+R)+B/120*(5-2*R+28*v-3*L+8*ca+24*p))/_;return st=T0(st+As(Fv(e.number)),-Math.PI,Math.PI),[$y(st),$y(J)]}const s2=-80,a2=84,RM=-180,AM=180;function OM(i,t,e){i=T0(i,RM,AM),t<s2?t=s2:t>a2&&(t=a2);const s=As(t),r=Math.sin(s),l=Math.cos(s),h=r/l,u=h*h,f=u*u,g=As(i),_=Fv(e.number),y=As(_),v=Pu/Math.sqrt(1-Ni*r**2),p=ca*l**2,S=l*T0(g-y,-Math.PI,Math.PI),w=S*S,x=w*S,b=x*S,R=b*S,L=R*S,O=Pu*(zv*s-pM*Math.sin(2*s)+SM*Math.sin(4*s)-MM*Math.sin(6*s)),A=Iu*v*(S+x/6*(1-u+p)+R/120*(5-18*u+f+72*p-58*ca))+5e5;let k=Iu*(O+v*h*(w/2+b/24*(5-u+9*p+4*p**2)+L/720*(61-58*u+f+600*p-330*ca)));return e.north||(k+=1e7),[A,k]}function Fv(i){return(i-1)*6-180+3}const GM=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Uv(i){let t=0;for(const r of GM){const l=i.match(r);if(l){t=parseInt(l[1]);break}}if(!t)return null;let e=0,s=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(s=!0,e=t-32600),e?{number:e,north:s}:null}function r2(i,t){return function(e,s,r,l){const h=e.length;r=r>1?r:2,l=l??r,s||(r>2?s=e.slice():s=new Array(h));for(let u=0;u<h;u+=l){const f=e[u],g=e[u+1],_=i(f,g,t);s[u]=_[0],s[u+1]=_[1]}return s}}function LM(i){return Uv(i)?new hc({code:i,units:"m"}):null}function NM(i){const t=Uv(i.getCode());return t?{forward:r2(OM,t),inverse:r2(TM,t)}:null}const DM=63710088e-1;function l2(i,t,e){e=e||DM;const s=As(i[1]),r=As(t[1]),l=(r-s)/2,h=As(t[0]-i[0])/2,u=Math.sin(l)*Math.sin(l)+Math.sin(h)*Math.sin(h)*Math.cos(s)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}const IM=[NM],PM=[LM];let A0=!0;function zM(i){A0=!1}function ug(i,t){if(t!==void 0){for(let e=0,s=i.length;e<s;++e)t[e]=i[e];t=t}else t=i.slice();return t}function FM(i,t){if(t!==void 0&&i!==t){for(let e=0,s=i.length;e<s;++e)t[e]=i[e];i=t}return i}function zu(i){EM(i.getCode(),i),pa(i,i,ug)}function UM(i){i.forEach(zu)}function $t(i){if(typeof i!="string")return i;const t=Cu(i);if(t)return t;for(const e of PM){const s=e(i);if(s)return s}return null}function o2(i,t,e,s){i=$t(i);let r;const l=i.getPointResolutionFunc();if(l)r=l(t,e);else{const h=i.getUnits();if(h=="degrees"&&!s||s=="degrees")r=t;else{const u=fc(i,$t("EPSG:4326"));if(!u&&h!=="degrees")r=t*i.getMetersPerUnit();else{let g=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];g=u(g,g,2);const _=l2(g.slice(0,2),g.slice(2,4)),y=l2(g.slice(4,6),g.slice(6,8));r=(_+y)/2}const f=i.getMetersPerUnit();f!==void 0&&(r/=f)}}return r}function O0(i){UM(i),i.forEach(function(t){i.forEach(function(e){t!==e&&pa(t,e,ug)})})}function kM(i,t,e,s){i.forEach(function(r){t.forEach(function(l){pa(r,l,e),pa(l,r,s)})})}function cg(i,t){return i?typeof i=="string"?$t(i):i:$t(t)}function G0(i){return function(t,e,s,r){const l=t.length;s=s!==void 0?s:2,r=r??s,e=e!==void 0?e:new Array(l);for(let h=0;h<l;h+=r){const u=i(t.slice(h,h+s)),f=u.length;for(let g=0,_=r;g<_;++g)e[h+g]=g>=f?t[h+g]:u[g]}return e}}function XM(i,t,e,s){const r=$t(i),l=$t(t);pa(r,l,G0(e)),pa(l,r,G0(s))}function jM(i,t){const e=fg(i,t,"EPSG:4326"),s=e[0];return(s<-180||s>180)&&(e[0]=ya(s+180,360)-180),e}function Ru(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||fc(i,t)===ug)&&e}function fc(i,t){const e=i.getCode(),s=t.getCode();let r=Tu(e,s);if(r)return r;let l=null,h=null;for(const f of IM)l||(l=f(i)),h||(h=f(t));if(!l&&!h)return null;const u="EPSG:4326";if(h)if(l)r=Vd(l.inverse,h.forward);else{const f=Tu(e,u);f&&(r=Vd(f,h.forward))}else{const f=Tu(u,s);f&&(r=Vd(l.inverse,f))}return r&&(zu(i),zu(t),pa(i,t,r)),r}function Vd(i,t){return function(e,s,r,l){return s=i(e,s,r,l),t(s,s,r,l)}}function So(i,t){const e=$t(i),s=$t(t);return fc(e,s)}function fg(i,t,e){const s=So(t,e);if(!s){const r=$t(t).getCode(),l=$t(e).getCode();throw new Error(`No transform available between ${r} and ${l}`)}return s(i,void 0,i.length)}function L0(i,t){return i}function Dn(i,t){return A0&&!Nu(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(A0=!1,Dv("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function kv(i,t){return i}function bs(i,t){return i}function h2(i,t,e){return function(s){let r,l;if(i.canWrapX()){const h=i.getExtent(),u=Ft(h);s=s.slice(0),l=Ov(s,i,u),l&&(s[0]=s[0]-l*u),s[0]=Jt(s[0],h[0],h[2]),s[1]=Jt(s[1],h[1],h[3]),r=e(s)}else r=e(s);return l&&t.canWrapX()&&(r[0]+=l*Ft(t.getExtent())),r}}function BM(){O0(t2),O0(i2),kM(i2,t2,_M,mM)}BM();const Gi={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},xt={IDLE:0,LOADING:1,LOADED:2,ERROR:3},dg=[NaN,NaN,NaN,0];let Wd;function YM(){return Wd||(Wd=ve(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Wd}const qM=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,HM=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ZM=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,KM=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function du(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function go(i){throw new Error('failed to parse "'+i+'" as color')}function Xv(i){if(i.toLowerCase().startsWith("rgb")){const l=i.match(HM)||i.match(qM)||i.match(ZM);if(l){const h=l[4],u=100/255;return[Jt(du(l[1],u)+.5|0,0,255),Jt(du(l[2],u)+.5|0,0,255),Jt(du(l[3],u)+.5|0,0,255),h!==void 0?Jt(du(h,100),0,1):1]}go(i)}if(i.startsWith("#")){if(KM.test(i)){const l=i.substring(1),h=l.length<=4?1:2,u=[0,0,0,255];for(let f=0,g=l.length;f<g;f+=h){let _=parseInt(l.substring(f,f+h),16);h===1&&(_+=_<<4),u[f/h]=_}return u[3]=u[3]/255,u}go(i)}const t=YM();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=i,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=i,t.fillStyle===e&&go(i));const s=t.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return Xv(s);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const r=Array.from(t.getImageData(0,0,1,1).data);return r[3]=lc(r[3]/255,3),r}function VM(i){return typeof i=="string"?i:_g(i)}const WM=1024,Wl={};let Qd=0;function QM(i){if(i.length===4)return i;const t=i.slice();return t[3]=1,t}function $d(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function Jd(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function t0(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function e0(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function u2(i){const t=t0(i[0]),e=t0(i[1]),s=t0(i[2]),r=e0(t*.222488403+e*.716873169+s*.06060791),l=500*(e0(t*.452247074+e*.399439023+s*.148375274)-r),h=200*(r-e0(t*.016863605+e*.117638439+s*.865350722)),u=Math.atan2(h,l)*(180/Math.PI);return[116*r-16,Math.sqrt(l*l+h*h),u<0?u+360:u,i[3]]}function $M(i){const t=(i[0]+16)/116,e=i[1],s=i[2]*Math.PI/180,r=Jd(t),l=Jd(t+e/500*Math.cos(s)),h=Jd(t-e/200*Math.sin(s)),u=$d(l*3.021973625-r*1.617392459-h*.404875592),f=$d(l*-.943766287+r*1.916279586+h*.027607165),g=$d(l*.069407491-r*.22898585+h*1.159737864);return[Jt(u+.5|0,0,255),Jt(f+.5|0,0,255),Jt(g+.5|0,0,255),i[3]]}function gg(i){if(i==="none")return dg;if(Wl.hasOwnProperty(i))return Wl[i];if(Qd>=WM){let e=0;for(const s in Wl)(e++&3)===0&&(delete Wl[s],--Qd)}const t=Xv(i);t.length!==4&&go(i);for(const e of t)isNaN(e)&&go(i);return Wl[i]=t,++Qd,t}function kr(i){return Array.isArray(i)?i:gg(i)}function _g(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let s=i[2];s!=(s|0)&&(s=s+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+e+","+s+","+r+")"}const pt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class dc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Mo(){return!0}function gc(){return!1}function xo(){}function jv(i){let t,e,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!Fs(r,e))&&(s=this,e=r,t=i.apply(this,arguments)),t}}function JM(i){function t(){let e;try{e=i()}catch(s){return Promise.reject(s)}return e instanceof Promise?e:Promise.resolve(e)}return t()}class kn{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class _c extends dc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const s=this.listeners_||(this.listeners_={}),r=s[t]||(s[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",s=e?t:t.type,r=this.listeners_&&this.listeners_[s];if(!r)return;const l=e?new kn(t):t;l.target||(l.target=this.eventTarget_||this);const h=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});s in h||(h[s]=0,u[s]=0),++h[s];let f;for(let g=0,_=r.length;g<_;++g)if("handleEvent"in r[g]?f=r[g].handleEvent(l):f=r[g].call(this,l),f===!1||l.propagationStopped){f=!1;break}if(--h[s]===0){let g=u[s];for(delete u[s];g--;)this.removeEventListener(s,xo);delete h[s]}return f}disposeInternal(){this.listeners_&&Uo(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const s=this.listeners_[t];if(!s)return;const r=s.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[r]=xo,++this.pendingRemovals_[t]):(s.splice(r,1),s.length===0&&delete this.listeners_[t]))}}function Lt(i,t,e,s,r){if(r){const h=e;e=function(u){return i.removeEventListener(t,e),h.call(s??this,u)}}else s&&s!==i&&(e=e.bind(s));const l={target:i,type:t,listener:e};return i.addEventListener(t,e),l}function Fu(i,t,e,s){return Lt(i,t,e,s,!0)}function te(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Uo(i))}function tx(i,t,e){const s=i;let r=!0,l=!1,h=!1;const u=[Fu(s,pt.LOAD,function(){h=!0,l||t()})];return s.src&&Lv?(l=!0,s.decode().then(function(){r&&t()}).catch(function(f){r&&(h?t():e())})):u.push(Fu(s,pt.ERROR,e)),function(){r=!1,u.forEach(te)}}function ex(i,t){return new Promise((e,s)=>{function r(){h(),e(i)}function l(){h(),s(new Error("Image load error"))}function h(){i.removeEventListener("load",r),i.removeEventListener("error",l)}i.addEventListener("load",r),i.addEventListener("error",l)})}function ix(i,t){return t&&(i.src=t),i.src&&Lv?new Promise((e,s)=>i.decode().then(()=>e(i)).catch(r=>i.complete&&i.width?e(i):s(r))):ex(i)}class nx{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const s=this.cache_[e];(t++&3)===0&&!s.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,s){const r=i0(t,e,s);return r in this.cache_?this.cache_[r]:null}getPattern(t,e,s){const r=i0(t,e,s);return r in this.patternCache_?this.patternCache_[r]:null}set(t,e,s,r,l){const h=i0(t,e,s),u=h in this.cache_;this.cache_[h]=r,l&&(r.getImageState()===xt.IDLE&&r.load(),r.getImageState()===xt.LOADING?r.ready().then(()=>{this.patternCache_[h]=Du().createPattern(r.getImage(1),"repeat")}):this.patternCache_[h]=Du().createPattern(r.getImage(1),"repeat")),u||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function i0(i,t,e){const s=e?kr(e):"null";return t+":"+i+":"+s}const Li=new nx;let Ql=null;class Bv extends _c{constructor(t,e,s,r,l){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=l,this.imageState_=r===void 0?xt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===xt.LOADED){Ql||(Ql=ve(1,1,void 0,{willReadFrequently:!0})),Ql.drawImage(this.image_,0,0);try{Ql.getImageData(0,0,1,1),this.tainted_=!1}catch{Ql=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pt.CHANGE)}handleImageError_(){this.imageState_=xt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=xt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],s=ve(t,e);s.fillRect(0,0,t,e),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===xt.IDLE){this.image_||this.initializeImage_(),this.imageState_=xt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ix(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==xt.LOADED)return;const e=this.image_,s=ve(Math.ceil(e.width*t),Math.ceil(e.height*t)),r=s.canvas;s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=VM(this.color_),s.fillRect(0,0,r.width/t,r.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=r}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===xt.LOADED||this.imageState_===xt.ERROR)t();else{const e=()=>{(this.imageState_===xt.LOADED||this.imageState_===xt.ERROR)&&(this.removeEventListener(pt.CHANGE,e),t())};this.addEventListener(pt.CHANGE,e)}})),this.ready_}}function mg(i,t,e,s,r,l){let h=t===void 0?void 0:Li.get(t,e,r);return h||(h=new Bv(i,i&&"src"in i?i.src||void 0:t,e,s,r),Li.set(t,e,r,h,l)),l&&h&&!Li.getPattern(t,e,r)&&Li.set(t,e,r,h,l),h}function on(i){return i?Array.isArray(i)?_g(i):typeof i=="object"&&"src"in i?sx(i):i:null}function sx(i){if(!i.offset||!i.size)return Li.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,e=Li.getPattern(t,void 0,i.color);if(e)return e;const s=Li.get(i.src,"anonymous",null);if(s.getImageState()!==xt.LOADED)return null;const r=ve(i.size[0],i.size[1]);return r.drawImage(s.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),mg(r.canvas,t,void 0,xt.LOADED,i.color,!0),Li.getPattern(t,void 0,i.color)}function Cs(i,t,e,s,r){r=r!==void 0?r:[];let l=0;for(let h=t;h<e;h+=s)r[l++]=i.slice(h,h+s);return r.length=l,r}function wo(i,t,e,s,r){r=r!==void 0?r:[];let l=0;for(let h=0,u=e.length;h<u;++h){const f=e[h];r[l++]=Cs(i,t,f,s,r[l]),t=f}return r.length=l,r}function N0(i,t,e,s,r){r=r!==void 0?r:[];let l=0;for(let h=0,u=e.length;h<u;++h){const f=e[h];r[l++]=f.length===1&&f[0]===t?[]:wo(i,t,f,s,r[l]),t=f[f.length-1]}return r.length=l,r}class Yv{drawCustom(t,e,s,r,l){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,s){}drawFeature(t,e,s){}drawGeometryCollection(t,e,s){}drawLineString(t,e,s){}drawMultiLineString(t,e,s){}drawMultiPoint(t,e,s){}drawMultiPolygon(t,e,s){}drawPoint(t,e,s){}drawPolygon(t,e,s){}drawText(t,e,s){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Xr={PROPERTYCHANGE:"propertychange"};class ko extends _c{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pt.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const s=t.length,r=new Array(s);for(let l=0;l<s;++l)r[l]=Lt(this,t[l],e);return r}return Lt(this,t,e)}onceInternal(t,e){let s;if(Array.isArray(t)){const r=t.length;s=new Array(r);for(let l=0;l<r;++l)s[l]=Fu(this,t[l],e)}else s=Fu(this,t,e);return e.ol_key=s,s}unInternal(t,e){const s=e.ol_key;if(s)ax(s);else if(Array.isArray(t))for(let r=0,l=t.length;r<l;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}ko.prototype.on;ko.prototype.once;ko.prototype.un;function ax(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)te(i[t]);else te(i)}function Et(){throw new Error("Unimplemented abstract method.")}let rx=0;function It(i){return i.ol_uid||(i.ol_uid=String(++rx))}class c2 extends kn{constructor(t,e,s){super(t),this.key=e,this.oldValue=s}}class dn extends ko{constructor(t){super(),this.on,this.once,this.un,It(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new c2(s,t,e)),s=Xr.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new c2(s,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,s){const r=this.values_||(this.values_={});if(s)r[t]=e;else{const l=r[t];r[t]=e,l!==e&&this.notify(t,l)}}setProperties(t,e){for(const s in t)this.set(s,t[s],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],Ea(this.values_)&&(this.values_=null),e||this.notify(t,s)}}}const gu="ol-hidden",mc="ol-unselectable",yg="ol-control",f2="ol-collapsed",lx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),d2=["style","variant","weight","size","lineHeight","family"],D0={normal:400,bold:700},I0=function(i){const t=i.match(lx);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let s=0,r=d2.length;s<r;++s){const l=t[s+1];l!==void 0&&(e[d2[s]]=typeof l=="string"?l.trim():l)}return isNaN(Number(e.weight))&&e.weight in D0&&(e.weight=D0[e.weight]),e.families=e.family.split(/,\s?/).map(s=>s.trim().replace(/^['"]|['"]$/g,"")),e},qv="10px sans-serif",ti="#000",jr="round",zn=[],Fn=0,Br="round",bo=10,Co="#000",To="center",Uu="middle",fa=[0,0,0,0],Ro=1,xr=new dn;let $l=null,g2;const P0={},ox=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function hx(i,t,e){return`${i} ${t} 16px "${e}"`}const ux=function(){let t,e;async function s(l){await e.ready;const h=await e.load(l);if(h.length===0)return!1;const u=I0(l),f=u.families[0].toLowerCase(),g=u.weight;return h.some(_=>{const y=_.family.replace(/^['"]|['"]$/g,"").toLowerCase(),v=D0[_.weight]||_.weight;return y===f&&_.style===u.style&&v==g})}async function r(){await e.ready;let l=!0;const h=xr.getProperties(),u=Object.keys(h).filter(f=>h[f]<100);for(let f=u.length-1;f>=0;--f){const g=u[f];let _=h[g];_<100&&(await s(g)?(Uo(P0),xr.set(g,100)):(_+=10,xr.set(g,_,!0),_<100&&(l=!1)))}t=void 0,l||(t=setTimeout(r,100))}return async function(l){e||(e=rg?self.fonts:document.fonts);const h=I0(l);if(!h)return;const u=h.families;let f=!1;for(const g of u){if(ox.has(g))continue;const _=hx(h.style,h.weight,g);xr.get(_)===void 0&&(xr.set(_,0,!0),f=!0)}f&&(clearTimeout(t),t=setTimeout(r,100))}}(),cx=function(){let i;return function(t){let e=P0[t];if(e==null){if(rg){const s=I0(t),r=Hv(t,"g");e=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);P0[t]=e}return e}}();function Hv(i,t){return $l||($l=ve(1,1)),i!=g2&&($l.font=i,g2=$l.font),$l.measureText(t)}function Zv(i,t){return Hv(i,t).width}function _2(i,t,e){if(t in e)return e[t];const s=t.split(`
`).reduce((r,l)=>Math.max(r,Zv(i,l)),0);return e[t]=s,s}function fx(i,t){const e=[],s=[],r=[];let l=0,h=0,u=0,f=0;for(let g=0,_=t.length;g<=_;g+=2){const y=t[g];if(y===`
`||g===_){l=Math.max(l,h),r.push(h),h=0,u+=f,f=0;continue}const v=t[g+1]||i.font,p=Zv(v,y);e.push(p),h+=p;const S=cx(v);s.push(S),f=Math.max(f,S)}return{width:l,height:u,widths:e,heights:s,lineWidths:r}}function dx(i,t,e,s,r,l,h,u,f,g,_){i.save(),e!==1&&(i.globalAlpha===void 0?i.globalAlpha=y=>y.globalAlpha*=e:i.globalAlpha*=e),t&&i.transform.apply(i,t),s.contextInstructions?(i.translate(f,g),i.scale(_[0],_[1]),gx(s,i)):_[0]<0||_[1]<0?(i.translate(f,g),i.scale(_[0],_[1]),i.drawImage(s,r,l,h,u,0,0,h,u)):i.drawImage(s,r,l,h,u,f,g,h*_[0],u*_[1]),i.restore()}function gx(i,t){const e=i.contextInstructions;for(let s=0,r=e.length;s<r;s+=2)Array.isArray(e[s+1])?t[e[s]].apply(t,e[s+1]):t[e[s]]=e[s+1]}const dt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},_u=[dt.FILL],Ts=[dt.STROKE],da=[dt.BEGIN_PATH],m2=[dt.CLOSE_PATH];class Xo extends Yv{constructor(t,e,s,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(s){return s*e})}appendFlatPointCoordinates(t,e){const s=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,l=this.coordinates;let h=l.length;for(let u=0,f=t.length;u<f;u+=e)r[0]=t[u],r[1]=t[u+1],Fr(s,r)&&(l[h++]=r[0],l[h++]=r[1]);return h}appendFlatLineCoordinates(t,e,s,r,l,h){const u=this.coordinates;let f=u.length;const g=this.getBufferedMaxExtent();h&&(e+=r);let _=t[e],y=t[e+1];const v=this.tmpCoordinate_;let p=!0,S,w,x;for(S=e+r;S<s;S+=r)v[0]=t[S],v[1]=t[S+1],x=w0(g,v),x!==w?(p&&(u[f++]=_,u[f++]=y,p=!1),u[f++]=v[0],u[f++]=v[1]):x===be.INTERSECTING?(u[f++]=v[0],u[f++]=v[1],p=!1):p=!0,_=v[0],y=v[1],w=x;return(l&&p||S===e+r)&&(u[f++]=_,u[f++]=y),f}drawCustomCoordinates_(t,e,s,r,l){for(let h=0,u=s.length;h<u;++h){const f=s[h],g=this.appendFlatLineCoordinates(t,e,f,r,!1,!1);l.push(g),e=f}return e}drawCustom(t,e,s,r,l){this.beginGeometry(t,e,l);const h=t.getType(),u=t.getStride(),f=this.coordinates.length;let g,_,y,v,p;switch(h){case"MultiPolygon":g=t.getOrientedFlatCoordinates(),v=[];const S=t.getEndss();p=0;for(let w=0,x=S.length;w<x;++w){const b=[];p=this.drawCustomCoordinates_(g,p,S[w],u,b),v.push(b)}this.instructions.push([dt.CUSTOM,f,v,t,s,N0,l]),this.hitDetectionInstructions.push([dt.CUSTOM,f,v,t,r||s,N0,l]);break;case"Polygon":case"MultiLineString":y=[],g=h=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(g,0,t.getEnds(),u,y),this.instructions.push([dt.CUSTOM,f,y,t,s,wo,l]),this.hitDetectionInstructions.push([dt.CUSTOM,f,y,t,r||s,wo,l]);break;case"LineString":case"Circle":g=t.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,u,!1,!1),this.instructions.push([dt.CUSTOM,f,_,t,s,Cs,l]),this.hitDetectionInstructions.push([dt.CUSTOM,f,_,t,r||s,Cs,l]);break;case"MultiPoint":g=t.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,u),_>f&&(this.instructions.push([dt.CUSTOM,f,_,t,s,Cs,l]),this.hitDetectionInstructions.push([dt.CUSTOM,f,_,t,r||s,Cs,l]));break;case"Point":g=t.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([dt.CUSTOM,f,_,t,s,void 0,l]),this.hitDetectionInstructions.push([dt.CUSTOM,f,_,t,r||s,void 0,l]);break}this.endGeometry(e)}beginGeometry(t,e,s){this.beginGeometryInstruction1_=[dt.BEGIN_GEOMETRY,e,0,t,s],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[dt.BEGIN_GEOMETRY,e,0,t,s],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const s=t.length;let r,l,h=-1;for(e=0;e<s;++e)r=t[e],l=r[0],l==dt.END_GEOMETRY?h=e:l==dt.BEGIN_GEOMETRY&&(r[2]=e,$S(this.hitDetectionInstructions,h,e),h=-1)}fillStyleToState(t,e={}){if(t){const s=t.getColor();e.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,e.fillStyle=on(s||ti)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const s=t.getColor();e.strokeStyle=on(s||Co);const r=t.getLineCap();e.lineCap=r!==void 0?r:jr;const l=t.getLineDash();e.lineDash=l?l.slice():zn;const h=t.getLineDashOffset();e.lineDashOffset=h||Fn;const u=t.getLineJoin();e.lineJoin=u!==void 0?u:Br;const f=t.getWidth();e.lineWidth=f!==void 0?f:Ro;const g=t.getMiterLimit();e.miterLimit=g!==void 0?g:bo,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const s=this.state;this.fillStyleToState(t,s),this.strokeStyleToState(e,s)}createFill(t){const e=t.fillStyle,s=[dt.SET_FILL_STYLE,e];return typeof e!="string"&&s.push(t.fillPatternScale),s}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[dt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const s=t.fillStyle;(typeof s!="string"||t.currentFillStyle!=s)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=s)}updateStrokeStyle(t,e){const s=t.strokeStyle,r=t.lineCap,l=t.lineDash,h=t.lineDashOffset,u=t.lineJoin,f=t.lineWidth,g=t.miterLimit;(t.currentStrokeStyle!=s||t.currentLineCap!=r||l!=t.currentLineDash&&!Fs(t.currentLineDash,l)||t.currentLineDashOffset!=h||t.currentLineJoin!=u||t.currentLineWidth!=f||t.currentMiterLimit!=g)&&(e.call(this,t),t.currentStrokeStyle=s,t.currentLineCap=r,t.currentLineDash=l,t.currentLineDashOffset=h,t.currentLineJoin=u,t.currentLineWidth=f,t.currentMiterLimit=g)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[dt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Mv(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;eg(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class _x extends Xo{constructor(t,e,s,r){super(t,e,s,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,s){if(!this.image_||this.maxExtent&&!Fr(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,s);const r=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length,u=this.appendFlatPointCoordinates(r,l);this.instructions.push([dt.DRAW_IMAGE,h,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,h,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,s){if(!this.image_)return;this.beginGeometry(t,e,s);const r=t.getFlatCoordinates(),l=[];for(let f=0,g=r.length;f<g;f+=t.getStride())(!this.maxExtent||Fr(this.maxExtent,r.slice(f,f+2)))&&l.push(r[f],r[f+1]);const h=this.coordinates.length,u=this.appendFlatPointCoordinates(l,2);this.instructions.push([dt.DRAW_IMAGE,h,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,h,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const s=t.getAnchor(),r=t.getSize(),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class mx extends Xo{constructor(t,e,s,r){super(t,e,s,r)}drawFlatCoordinates_(t,e,s,r){const l=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,s,r,!1,!1),u=[dt.MOVE_TO_LINE_TO,l,h];return this.instructions.push(u),this.hitDetectionInstructions.push(u),s}drawLineString(t,e,s){const r=this.state,l=r.strokeStyle,h=r.lineWidth;if(l===void 0||h===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,s),this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zn,Fn],da);const u=t.getFlatCoordinates(),f=t.getStride();this.drawFlatCoordinates_(u,0,u.length,f),this.hitDetectionInstructions.push(Ts),this.endGeometry(e)}drawMultiLineString(t,e,s){const r=this.state,l=r.strokeStyle,h=r.lineWidth;if(l===void 0||h===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,s),this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zn,Fn],da);const u=t.getEnds(),f=t.getFlatCoordinates(),g=t.getStride();let _=0;for(let y=0,v=u.length;y<v;++y)_=this.drawFlatCoordinates_(f,_,u[y],g);this.hitDetectionInstructions.push(Ts),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ts),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ts),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(da)}}function yc(i,t,e,s,r,l,h){const u=(e-t)/s;if(u<3){for(;t<e;t+=s)l[h++]=i[t],l[h++]=i[t+1];return h}const f=new Array(u);f[0]=1,f[u-1]=1;const g=[t,e-s];let _=0;for(;g.length>0;){const y=g.pop(),v=g.pop();let p=0;const S=i[v],w=i[v+1],x=i[y],b=i[y+1];for(let R=v+s;R<y;R+=s){const L=i[R],O=i[R+1],A=sM(L,O,S,w,x,b);A>p&&(_=R,p=A)}p>r&&(f[(_-t)/s]=1,v+s<_&&g.push(v,_),_+s<y&&g.push(_,y))}for(let y=0;y<u;++y)f[y]&&(l[h++]=i[t+y*s],l[h++]=i[t+y*s+1]);return h}function Kv(i,t,e,s,r,l,h,u){for(let f=0,g=e.length;f<g;++f){const _=e[f];h=yc(i,t,_,s,r,l,h),u.push(h),t=_}return h}function la(i,t){return t*Math.round(i/t)}function yx(i,t,e,s,r,l,h){if(t==e)return h;let u=la(i[t],r),f=la(i[t+1],r);t+=s,l[h++]=u,l[h++]=f;let g,_;do if(g=la(i[t],r),_=la(i[t+1],r),t+=s,t==e)return l[h++]=g,l[h++]=_,h;while(g==u&&_==f);for(;t<e;){const y=la(i[t],r),v=la(i[t+1],r);if(t+=s,y==g&&v==_)continue;const p=g-u,S=_-f,w=y-u,x=v-f;if(p*x==S*w&&(p<0&&w<p||p==w||p>0&&w>p)&&(S<0&&x<S||S==x||S>0&&x>S)){g=y,_=v;continue}l[h++]=g,l[h++]=_,u=g,f=_,g=y,_=v}return l[h++]=g,l[h++]=_,h}function vg(i,t,e,s,r,l,h,u){for(let f=0,g=e.length;f<g;++f){const _=e[f];h=yx(i,t,_,s,r,l,h),u.push(h),t=_}return h}function vx(i,t,e,s,r,l,h,u){for(let f=0,g=e.length;f<g;++f){const _=e[f],y=[];h=vg(i,t,_,s,r,l,h,y),u.push(y),t=_[_.length-1]}return h}class y2 extends Xo{constructor(t,e,s,r){super(t,e,s,r)}drawFlatCoordinatess_(t,e,s,r){const l=this.state,h=l.fillStyle!==void 0,u=l.strokeStyle!==void 0,f=s.length;this.instructions.push(da),this.hitDetectionInstructions.push(da);for(let g=0;g<f;++g){const _=s[g],y=this.coordinates.length,v=this.appendFlatLineCoordinates(t,e,_,r,!0,!u),p=[dt.MOVE_TO_LINE_TO,y,v];this.instructions.push(p),this.hitDetectionInstructions.push(p),u&&(this.instructions.push(m2),this.hitDetectionInstructions.push(m2)),e=_}return h&&(this.instructions.push(_u),this.hitDetectionInstructions.push(_u)),u&&(this.instructions.push(Ts),this.hitDetectionInstructions.push(Ts)),e}drawCircle(t,e,s){const r=this.state,l=r.fillStyle,h=r.strokeStyle;if(l===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,ti]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zn,Fn]);const u=t.getFlatCoordinates(),f=t.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,f,!1,!1);const _=[dt.CIRCLE,g];this.instructions.push(da,_),this.hitDetectionInstructions.push(da,_),r.fillStyle!==void 0&&(this.instructions.push(_u),this.hitDetectionInstructions.push(_u)),r.strokeStyle!==void 0&&(this.instructions.push(Ts),this.hitDetectionInstructions.push(Ts)),this.endGeometry(e)}drawPolygon(t,e,s){const r=this.state,l=r.fillStyle,h=r.strokeStyle;if(l===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,ti]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zn,Fn]);const u=t.getEnds(),f=t.getOrientedFlatCoordinates(),g=t.getStride();this.drawFlatCoordinatess_(f,0,u,g),this.endGeometry(e)}drawMultiPolygon(t,e,s){const r=this.state,l=r.fillStyle,h=r.strokeStyle;if(l===void 0&&h===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,s),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,ti]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,zn,Fn]);const u=t.getEndss(),f=t.getOrientedFlatCoordinates(),g=t.getStride();let _=0;for(let y=0,v=u.length;y<v;++y)_=this.drawFlatCoordinatess_(f,_,u[y],g);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let s=0,r=e.length;s<r;++s)e[s]=la(e[s],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function Ex(i,t,e,s,r){const l=[];let h=e,u=0,f=t.slice(e,2);for(;u<i&&h+r<s;){const[g,_]=f.slice(-2),y=t[h+r],v=t[h+r+1],p=Math.sqrt((y-g)*(y-g)+(v-_)*(v-_));if(u+=p,u>=i){const S=(i-u+p)/p,w=yi(g,y,S),x=yi(_,v,S);f.push(w,x),l.push(f),f=[w,x],u==i&&(h+=r),u=0}else if(u<i)f.push(t[h+r],t[h+r+1]),h+=r;else{const S=p-u,w=yi(g,y,S/p),x=yi(_,v,S/p);f.push(w,x),l.push(f),f=[w,x],u=0,h+=r}}return u>0&&l.push(f),l}function px(i,t,e,s,r){let l=e,h=e,u=0,f=0,g=e,_,y,v,p,S,w,x,b,R,L;for(y=e;y<s;y+=r){const O=t[y],A=t[y+1];S!==void 0&&(R=O-S,L=A-w,p=Math.sqrt(R*R+L*L),x!==void 0&&(f+=v,_=Math.acos((x*R+b*L)/(v*p)),_>i&&(f>u&&(u=f,l=g,h=y),f=0,g=y-r)),v=p,x=R,b=L),S=O,w=A}return f+=p,f>u?[g,y]:[l,h]}const ku={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Sx extends Xo{constructor(t,e,s,r){super(t,e,s,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ti]={fillStyle:ti},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,s){const r=this.textFillState_,l=this.textStrokeState_,h=this.textState_;if(this.text_===""||!h||!r&&!l)return;const u=this.coordinates;let f=u.length;const g=t.getType();let _=null,y=t.getStride();if(h.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!ni(this.maxExtent,t.getExtent()))return;let v;if(_=t.getFlatCoordinates(),g=="LineString")v=[_.length];else if(g=="MultiLineString")v=t.getEnds();else if(g=="Polygon")v=t.getEnds().slice(0,1);else if(g=="MultiPolygon"){const x=t.getEndss();v=[];for(let b=0,R=x.length;b<R;++b)v.push(x[b][0])}this.beginGeometry(t,e,s);const p=h.repeat,S=p?void 0:h.textAlign;let w=0;for(let x=0,b=v.length;x<b;++x){let R;p?R=Ex(p*this.resolution,_,w,v[x],y):R=[_.slice(w,v[x])];for(let L=0,O=R.length;L<O;++L){const A=R[L];let k=0,j=A.length;if(S==null){const Z=px(h.maxAngle,A,0,A.length,2);k=Z[0],j=Z[1]}for(let Z=k;Z<j;Z+=y)u.push(A[Z],A[Z+1]);const B=u.length;w=v[x],this.drawChars_(f,B),f=B}}this.endGeometry(e)}else{let v=h.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=t.getFlatCoordinates();break;case"LineString":_=t.getFlatMidpoint();break;case"Circle":_=t.getCenter();break;case"MultiLineString":_=t.getFlatMidpoints(),y=2;break;case"Polygon":_=t.getFlatInteriorPoint(),h.overflow||v.push(_[2]/this.resolution),y=3;break;case"MultiPolygon":const O=t.getFlatInteriorPoints();_=[];for(let A=0,k=O.length;A<k;A+=3)h.overflow||v.push(O[A+2]/this.resolution),_.push(O[A],O[A+1]);if(_.length===0)return;y=2;break}const p=this.appendFlatPointCoordinates(_,y);if(p===f)return;if(v&&(p-f)/2!==_.length/y){let O=f/2;v=v.filter((A,k)=>{const j=u[(O+k)*2]===_[k*y]&&u[(O+k)*2+1]===_[k*y+1];return j||--O,j})}this.saveTextStates_();const S=h.backgroundFill?this.createFill(this.fillStyleToState(h.backgroundFill)):null,w=h.backgroundStroke?this.createStroke(this.strokeStyleToState(h.backgroundStroke)):null;this.beginGeometry(t,e,s);let x=h.padding;if(x!=fa&&(h.scale[0]<0||h.scale[1]<0)){let O=h.padding[0],A=h.padding[1],k=h.padding[2],j=h.padding[3];h.scale[0]<0&&(A=-A,j=-j),h.scale[1]<0&&(O=-O,k=-k),x=[O,A,k,j]}const b=this.pixelRatio;this.instructions.push([dt.DRAW_IMAGE,f,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,x==fa?fa:x.map(function(O){return O*b}),S,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]);const R=1/b,L=S?S.slice(0):null;L&&(L[1]=ti),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,f,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,x,L,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ti:this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,s=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||To,justify:e.justify,textBaseline:e.textBaseline||Uu,scale:e.scale});const h=this.fillKey_;s&&(h in this.fillStates||(this.fillStates[h]={fillStyle:s.fillStyle}))}drawChars_(t,e){const s=this.textStrokeState_,r=this.textState_,l=this.strokeKey_,h=this.textKey_,u=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,g=ku[r.textBaseline],_=this.textOffsetY_*f,y=this.text_,v=s?s.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([dt.DRAW_CHARS,t,e,g,r.overflow,u,r.maxAngle,f,_,l,v*f,y,h,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([dt.DRAW_CHARS,t,e,g,r.overflow,u&&ti,r.maxAngle,f,_,l,v*f,y,h,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let s,r,l;if(!t)this.text_="";else{const h=t.getFill();h?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=on(h.getColor()||ti)):(r=null,this.textFillState_=r);const u=t.getStroke();if(!u)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=u.getLineDash(),x=u.getLineDashOffset(),b=u.getWidth(),R=u.getMiterLimit();l.lineCap=u.getLineCap()||jr,l.lineDash=w?w.slice():zn,l.lineDashOffset=x===void 0?Fn:x,l.lineJoin=u.getLineJoin()||Br,l.lineWidth=b===void 0?Ro:b,l.miterLimit=R===void 0?bo:R,l.strokeStyle=on(u.getColor()||Co)}s=this.textState_;const f=t.getFont()||qv;ux(f);const g=t.getScaleArray();s.overflow=t.getOverflow(),s.font=f,s.maxAngle=t.getMaxAngle(),s.placement=t.getPlacement(),s.textAlign=t.getTextAlign(),s.repeat=t.getRepeat(),s.justify=t.getJustify(),s.textBaseline=t.getTextBaseline()||Uu,s.backgroundFill=t.getBackgroundFill(),s.backgroundStroke=t.getBackgroundStroke(),s.padding=t.getPadding()||fa,s.scale=g===void 0?[1,1]:g;const _=t.getOffsetX(),y=t.getOffsetY(),v=t.getRotateWithView(),p=t.getKeepUpright(),S=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=v===void 0?!1:v,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=S===void 0?0:S,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:It(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.repeat||"?")+(s.justify||"?")+(s.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+It(r.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Mx={Circle:y2,Default:Xo,Image:_x,LineString:mx,Polygon:y2,Text:Sx};class xx{constructor(t,e,s,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=s,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const s=this.buildersByZIndex_[e];for(const r in s){const l=s[r].finish();t[e][r]=l}}return t}getBuilder(t,e){const s=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[s];r===void 0&&(r={},this.buildersByZIndex_[s]=r);let l=r[e];if(l===void 0){const h=Mx[e];l=new h(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=l}return l}}function Os(i,t,e,s,r,l,h){l=l||[],h=h||2;let u=0;for(let f=t;f<e;f+=s){const g=i[f],_=i[f+1];l[u++]=r[0]*g+r[2]*_+r[4],l[u++]=r[1]*g+r[3]*_+r[5];for(let y=2;y<h;y++)l[u++]=i[f+y]}return l&&l.length!=u&&(l.length=u),l}function Vv(i,t,e,s,r,l,h){h=h||[];const u=Math.cos(r),f=Math.sin(r),g=l[0],_=l[1];let y=0;for(let v=t;v<e;v+=s){const p=i[v]-g,S=i[v+1]-_;h[y++]=g+p*u-S*f,h[y++]=_+p*f+S*u;for(let w=v+2;w<v+s;++w)h[y++]=i[w]}return h&&h.length!=y&&(h.length=y),h}function wx(i,t,e,s,r,l,h,u){u=u||[];const f=h[0],g=h[1];let _=0;for(let y=t;y<e;y+=s){const v=i[y]-f,p=i[y+1]-g;u[_++]=f+r*v,u[_++]=g+l*p;for(let S=y+2;S<y+s;++S)u[_++]=i[S]}return u&&u.length!=_&&(u.length=_),u}function bx(i,t,e,s,r,l,h){h=h||[];let u=0;for(let f=t;f<e;f+=s){h[u++]=i[f]+r,h[u++]=i[f+1]+l;for(let g=f+2;g<f+s;++g)h[u++]=i[g]}return h&&h.length!=u&&(h.length=u),h}function jt(i,t){if(!i)throw new Error(t)}new Array(6);function Hi(){return[1,0,0,1,0,0]}function Cx(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function Ce(i,t){const e=t[0],s=t[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t}function Un(i,t,e,s,r,l,h,u){const f=Math.sin(l),g=Math.cos(l);return i[0]=s*g,i[1]=r*f,i[2]=-s*f,i[3]=r*g,i[4]=h*s*g-u*s*f+t,i[5]=h*r*f+u*r*g+e,i}function Wv(i,t){const e=Tx(t);jt(e!==0,"Transformation matrix cannot be inverted");const s=t[0],r=t[1],l=t[2],h=t[3],u=t[4],f=t[5];return i[0]=h/e,i[1]=-r/e,i[2]=-l/e,i[3]=s/e,i[4]=(l*f-h*u)/e,i[5]=-(s*f-r*u)/e,i}function Tx(i){return i[0]*i[3]-i[1]*i[2]}const Rx=[1e5,1e5,1e5,1e5,2,2];function Ax(i){return"matrix("+i.join(", ")+")"}function v2(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function Ox(i,t){const e=v2(i),s=v2(t);for(let r=0;r<6;++r)if(Math.round((e[r]-s[r])*Rx[r])!==0)return!1;return!0}function Eg(i,t,e,s){let r=i[t],l=i[t+1],h=0;for(let u=t+s;u<e;u+=s){const f=i[u],g=i[u+1];h+=Math.sqrt((f-r)*(f-r)+(g-l)*(g-l)),r=f,l=g}return h}function Gx(i,t,e,s,r,l,h,u,f,g,_,y,v=!0){let p=i[t],S=i[t+1],w=0,x=0,b=0,R=0;function L(){w=p,x=S,t+=s,p=i[t],S=i[t+1],R+=b,b=Math.sqrt((p-w)*(p-w)+(S-x)*(S-x))}do L();while(t<e-s&&R+b<l);let O=b===0?0:(l-R)/b;const A=yi(w,p,O),k=yi(x,S,O),j=t-s,B=R,Z=l+u*f(g,r,_);for(;t<e-s&&R+b<Z;)L();O=b===0?0:(Z-R)/b;const J=yi(w,p,O),st=yi(x,S,O);let tt=!1;if(v)if(y){const K=[A,k,J,st];Vv(K,0,4,2,y,K,K),tt=K[0]>K[2]}else tt=A>J;const it=Math.PI,lt=[],ct=j+s===t;t=j,b=0,R=B,p=i[t],S=i[t+1];let D;if(ct){L(),D=Math.atan2(S-x,p-w),tt&&(D+=D>0?-it:it);const K=(J+A)/2,W=(st+k)/2;return lt[0]=[K,W,(Z-l)/2,D,r],lt}r=r.replace(/\n/g," ");for(let K=0,W=r.length;K<W;){L();let at=Math.atan2(S-x,p-w);if(tt&&(at+=at>0?-it:it),D!==void 0){let ft=at-D;if(ft+=ft>it?-2*it:ft<-it?2*it:0,Math.abs(ft)>h)return null}D=at;const C=K;let X=0;for(;K<W;++K){const ft=tt?W-K-1:K,ht=u*f(g,r[ft],_);if(t+s<e&&R+b<l+X+ht/2)break;X+=ht}if(K===C)continue;const z=tt?r.substring(W-C,W-K):r.substring(C,K);O=b===0?0:(l+X/2-R)/b;const $=yi(w,p,O),rt=yi(x,S,O);lt.push([$,rt,X/2,at,z]),l+=X}return lt}class Qv{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Du(),{get:(t,e)=>{if(typeof Du()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,s)=>(this.push_(e,s),!0)})}push_(...t){const e=this.instructions_,s=this.zIndex+this.offset_;e[s]||(e[s]=[]),e[s].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let s=0,r=e.length;s<r;++s){const l=e[s];if(typeof l=="function"){l(t);continue}const h=e[++s];if(typeof t[l]=="function")t[l](...h);else{if(typeof h=="function"){t[l]=h(t);continue}t[l]=h}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const yr=Di(),ys=[],Ln=[],Nn=[],vs=[];function E2(i){return i[3].declutterBox}const p2=new RegExp("[-----]");function n0(i,t){return t==="start"?t=p2.test(i)?"right":"left":t==="end"&&(t=p2.test(i)?"left":"right"),ku[t]}function Lx(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}function Nx(i,t,e){return e%2===0&&(i+=t),i}class Dx{constructor(t,e,s,r,l){this.overlaps=s,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Hi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new Qv:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,s,r){const l=t+e+s+r;if(this.labels_[l])return this.labels_[l];const h=r?this.strokeStates[r]:null,u=s?this.fillStates[s]:null,f=this.textStates[e],g=this.pixelRatio,_=[f.scale[0]*g,f.scale[1]*g],y=f.justify?ku[f.justify]:n0(Array.isArray(t)?t[0]:t,f.textAlign||To),v=r&&h.lineWidth?h.lineWidth:0,p=Array.isArray(t)?t:String(t).split(`
`).reduce(Lx,[]),{width:S,height:w,widths:x,heights:b,lineWidths:R}=fx(f,p),L=S+v,O=[],A=(L+2)*_[0],k=(w+v)*_[1],j={width:A<0?Math.floor(A):Math.ceil(A),height:k<0?Math.floor(k):Math.ceil(k),contextInstructions:O};(_[0]!=1||_[1]!=1)&&O.push("scale",_),r&&(O.push("strokeStyle",h.strokeStyle),O.push("lineWidth",v),O.push("lineCap",h.lineCap),O.push("lineJoin",h.lineJoin),O.push("miterLimit",h.miterLimit),O.push("setLineDash",[h.lineDash]),O.push("lineDashOffset",h.lineDashOffset)),s&&O.push("fillStyle",u.fillStyle),O.push("textBaseline","middle"),O.push("textAlign","center");const B=.5-y;let Z=y*L+B*v;const J=[],st=[];let tt=0,it=0,lt=0,ct=0,D;for(let K=0,W=p.length;K<W;K+=2){const at=p[K];if(at===`
`){it+=tt,tt=0,Z=y*L+B*v,++ct;continue}const C=p[K+1]||f.font;C!==D&&(r&&J.push("font",C),s&&st.push("font",C),D=C),tt=Math.max(tt,b[lt]);const X=[at,Z+B*x[lt]+y*(x[lt]-R[ct]),.5*(v+tt)+it];Z+=x[lt],r&&J.push("strokeText",X),s&&st.push("fillText",X),++lt}return Array.prototype.push.apply(O,J),Array.prototype.push.apply(O,st),this.labels_[l]=j,j}replayTextBackground_(t,e,s,r,l,h,u){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,l),t.lineTo.apply(t,e),h&&(this.alignAndScaleFill_=h[2],t.fillStyle=h[1],this.fill_(t)),u&&(this.setStrokeStyle_(t,u),t.stroke())}calculateImageOrLabelDimensions_(t,e,s,r,l,h,u,f,g,_,y,v,p,S,w,x){u*=v[0],f*=v[1];let b=s-u,R=r-f;const L=l+g>t?t-g:l,O=h+_>e?e-_:h,A=S[3]+L*v[0]+S[1],k=S[0]+O*v[1]+S[2],j=b-S[3],B=R-S[0];(w||y!==0)&&(ys[0]=j,vs[0]=j,ys[1]=B,Ln[1]=B,Ln[0]=j+A,Nn[0]=Ln[0],Nn[1]=B+k,vs[1]=Nn[1]);let Z;return y!==0?(Z=Un(Hi(),s,r,1,1,y,-s,-r),Ce(Z,ys),Ce(Z,Ln),Ce(Z,Nn),Ce(Z,vs),Ns(Math.min(ys[0],Ln[0],Nn[0],vs[0]),Math.min(ys[1],Ln[1],Nn[1],vs[1]),Math.max(ys[0],Ln[0],Nn[0],vs[0]),Math.max(ys[1],Ln[1],Nn[1],vs[1]),yr)):Ns(Math.min(j,j+A),Math.min(B,B+k),Math.max(j,j+A),Math.max(B,B+k),yr),p&&(b=Math.round(b),R=Math.round(R)),{drawImageX:b,drawImageY:R,drawImageW:L,drawImageH:O,originX:g,originY:_,declutterBox:{minX:yr[0],minY:yr[1],maxX:yr[2],maxY:yr[3],value:x},canvasTransform:Z,scale:v}}replayImageOrLabel_(t,e,s,r,l,h,u){const f=!!(h||u),g=r.declutterBox,_=u?u[2]*r.scale[0]/2:0;return g.minX-_<=e[0]&&g.maxX+_>=0&&g.minY-_<=e[1]&&g.maxY+_>=0&&(f&&this.replayTextBackground_(t,ys,Ln,Nn,vs,h,u),dx(t,r.canvasTransform,l,s,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const s=Ce(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(s[0]%r,s[1]%r),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,s,r){const l=this.textStates[e],h=this.createLabel(t,e,r,s),u=this.strokeStates[s],f=this.pixelRatio,g=n0(Array.isArray(t)?t[0]:t,l.textAlign||To),_=ku[l.textBaseline||Uu],y=u&&u.lineWidth?u.lineWidth:0,v=h.width/f-2*l.scale[0],p=g*v+2*(.5-g)*y,S=_*h.height/f+2*(.5-_)*y;return{label:h,anchorX:p,anchorY:S}}execute_(t,e,s,r,l,h,u,f){const g=this.zIndexContext_;let _;this.pixelCoordinates_&&Fs(s,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=Os(this.coordinates,0,this.coordinates.length,2,s,this.pixelCoordinates_),Cx(this.renderedTransform_,s));let y=0;const v=r.length;let p=0,S,w,x,b,R,L,O,A,k,j,B,Z,J,st=0,tt=0;const it=this.coordinateCache_,lt=this.viewRotation_,ct=Math.round(Math.atan2(-s[1],s[0])*1e12)/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:lt},K=this.instructions!=r||this.overlaps?0:200;let W,at,C,X;for(;y<v;){const z=r[y];switch(z[0]){case dt.BEGIN_GEOMETRY:W=z[1],X=z[3],W.getGeometry()?u!==void 0&&!ni(u,X.getExtent())?y=z[2]+1:++y:y=z[2],g&&(g.zIndex=z[4]);break;case dt.BEGIN_PATH:st>K&&(this.fill_(t),st=0),tt>K&&(t.stroke(),tt=0),!st&&!tt&&(t.beginPath(),R=NaN,L=NaN),++y;break;case dt.CIRCLE:p=z[1];const rt=_[p],ft=_[p+1],ht=_[p+2],Ut=_[p+3],Ot=ht-rt,fe=Ut-ft,Te=Math.sqrt(Ot*Ot+fe*fe);t.moveTo(rt+Te,ft),t.arc(rt,ft,Te,0,2*Math.PI,!0),++y;break;case dt.CLOSE_PATH:t.closePath(),++y;break;case dt.CUSTOM:p=z[1],S=z[2];const gn=z[3],ks=z[4],_n=z[5];D.geometry=gn,D.feature=W,y in it||(it[y]=[]);const Ii=it[y];_n?_n(_,p,S,2,Ii):(Ii[0]=_[p],Ii[1]=_[p+1],Ii.length=2),g&&(g.zIndex=z[6]),ks(Ii,D),++y;break;case dt.DRAW_IMAGE:p=z[1],S=z[2],k=z[3],w=z[4],x=z[5];let Ze=z[6];const Ei=z[7],Re=z[8],Bn=z[9],Yn=z[10];let Wi=z[11];const Pi=z[12];let qn=z[13];b=z[14]||"declutter";const oe=z[15];if(!k&&z.length>=20){j=z[19],B=z[20],Z=z[21],J=z[22];const Xe=this.drawLabelWithPointPlacement_(j,B,Z,J);k=Xe.label,z[3]=k;const Fi=z[23];w=(Xe.anchorX-Fi)*this.pixelRatio,z[4]=w;const Ie=z[24];x=(Xe.anchorY-Ie)*this.pixelRatio,z[5]=x,Ze=k.height,z[6]=Ze,qn=k.width,z[13]=qn}let Wr;z.length>25&&(Wr=z[25]);let Qr,Qi,Ee;z.length>17?(Qr=z[16],Qi=z[17],Ee=z[18]):(Qr=fa,Qi=null,Ee=null),Yn&&ct?Wi+=lt:!Yn&&!ct&&(Wi-=lt);let $i=0;for(;p<S;p+=2){if(Wr&&Wr[$i++]<qn/this.pixelRatio)continue;const Xe=this.calculateImageOrLabelDimensions_(k.width,k.height,_[p],_[p+1],qn,Ze,w,x,Re,Bn,Wi,Pi,l,Qr,!!Qi||!!Ee,W),Fi=[t,e,k,Xe,Ei,Qi,Ee];if(f){let Ie,oi,Ke;if(oe){const Tt=S-p;if(!oe[Tt]){oe[Tt]={args:Fi,declutterMode:b};continue}const se=oe[Tt];Ie=se.args,oi=se.declutterMode,delete oe[Tt],Ke=E2(Ie)}let pe,Wt;if(Ie&&(oi!=="declutter"||!f.collides(Ke))&&(pe=!0),(b!=="declutter"||!f.collides(Xe.declutterBox))&&(Wt=!0),oi==="declutter"&&b==="declutter"){const Tt=pe&&Wt;pe=Tt,Wt=Tt}pe&&(oi!=="none"&&f.insert(Ke),this.replayImageOrLabel_.apply(this,Ie)),Wt&&(b!=="none"&&f.insert(Xe.declutterBox),this.replayImageOrLabel_.apply(this,Fi))}else this.replayImageOrLabel_.apply(this,Fi)}++y;break;case dt.DRAW_CHARS:const De=z[1],$o=z[2],$r=z[3],Gc=z[4];J=z[5];const Oa=z[6],Xs=z[7],Ji=z[8];Z=z[9];const Hn=z[10];j=z[11],Array.isArray(j)&&(j=j.reduce(Nx,"")),B=z[12];const Zn=[z[13],z[13]];b=z[14]||"declutter";const Lc=z[15],Ga=this.textStates[B],Kn=Ga.font,mn=[Ga.scale[0]*Xs,Ga.scale[1]*Xs];let zi;Kn in this.widths_?zi=this.widths_[Kn]:(zi={},this.widths_[Kn]=zi);const Jo=Eg(_,De,$o,2),Jr=Math.abs(mn[0])*_2(Kn,j,zi);if(Gc||Jr<=Jo){const Xe=this.textStates[B].textAlign,Fi=(Jo-Jr)*n0(j,Xe),Ie=Gx(_,De,$o,2,j,Fi,Oa,Math.abs(mn[0]),_2,Kn,zi,ct?0:this.viewRotation_,Lc);t:if(Ie){const oi=[];let Ke,pe,Wt,Tt,se;if(Z)for(Ke=0,pe=Ie.length;Ke<pe;++Ke){se=Ie[Ke],Wt=se[4],Tt=this.createLabel(Wt,B,"",Z),w=se[2]+(mn[0]<0?-Hn:Hn),x=$r*Tt.height+(.5-$r)*2*Hn*mn[1]/mn[0]-Ji;const hi=this.calculateImageOrLabelDimensions_(Tt.width,Tt.height,se[0],se[1],Tt.width,Tt.height,w,x,0,0,se[3],Zn,!1,fa,!1,W);if(f&&b==="declutter"&&f.collides(hi.declutterBox))break t;oi.push([t,e,Tt,hi,1,null,null])}if(J)for(Ke=0,pe=Ie.length;Ke<pe;++Ke){se=Ie[Ke],Wt=se[4],Tt=this.createLabel(Wt,B,J,""),w=se[2],x=$r*Tt.height-Ji;const hi=this.calculateImageOrLabelDimensions_(Tt.width,Tt.height,se[0],se[1],Tt.width,Tt.height,w,x,0,0,se[3],Zn,!1,fa,!1,W);if(f&&b==="declutter"&&f.collides(hi.declutterBox))break t;oi.push([t,e,Tt,hi,1,null,null])}f&&b!=="none"&&f.load(oi.map(E2));for(let hi=0,Nc=oi.length;hi<Nc;++hi)this.replayImageOrLabel_.apply(this,oi[hi])}}++y;break;case dt.END_GEOMETRY:if(h!==void 0){W=z[1];const Xe=h(W,X,b);if(Xe)return Xe}++y;break;case dt.FILL:K?st++:this.fill_(t),++y;break;case dt.MOVE_TO_LINE_TO:for(p=z[1],S=z[2],at=_[p],C=_[p+1],t.moveTo(at,C),R=at+.5|0,L=C+.5|0,p+=2;p<S;p+=2)at=_[p],C=_[p+1],O=at+.5|0,A=C+.5|0,(p==S-2||O!==R||A!==L)&&(t.lineTo(at,C),R=O,L=A);++y;break;case dt.SET_FILL_STYLE:this.alignAndScaleFill_=z[2],st&&(this.fill_(t),st=0,tt&&(t.stroke(),tt=0)),t.fillStyle=z[1],++y;break;case dt.SET_STROKE_STYLE:tt&&(t.stroke(),tt=0),this.setStrokeStyle_(t,z),++y;break;case dt.STROKE:K?tt++:t.stroke(),++y;break;default:++y;break}}st&&this.fill_(t),tt&&t.stroke()}execute(t,e,s,r,l,h){this.viewRotation_=r,this.execute_(t,e,s,this.instructions,l,void 0,void 0,h)}executeHitDetection(t,e,s,r,l){return this.viewRotation_=s,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,r,l)}}const ha=["Polygon","Circle","LineString","Image","Text","Default"],$v=["Image","Text"],Ix=ha.filter(i=>!$v.includes(i));class Px{constructor(t,e,s,r,l,h,u){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=s,this.resolution_=e,this.renderBuffer_=h,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,u)}clip(t,e){const s=this.getClipCoords(e);t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(s[2],s[3]),t.lineTo(s[4],s[5]),t.lineTo(s[6],s[7]),t.clip()}createExecutors_(t,e){for(const s in t){let r=this.executorsByZIndex_[s];r===void 0&&(r={},this.executorsByZIndex_[s]=r);const l=t[s];for(const h in l){const u=l[h];r[h]=new Dx(this.resolution_,this.pixelRatio_,this.overlaps_,u,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const s=this.executorsByZIndex_[e];for(let r=0,l=t.length;r<l;++r)if(t[r]in s)return!0}return!1}forEachFeatureAtCoordinate(t,e,s,r,l,h){r=Math.round(r);const u=r*2+1,f=Un(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-s,-t[0],-t[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=ve(u,u));const _=this.hitDetectionContext_;_.canvas.width!==u||_.canvas.height!==u?(_.canvas.width=u,_.canvas.height=u):g||_.clearRect(0,0,u,u);let y;this.renderBuffer_!==void 0&&(y=Di(),fo(y,t),eg(y,e*(this.renderBuffer_+r),y));const v=zx(r);let p;function S(A,k,j){const B=_.getImageData(0,0,u,u).data;for(let Z=0,J=v.length;Z<J;Z++)if(B[v[Z]]>0){if(!h||j==="none"||p!=="Image"&&p!=="Text"||h.includes(A)){const st=(v[Z]-3)/4,tt=r-st%u,it=r-(st/u|0),lt=l(A,k,tt*tt+it*it);if(lt)return lt}_.clearRect(0,0,u,u);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Pn);let x,b,R,L,O;for(x=w.length-1;x>=0;--x){const A=w[x].toString();for(R=this.executorsByZIndex_[A],b=ha.length-1;b>=0;--b)if(p=ha[b],L=R[p],L!==void 0&&(O=L.executeHitDetection(_,f,s,S,y),O))return O}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const s=e[0],r=e[1],l=e[2],h=e[3],u=[s,r,s,h,l,h,l,r];return Os(u,0,8,2,t,u),u}isEmpty(){return Ea(this.executorsByZIndex_)}execute(t,e,s,r,l,h,u){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(u?QS:Pn),h=h||ha;const g=ha.length;for(let _=0,y=f.length;_<y;++_){const v=f[_].toString(),p=this.executorsByZIndex_[v];for(let S=0,w=h.length;S<w;++S){const x=h[S],b=p[x];if(b!==void 0){const R=u===null?void 0:b.getZIndexContext(),L=R?R.getContext():t,O=this.maxExtent_&&x!=="Image"&&x!=="Text";if(O&&(L.save(),this.clip(L,s)),!R||x==="Text"||x==="Image"?b.execute(L,e,s,r,l,u):R.pushFunction(A=>b.execute(A,e,s,r,l,u)),O&&L.restore(),R){R.offset();const A=f[_]*g+ha.indexOf(x);this.deferredZIndexContexts_[A]||(this.deferredZIndexContexts_[A]=[]),this.deferredZIndexContexts_[A].push(R)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(Pn);for(let s=0,r=e.length;s<r;++s)t[e[s]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),t[e[s]].length=0}}const s0={};function zx(i){if(s0[i]!==void 0)return s0[i];const t=i*2+1,e=i*i,s=new Array(e+1);for(let l=0;l<=i;++l)for(let h=0;h<=i;++h){const u=l*l+h*h;if(u>e)break;let f=s[u];f||(f=[],s[u]=f),f.push(((i+l)*t+(i+h))*4+3),l>0&&f.push(((i-l)*t+(i+h))*4+3),h>0&&(f.push(((i+l)*t+(i-h))*4+3),l>0&&f.push(((i-l)*t+(i-h))*4+3))}const r=[];for(let l=0,h=s.length;l<h;++l)s[l]&&r.push(...s[l]);return s0[i]=r,r}function S2(i){return i[0]>0&&i[1]>0}function Fx(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function ri(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}class vc{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ri(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new vc({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Et()}getImage(t){return Et()}getHitDetectionImage(){return Et()}getPixelRatio(t){return 1}getImageState(){return Et()}getImageSize(){return Et()}getOrigin(){return Et()}getSize(){return Et()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ri(t)}listenImageChange(t){Et()}load(){Et()}unlistenImageChange(t){Et()}ready(){return Promise.resolve()}}class Ec extends vc{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?xt.LOADING:xt.LOADED,this.imageState_===xt.LOADING&&this.ready().then(()=>this.imageState_=xt.LOADED),this.render()}clone(){const t=this.getScale(),e=new Ec({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-e[0]/s[0],t[1]/2+e[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),s=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let r=Li.get(s,null,null)?.getImage(1);if(!r){const l=this.renderOptions_,h=Math.ceil(l.size*t),u=ve(h,h);this.draw_(l,u,t),r=u.canvas,Li.set(s,null,null,new Bv(r,void 0,null,xt.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,s){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius,l=this.radius2_===void 0?r:this.radius2_;if(r<l){const k=r;r=l,l=k}const h=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/h,f=l*Math.sin(u),g=Math.sqrt(l*l-f*f),_=r-g,y=Math.sqrt(f*f+_*_),v=y/f;if(t==="miter"&&v<=s)return v*e;const p=e/2/v,S=e/2*(_/y),x=Math.sqrt((r+p)*(r+p)+S*S)-r;if(this.radius2_===void 0||t==="bevel")return x*2;const b=r*Math.sin(u),R=Math.sqrt(r*r-b*b),L=l-R,A=Math.sqrt(b*b+L*L)/b;if(A<=s){const k=A*e/2-l-r;return 2*Math.max(x,k)}return x*2}createRenderOptions(){let t=jr,e=Br,s=0,r=null,l=0,h,u=0;this.stroke_&&(h=on(this.stroke_.getColor()??Co),u=this.stroke_.getWidth()??Ro,r=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??Br,t=this.stroke_.getLineCap()??jr,s=this.stroke_.getMiterLimit()??bo);const f=this.calculateLineJoinSize_(e,u,s),g=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*g+f);return{strokeStyle:h,strokeWidth:u,size:_,lineCap:t,lineDash:r,lineDashOffset:l,lineJoin:e,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,s){if(e.scale(s,s),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=ti),e.fillStyle=on(r),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let s=this.fill_.getColor(),r=0;typeof s=="string"&&(s=kr(s)),s===null?r=1:Array.isArray(s)&&(r=s.length===4?s[3]:1),r===0&&(e=ve(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const s=this.radius;if(e===1/0)t.arc(0,0,s,0,2*Math.PI);else{const r=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(e*=2);const l=this.angle_-Math.PI/2,h=2*Math.PI/e;for(let u=0;u<e;u++){const f=l+u*h,g=u%2===0?s:r;t.lineTo(g*Math.cos(f),g*Math.sin(f))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ti,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class pc extends Ec{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new pc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Hr{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Hr({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=mg(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===xt.IDLE&&e.load(),e.getImageState()===xt.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?It(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:kr(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function M2(i,t,e,s){return e!==void 0&&s!==void 0?[e/i,s/t]:e!==void 0?e/i:s!==void 0?s/t:1}class Sc extends vc{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,s=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,l=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:s,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:l,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const h=t.img!==void 0?t.img:null;let u=t.src;jt(!(u!==void 0&&h),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&h&&(u=h.src||It(h)),jt(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),jt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(t.src!==void 0?f=xt.IDLE:h!==void 0&&("complete"in h?h.complete?f=h.src?xt.LOADED:xt.IDLE:f=xt.LOADING:f=xt.LOADED),this.color_=t.color!==void 0?kr(t.color):null,this.iconImage_=mg(h,u,this.crossOrigin_,f,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let g,_;if(t.size)[g,_]=t.size;else{const y=this.getImage(1);if(y.width&&y.height)g=y.width,_=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=t;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(M2(p[0],p[1],t.width,t.height))};this.listenImageChange(v);return}}g!==void 0&&this.setScale(M2(g,_,t.width,t.height))}}clone(){let t,e,s;return this.initialOptions_?(e=this.initialOptions_.width,s=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Sc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:s,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),s=this.getScaleArray();return[t[0]-e[0]/s[0],t[1]+e[1]/s[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),s=this.iconImage_.getSize();if(!e||!s)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=s[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=s[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(pt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(pt.CHANGE,t)}ready(){return this.iconImage_.ready()}}class jo{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new jo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Gs{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=x2,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Gs({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=x2,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Ux(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(jt(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[i]),t=function(){return e}}return t}let a0=null;function Jv(i,t){if(!a0){const e=new Hr({color:"rgba(255,255,255,0.4)"}),s=new jo({color:"#3399CC",width:1.25});a0=[new Gs({image:new pc({fill:e,stroke:s,radius:5}),fill:e,stroke:s})]}return a0}function x2(i){return i.getGeometry()}const kx="#333";class pg{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=ri(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Hr({color:kx}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new pg({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ri(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const w2=Hi(),Xx=[NaN,NaN];class tE extends dn{constructor(){super(),this.extent_=Di(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jv((t,e,s)=>{if(!s)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(s),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Et()}closestPointXY(t,e,s,r){return Et()}containsXY(t,e){return this.closestPointXY(t,e,Xx,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Et()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&zo(e),this.extentRevision_=this.getRevision()}return iM(this.extent_,t)}rotate(t,e){Et()}scale(t,e,s){Et()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Et()}getType(){return Et()}applyTransform(t){Et()}intersectsExtent(t){return Et()}translate(t,e){Et()}transform(t,e){const s=$t(t),r=s.getUnits()=="tile-pixels"?function(l,h,u){const f=s.getExtent(),g=s.getWorldExtent(),_=qe(g)/qe(f);Un(w2,g[0],g[3],_,-_,0,0,0);const y=Os(l,0,l.length,u,w2,h),v=So(s,e);return v?v(y,y,u):y}:So(s,e);return this.applyTransform(r),this}}class Ta extends tE{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return ng(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Et()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=b2(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Et()}setLayout(t,e,s){let r;if(t)r=b2(t);else{for(let l=0;l<s;++l){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=Ra(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const s=this.getFlatCoordinates();if(s){const r=this.getStride();Vv(s,0,s.length,r,t,e,s),this.changed()}}scale(t,e,s){e===void 0&&(e=t),s||(s=Ds(this.getExtent()));const r=this.getFlatCoordinates();if(r){const l=this.getStride();wx(r,0,r.length,l,t,e,s,r),this.changed()}}translate(t,e){const s=this.getFlatCoordinates();if(s){const r=this.getStride();bx(s,0,s.length,r,t,e,s),this.changed()}}}function Ra(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function b2(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function jx(i,t,e){const s=i.getFlatCoordinates();if(!s)return null;const r=i.getStride();return Os(s,0,s.length,r,t,e)}class Bx extends Yv{constructor(t,e,s,r,l,h,u){super(),this.context_=t,this.pixelRatio_=e,this.extent_=s,this.transform_=r,this.transformRotation_=r?lc(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=h,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hi()}drawImages_(t,e,s,r){if(!this.image_)return;const l=Os(t,e,s,r,this.transform_,this.pixelCoordinates_),h=this.context_,u=this.tmpLocalTransform_,f=h.globalAlpha;this.imageOpacity_!=1&&(h.globalAlpha=f*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let _=0,y=l.length;_<y;_+=2){const v=l[_]-this.imageAnchorX_,p=l[_+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=v+this.imageAnchorX_,w=p+this.imageAnchorY_;Un(u,S,w,1,1,g,-S,-w),h.save(),h.transform.apply(h,u),h.translate(S,w),h.scale(this.imageScale_[0],this.imageScale_[1]),h.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),h.restore()}else h.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(h.globalAlpha=f)}drawText_(t,e,s,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Os(t,e,s,r,this.transform_,this.pixelCoordinates_),h=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);e<s;e+=r){const f=l[e]+this.textOffsetX_,g=l[e+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(h.save(),h.translate(f-this.textOffsetX_,g-this.textOffsetY_),h.rotate(u),h.translate(this.textOffsetX_,this.textOffsetY_),h.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&h.strokeText(this.text_,0,0),this.textFillState_&&h.fillText(this.text_,0,0),h.restore()):(this.textStrokeState_&&h.strokeText(this.text_,f,g),this.textFillState_&&h.fillText(this.text_,f,g))}}moveToLineTo_(t,e,s,r,l){const h=this.context_,u=Os(t,e,s,r,this.transform_,this.pixelCoordinates_);h.moveTo(u[0],u[1]);let f=u.length;l&&(f-=2);for(let g=2;g<f;g+=2)h.lineTo(u[g],u[g+1]);return l&&h.closePath(),s}drawRings_(t,e,s,r){for(let l=0,h=s.length;l<h;++l)e=this.moveToLineTo_(t,e,s[l],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ni(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=jx(t,this.transform_,this.pixelCoordinates_),s=e[2]-e[0],r=e[3]-e[1],l=Math.sqrt(s*s+r*r),h=this.context_;h.beginPath(),h.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const s=e.getGeometryFunction()(t);s&&(this.setStyle(e),this.drawGeometry(s))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let s=0,r=e.length;s<r;++s)this.drawGeometry(e[s])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(e,0,e.length,s),this.text_!==""&&this.drawText_(e,0,e.length,s)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(e,0,e.length,s),this.text_!==""&&this.drawText_(e,0,e.length,s)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ni(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,s=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(ni(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,r=t.getFlatCoordinates();let l=0;const h=t.getEnds(),u=t.getStride();s.beginPath();for(let f=0,g=h.length;f<g;++f)l=this.moveToLineTo_(r,l,h[f],u,!1);s.stroke()}if(this.text_!==""){const s=t.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ni(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ni(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,s=t.getOrientedFlatCoordinates();let r=0;const l=t.getEndss(),h=t.getStride();e.beginPath();for(let u=0,f=l.length;u<f;++u){const g=l[u];r=this.drawRings_(s,r,g,h)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,s=this.contextFillState_;s?s.fillStyle!=t.fillStyle&&(s.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=t.lineCap&&(s.lineCap=t.lineCap,e.lineCap=t.lineCap),Fs(s.lineDash,t.lineDash)||e.setLineDash(s.lineDash=t.lineDash),s.lineDashOffset!=t.lineDashOffset&&(s.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),s.lineJoin!=t.lineJoin&&(s.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),s.lineWidth!=t.lineWidth&&(s.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),s.miterLimit!=t.miterLimit&&(s.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),s.strokeStyle!=t.strokeStyle&&(s.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,s=this.contextTextState_,r=t.textAlign?t.textAlign:To;s?(s.font!=t.font&&(s.font=t.font,e.font=t.font),s.textAlign!=r&&(s.textAlign=r,e.textAlign=r),s.textBaseline!=t.textBaseline&&(s.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const s=t.getColor();this.fillState_={fillStyle:on(s||ti)}}if(!e)this.strokeState_=null;else{const s=e.getColor(),r=e.getLineCap(),l=e.getLineDash(),h=e.getLineDashOffset(),u=e.getLineJoin(),f=e.getWidth(),g=e.getMiterLimit(),_=l||zn;this.strokeState_={lineCap:r!==void 0?r:jr,lineDash:this.pixelRatio_===1?_:_.map(y=>y*this.pixelRatio_),lineDashOffset:(h||Fn)*this.pixelRatio_,lineJoin:u!==void 0?u:Br,lineWidth:(f!==void 0?f:Ro)*this.pixelRatio_,miterLimit:g!==void 0?g:bo,strokeStyle:on(s||Co)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const s=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),l=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*s,this.imageAnchorY_=r[1]*s,this.imageHeight_=e[1]*s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const h=t.getScaleArray();this.imageScale_=[h[0]*this.pixelRatio_/s,h[1]*this.pixelRatio_/s],this.imageWidth_=e[0]*s}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const p=e.getColor();this.textFillState_={fillStyle:on(p||ti)}}const s=t.getStroke();if(!s)this.textStrokeState_=null;else{const p=s.getColor(),S=s.getLineCap(),w=s.getLineDash(),x=s.getLineDashOffset(),b=s.getLineJoin(),R=s.getWidth(),L=s.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:jr,lineDash:w||zn,lineDashOffset:x||Fn,lineJoin:b!==void 0?b:Br,lineWidth:R!==void 0?R:Ro,miterLimit:L!==void 0?L:bo,strokeStyle:on(p||Co)}}const r=t.getFont(),l=t.getOffsetX(),h=t.getOffsetY(),u=t.getRotateWithView(),f=t.getRotation(),g=t.getScaleArray(),_=t.getText(),y=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:r!==void 0?r:qv,textAlign:y!==void 0?y:To,textBaseline:v!==void 0?v:Uu},this.text_=_!==void 0?Array.isArray(_)?_.reduce((p,S,w)=>p+=w%2?" ":S,""):_:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=h!==void 0?this.pixelRatio_*h:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const rn=.5;function Yx(i,t,e,s,r,l,h,u,f){const g=r,_=i[0]*rn,y=i[1]*rn,v=ve(_,y);v.imageSmoothingEnabled=!1;const p=v.canvas,S=new Bx(v,rn,r,null,h,u,null),w=e.length,x=Math.floor((256*256*256-1)/w),b={};for(let L=1;L<=w;++L){const O=e[L-1],A=O.getStyleFunction()||s;if(!A)continue;let k=A(O,l);if(!k)continue;Array.isArray(k)||(k=[k]);const B=(L*x).toString(16).padStart(7,"#00000");for(let Z=0,J=k.length;Z<J;++Z){const st=k[Z],tt=st.getGeometryFunction()(O);if(!tt||!ni(g,tt.getExtent()))continue;const it=st.clone(),lt=it.getFill();lt&&lt.setColor(B);const ct=it.getStroke();ct&&(ct.setColor(B),ct.setLineDash(null)),it.setText(void 0);const D=st.getImage();if(D){const C=D.getImageSize();if(!C)continue;const X=ve(C[0],C[1],void 0,{alpha:!1}),z=X.canvas;X.fillStyle=B,X.fillRect(0,0,z.width,z.height),it.setImage(new Sc({img:z,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}const K=it.getZIndex()||0;let W=b[K];W||(W={},b[K]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]);const at=tt.getType();if(at==="GeometryCollection"){const C=tt.getGeometriesArrayRecursive();for(let X=0,z=C.length;X<z;++X){const $=C[X];W[$.getType().replace("Multi","")].push($,it)}}else W[at.replace("Multi","")].push(tt,it)}}const R=Object.keys(b).map(Number).sort(Pn);for(let L=0,O=R.length;L<O;++L){const A=b[R[L]];for(const k in A){const j=A[k];for(let B=0,Z=j.length;B<Z;B+=2){S.setStyle(j[B+1]);for(let J=0,st=t.length;J<st;++J)S.setTransform(t[J]),S.drawGeometry(j[B])}}}return v.getImageData(0,0,p.width,p.height)}function qx(i,t,e){const s=[];if(e){const r=Math.floor(Math.round(i[0])*rn),l=Math.floor(Math.round(i[1])*rn),h=(Jt(r,0,e.width-1)+Jt(l,0,e.height-1)*e.width)*4,u=e.data[h],f=e.data[h+1],_=e.data[h+2]+256*(f+256*u),y=Math.floor((256*256*256-1)/t.length);_&&_%y===0&&s.push(t[_/y-1])}return s}const Hx=.5,eE={Point:t3,LineString:Qx,Polygon:i3,MultiPoint:e3,MultiLineString:$x,MultiPolygon:Jx,GeometryCollection:Wx,Circle:Kx};function Zx(i,t){return parseInt(It(i),10)-parseInt(It(t),10)}function C2(i,t){const e=iE(i,t);return e*e}function iE(i,t){return Hx*i/t}function Kx(i,t,e,s,r){const l=e.getFill(),h=e.getStroke();if(l||h){const f=i.getBuilder(e.getZIndex(),"Circle");f.setFillStrokeStyle(l,h),f.drawCircle(t,s,r)}const u=e.getText();if(u&&u.getText()){const f=i.getBuilder(e.getZIndex(),"Text");f.setTextStyle(u),f.drawText(t,s)}}function T2(i,t,e,s,r,l,h,u){const f=[],g=e.getImage();if(g){let v=!0;const p=g.getImageState();p==xt.LOADED||p==xt.ERROR?v=!1:p==xt.IDLE&&g.load(),v&&f.push(g.ready())}const _=e.getFill();_&&_.loading()&&f.push(_.ready());const y=f.length>0;return y&&Promise.all(f).then(()=>r(null)),Vx(i,t,e,s,l,h,u),y}function Vx(i,t,e,s,r,l,h){const u=e.getGeometryFunction()(t);if(!u)return;const f=u.simplifyTransformed(s,r);if(e.getRenderer())nE(i,f,e,t,h);else{const _=eE[f.getType()];_(i,f,e,t,h,l)}}function nE(i,t,e,s,r){if(t.getType()=="GeometryCollection"){const h=t.getGeometries();for(let u=0,f=h.length;u<f;++u)nE(i,h[u],e,s,r);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,s,e.getRenderer(),e.getHitDetectionRenderer(),r)}function Wx(i,t,e,s,r,l){const h=t.getGeometriesArray();let u,f;for(u=0,f=h.length;u<f;++u){const g=eE[h[u].getType()];g(i,h[u],e,s,r,l)}}function Qx(i,t,e,s,r){const l=e.getStroke();if(l){const u=i.getBuilder(e.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawLineString(t,s,r)}const h=e.getText();if(h&&h.getText()){const u=i.getBuilder(e.getZIndex(),"Text");u.setTextStyle(h),u.drawText(t,s,r)}}function $x(i,t,e,s,r){const l=e.getStroke();if(l){const u=i.getBuilder(e.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawMultiLineString(t,s,r)}const h=e.getText();if(h&&h.getText()){const u=i.getBuilder(e.getZIndex(),"Text");u.setTextStyle(h),u.drawText(t,s,r)}}function Jx(i,t,e,s,r){const l=e.getFill(),h=e.getStroke();if(h||l){const f=i.getBuilder(e.getZIndex(),"Polygon");f.setFillStrokeStyle(l,h),f.drawMultiPolygon(t,s,r)}const u=e.getText();if(u&&u.getText()){const f=i.getBuilder(e.getZIndex(),"Text");f.setTextStyle(u),f.drawText(t,s,r)}}function t3(i,t,e,s,r,l){const h=e.getImage(),u=e.getText(),f=u&&u.getText(),g=l&&h&&f?{}:void 0;if(h){if(h.getImageState()!=xt.LOADED)return;const _=i.getBuilder(e.getZIndex(),"Image");_.setImageStyle(h,g),_.drawPoint(t,s,r)}if(f){const _=i.getBuilder(e.getZIndex(),"Text");_.setTextStyle(u,g),_.drawText(t,s,r)}}function e3(i,t,e,s,r,l){const h=e.getImage(),u=h&&h.getOpacity()!==0,f=e.getText(),g=f&&f.getText(),_=l&&u&&g?{}:void 0;if(u){if(h.getImageState()!=xt.LOADED)return;const y=i.getBuilder(e.getZIndex(),"Image");y.setImageStyle(h,_),y.drawMultiPoint(t,s,r)}if(g){const y=i.getBuilder(e.getZIndex(),"Text");y.setTextStyle(f,_),y.drawText(t,s,r)}}function i3(i,t,e,s,r){const l=e.getFill(),h=e.getStroke();if(l||h){const f=i.getBuilder(e.getZIndex(),"Polygon");f.setFillStrokeStyle(l,h),f.drawPolygon(t,s,r)}const u=e.getText();if(u&&u.getText()){const f=i.getBuilder(e.getZIndex(),"Text");f.setTextStyle(u),f.drawText(t,s,r)}}class sE extends kn{constructor(t,e,s,r){super(t),this.inversePixelTransform=e,this.frameState=s,this.context=r}}const n3=5;class s3 extends ko{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=n3}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Et()}getData(t){return null}prepareFrame(t){return Et()}renderFrame(t,e){return Et()}forEachFeatureAtCoordinate(t,e,s,r,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===xt.LOADED||e.getState()===xt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=xt.LOADED&&e!=xt.ERROR&&t.addEventListener(pt.CHANGE,this.boundHandleImageChange_),e==xt.IDLE&&(t.load(),e=t.getState()),e==xt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const R2=[];let wr=null;function a3(){wr=ve(1,1,void 0,{willReadFrequently:!0})}class aE extends s3{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Hi(),this.pixelTransform=Hi(),this.inversePixelTransform=Hi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,s){wr||a3(),wr.clearRect(0,0,1,1);let r;try{wr.drawImage(t,e,s,1,1,0,0,1,1),r=wr.getImageData(0,0,1,1).data}catch{return wr=null,null}return r}getBackground(t){let s=this.getLayer().getBackground();return typeof s=="function"&&(s=s(t.viewState.resolution)),s||void 0}useContainer(t,e,s){const r=this.getLayer().getClassName();let l,h;if(t&&t.className===r&&(!s||t&&t.style.backgroundColor&&Fs(kr(t.style.backgroundColor),kr(s)))){const u=t.firstElementChild;u instanceof HTMLCanvasElement&&(h=u.getContext("2d"))}if(h&&Ox(h.canvas.style.transform,e)?(this.container=t,this.context=h,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=r;let u=l.style;u.position="absolute",u.width="100%",u.height="100%",h=ve();const f=h.canvas;l.appendChild(f),u=f.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=l,this.context=h}!this.containerReused&&s&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=s)}clipUnrotated(t,e,s){const r=Ca(s),l=ac(s),h=sc(s),u=nc(s);Ce(e.coordinateToPixelTransform,r),Ce(e.coordinateToPixelTransform,l),Ce(e.coordinateToPixelTransform,h),Ce(e.coordinateToPixelTransform,u);const f=this.inversePixelTransform;Ce(f,r),Ce(f,l),Ce(f,h),Ce(f,u),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()}prepareContainer(t,e){const s=t.extent,r=t.viewState.resolution,l=t.viewState.rotation,h=t.pixelRatio,u=Math.round(Ft(s)/r*h),f=Math.round(qe(s)/r*h);Un(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-u/2,-f/2),Wv(this.inversePixelTransform,this.pixelTransform);const g=Ax(this.pixelTransform);if(this.useContainer(e,g,this.getBackground(t)),!this.containerReused){const _=this.context.canvas;_.width!=u||_.height!=f?(_.width=u,_.height=f):this.context.clearRect(0,0,u,f),g!==_.style.transform&&(_.style.transform=g)}}dispatchRenderEvent_(t,e,s){const r=this.getLayer();if(r.hasListener(t)){const l=new sE(t,this.inversePixelTransform,s,e);r.dispatchEvent(l)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Gi.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Gi.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new Qv),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Gi.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Gi.POSTRENDER,this.context,t))}getRenderTransform(t,e,s,r,l,h,u){const f=l/2,g=h/2,_=r/e,y=-_,v=-t[0]+u,p=-t[1];return Un(this.tempTransform,f,g,_,y,-s,v,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class r3 extends aE{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Di(),this.wrappedRenderedExtent_=Di(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,s){const r=e.extent,l=e.viewState,h=l.center,u=l.resolution,f=l.projection,g=l.rotation,_=f.getExtent(),y=this.getLayer().getSource(),v=this.getLayer().getDeclutter(),p=e.pixelRatio,S=e.viewHints,w=!(S[Ue.ANIMATING]||S[Ue.INTERACTING]),x=this.context,b=Math.round(Ft(r)/u*p),R=Math.round(qe(r)/u*p),L=y.getWrapX()&&f.canWrapX(),O=L?Ft(_):null,A=L?Math.ceil((r[2]-_[2])/O)+1:1;let k=L?Math.floor((r[0]-_[0])/O):0;do{let j=this.getRenderTransform(h,u,0,p,b,R,k*O);e.declutter&&(j=j.slice(0)),t.execute(x,[x.canvas.width,x.canvas.height],j,g,w,s===void 0?ha:s?$v:Ix,s?v&&e.declutter[v]:void 0)}while(++k<A)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=ve(this.context.canvas.width,this.context.canvas.height,R2))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,oc(this.context),R2.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const s=t.layerStatesArray[t.layerIndex];this.opacity_=s.opacity;const r=t.viewState;this.prepareContainer(t,e);const l=this.context,h=this.replayGroup_;let u=h&&!h.isEmpty();if(!u&&!(this.getLayer().hasListener(Gi.PRERENDER)||this.getLayer().hasListener(Gi.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(l,t),r.projection,this.clipped_=!1,u&&s.extent&&this.clipping){const f=bs(s.extent);u=ni(f,t.extent),this.clipped_=u&&!io(f,t.extent),this.clipped_&&this.clipUnrotated(l,t,f)}return u&&this.renderWorlds(h,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&l.restore(),this.postRender(l,t),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const s=this.frameState.size.slice(),r=this.renderedCenter_,l=this.renderedResolution_,h=this.renderedRotation_,u=this.renderedProjection_,f=this.wrappedRenderedExtent_,g=this.getLayer(),_=[],y=s[0]*rn,v=s[1]*rn;_.push(this.getRenderTransform(r,l,h,rn,y,v,0).slice());const p=g.getSource(),S=u.getExtent();if(p.getWrapX()&&u.canWrapX()&&!io(S,f)){let w=f[0];const x=Ft(S);let b=0,R;for(;w<S[0];)--b,R=x*b,_.push(this.getRenderTransform(r,l,h,rn,y,v,R).slice()),w+=x;for(b=0,w=f[2];w>S[2];)++b,R=x*b,_.push(this.getRenderTransform(r,l,h,rn,y,v,R).slice()),w-=x}this.hitDetectionImageData_=Yx(s,_,this.renderedFeatures_,g.getStyleFunction(),f,l,h,C2(l,this.renderedPixelRatio_))}e(qx(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,s,r,l){if(!this.replayGroup_)return;const h=e.viewState.resolution,u=e.viewState.rotation,f=this.getLayer(),g={},_=function(v,p,S){const w=It(v),x=g[w];if(x){if(x!==!0&&S<x.distanceSq){if(S===0)return g[w]=!0,l.splice(l.lastIndexOf(x),1),r(v,f,p);x.geometry=p,x.distanceSq=S}}else{if(S===0)return g[w]=!0,r(v,f,p);l.push(g[w]={feature:v,layer:f,geometry:p,distanceSq:S,callback:r})}},y=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,h,u,s,_,y?e.declutter?.[y]?.all().map(v=>v.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),s=e.getSource();if(!s)return!1;const r=t.viewHints[Ue.ANIMATING],l=t.viewHints[Ue.INTERACTING],h=e.getUpdateWhileAnimating(),u=e.getUpdateWhileInteracting();if(this.ready&&!h&&r||!u&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=t.extent,g=t.viewState,_=g.projection,y=g.resolution,v=t.pixelRatio,p=e.getRevision(),S=e.getRenderBuffer();let w=e.getRenderOrder();w===void 0&&(w=Zx);const x=g.center.slice(),b=eg(f,S*y),R=b.slice(),L=[b.slice()],O=_.getExtent();if(s.getWrapX()&&_.canWrapX()&&!io(O,t.extent)){const lt=Ft(O),ct=Math.max(Ft(b)/2,lt);b[0]=O[0]-ct,b[2]=O[2]+ct,ag(x,_);const D=Rv(L[0],_);D[0]<O[0]&&D[2]<O[2]?L.push([D[0]+lt,D[1],D[2]+lt,D[3]]):D[0]>O[0]&&D[2]>O[2]&&L.push([D[0]-lt,D[1],D[2]-lt,D[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==p&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!t.declutter&&io(this.wrappedRenderedExtent_,b))return Fs(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const A=new xx(iE(y,v),b,y,v);let k;for(let lt=0,ct=L.length;lt<ct;++lt)s.loadFeatures(L[lt],y,_);const j=C2(y,v);let B=!0;const Z=(lt,ct)=>{let D;const K=lt.getStyleFunction()||e.getStyleFunction();if(K&&(D=K(lt,y)),D){const W=this.renderFeature(lt,j,D,A,k,this.getLayer().getDeclutter(),ct);B=B&&!W}},J=kv(b),st=s.getFeaturesInExtent(J);w&&st.sort(w);for(let lt=0,ct=st.length;lt<ct;++lt)Z(st[lt],lt);this.renderedFeatures_=st,this.ready=B;const tt=A.finish(),it=new Px(b,y,v,s.getOverlaps(),tt,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=y,this.renderedRevision_=p,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=b,this.renderedCenter_=x,this.renderedProjection_=_,this.renderedPixelRatio_=v,this.replayGroup_=it,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,s,r,l,h,u){if(!s)return!1;let f=!1;if(Array.isArray(s))for(let g=0,_=s.length;g<_;++g)f=T2(r,t,s[g],e,this.boundHandleStyleImageChange_,l,h,u)||f;else f=T2(r,t,s,e,this.boundHandleStyleImageChange_,l,h,u);return f}}function rE(i,t,e=0,s=i.length-1,r=l3){for(;s>e;){if(s-e>600){const f=s-e+1,g=t-e+1,_=Math.log(f),y=.5*Math.exp(2*_/3),v=.5*Math.sqrt(_*y*(f-y)/f)*(g-f/2<0?-1:1),p=Math.max(e,Math.floor(t-g*y/f+v)),S=Math.min(s,Math.floor(t+(f-g)*y/f+v));rE(i,t,p,S,r)}const l=i[t];let h=e,u=s;for(Jl(i,e,t),r(i[s],l)>0&&Jl(i,e,s);h<u;){for(Jl(i,h,u),h++,u--;r(i[h],l)<0;)h++;for(;r(i[u],l)>0;)u--}r(i[e],l)===0?Jl(i,e,u):(u++,Jl(i,u,s)),u<=t&&(e=u+1),t<=u&&(s=u-1)}}function Jl(i,t,e){const s=i[t];i[t]=i[e],i[e]=s}function l3(i,t){return i<t?-1:i>t?1:0}let lE=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const s=[];if(!yu(t,e))return s;const r=this.toBBox,l=[];for(;e;){for(let h=0;h<e.children.length;h++){const u=e.children[h],f=e.leaf?r(u):u;yu(t,f)&&(e.leaf?s.push(u):l0(t,f)?this._all(u,s):l.push(u))}e=l.pop()}return s}collides(t){let e=this.data;if(!yu(t,e))return!1;const s=[];for(;e;){for(let r=0;r<e.children.length;r++){const l=e.children[r],h=e.leaf?this.toBBox(l):l;if(yu(t,h)){if(e.leaf||l0(t,h))return!0;s.push(l)}}e=s.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let s=0;s<t.length;s++)this.insert(t[s]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const s=this.data;this.data=e,e=s}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=br([]),this}remove(t,e){if(!t)return this;let s=this.data;const r=this.toBBox(t),l=[],h=[];let u,f,g;for(;s||l.length;){if(s||(s=l.pop(),f=l[l.length-1],u=h.pop(),g=!0),s.leaf){const _=o3(t,s.children,e);if(_!==-1)return s.children.splice(_,1),l.push(s),this._condense(l),this}!g&&!s.leaf&&l0(s,r)?(l.push(s),h.push(u),u=0,f=s,s=s.children[0]):f?(u++,s=f.children[u],g=!1):s=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const s=[];for(;t;)t.leaf?e.push(...t.children):s.push(...t.children),t=s.pop();return e}_build(t,e,s,r){const l=s-e+1;let h=this._maxEntries,u;if(l<=h)return u=br(t.slice(e,s+1)),vr(u,this.toBBox),u;r||(r=Math.ceil(Math.log(l)/Math.log(h)),h=Math.ceil(l/Math.pow(h,r-1))),u=br([]),u.leaf=!1,u.height=r;const f=Math.ceil(l/h),g=f*Math.ceil(Math.sqrt(h));A2(t,e,s,g,this.compareMinX);for(let _=e;_<=s;_+=g){const y=Math.min(_+g-1,s);A2(t,_,y,f,this.compareMinY);for(let v=_;v<=y;v+=f){const p=Math.min(v+f-1,y);u.children.push(this._build(t,v,p,r-1))}}return vr(u,this.toBBox),u}_chooseSubtree(t,e,s,r){for(;r.push(e),!(e.leaf||r.length-1===s);){let l=1/0,h=1/0,u;for(let f=0;f<e.children.length;f++){const g=e.children[f],_=r0(g),y=c3(t,g)-_;y<h?(h=y,l=_<l?_:l,u=g):y===h&&_<l&&(l=_,u=g)}e=u||e.children[0]}return e}_insert(t,e,s){const r=s?t:this.toBBox(t),l=[],h=this._chooseSubtree(r,this.data,e,l);for(h.children.push(t),so(h,r);e>=0&&l[e].children.length>this._maxEntries;)this._split(l,e),e--;this._adjustParentBBoxes(r,l,e)}_split(t,e){const s=t[e],r=s.children.length,l=this._minEntries;this._chooseSplitAxis(s,l,r);const h=this._chooseSplitIndex(s,l,r),u=br(s.children.splice(h,s.children.length-h));u.height=s.height,u.leaf=s.leaf,vr(s,this.toBBox),vr(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(s,u)}_splitRoot(t,e){this.data=br([t,e]),this.data.height=t.height+1,this.data.leaf=!1,vr(this.data,this.toBBox)}_chooseSplitIndex(t,e,s){let r,l=1/0,h=1/0;for(let u=e;u<=s-e;u++){const f=no(t,0,u,this.toBBox),g=no(t,u,s,this.toBBox),_=f3(f,g),y=r0(f)+r0(g);_<l?(l=_,r=u,h=y<h?y:h):_===l&&y<h&&(h=y,r=u)}return r||s-e}_chooseSplitAxis(t,e,s){const r=t.leaf?this.compareMinX:h3,l=t.leaf?this.compareMinY:u3,h=this._allDistMargin(t,e,s,r),u=this._allDistMargin(t,e,s,l);h<u&&t.children.sort(r)}_allDistMargin(t,e,s,r){t.children.sort(r);const l=this.toBBox,h=no(t,0,e,l),u=no(t,s-e,s,l);let f=mu(h)+mu(u);for(let g=e;g<s-e;g++){const _=t.children[g];so(h,t.leaf?l(_):_),f+=mu(h)}for(let g=s-e-1;g>=e;g--){const _=t.children[g];so(u,t.leaf?l(_):_),f+=mu(u)}return f}_adjustParentBBoxes(t,e,s){for(let r=s;r>=0;r--)so(e[r],t)}_condense(t){for(let e=t.length-1,s;e>=0;e--)t[e].children.length===0?e>0?(s=t[e-1].children,s.splice(s.indexOf(t[e]),1)):this.clear():vr(t[e],this.toBBox)}};function o3(i,t,e){if(!e)return t.indexOf(i);for(let s=0;s<t.length;s++)if(e(i,t[s]))return s;return-1}function vr(i,t){no(i,0,i.children.length,t,i)}function no(i,t,e,s,r){r||(r=br(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let l=t;l<e;l++){const h=i.children[l];so(r,i.leaf?s(h):h)}return r}function so(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function h3(i,t){return i.minX-t.minX}function u3(i,t){return i.minY-t.minY}function r0(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function mu(i){return i.maxX-i.minX+(i.maxY-i.minY)}function c3(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function f3(i,t){const e=Math.max(i.minX,t.minX),s=Math.max(i.minY,t.minY),r=Math.min(i.maxX,t.maxX),l=Math.min(i.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,l-s)}function l0(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function yu(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function br(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A2(i,t,e,s,r){const l=[t,e];for(;l.length;){if(e=l.pop(),t=l.pop(),e-t<=s)continue;const h=t+Math.ceil((e-t)/s/2)*s;rE(i,h,t,e,r),l.push(t,h,h,e)}}let Aa=0;const Ye=1<<Aa++,Gt=1<<Aa++,ei=1<<Aa++,Yi=1<<Aa++,Sa=1<<Aa++,ao=1<<Aa++,vu=Math.pow(2,Aa)-1,Sg={[Ye]:"boolean",[Gt]:"number",[ei]:"string",[Yi]:"color",[Sa]:"number[]",[ao]:"size"},d3=Object.keys(Sg).map(Number).sort(Pn);function g3(i){return i in Sg}function ro(i){const t=[];for(const e of d3)lo(i,e)&&t.push(Sg[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function lo(i,t){return(i&t)===t}function Es(i,t){return i===t}class ye{constructor(t,e){if(!g3(t))throw new Error(`literal expressions must have a specific type, got ${ro(t)}`);this.type=t,this.value=e}}class _3{constructor(t,e,...s){this.type=t,this.operator=e,this.args=s}}function oE(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ne(i,t,e){switch(typeof i){case"boolean":{if(Es(t,ei))return new ye(ei,i?"true":"false");if(!lo(t,Ye))throw new Error(`got a boolean, but expected ${ro(t)}`);return new ye(Ye,i)}case"number":{if(Es(t,ao))return new ye(ao,ri(i));if(Es(t,Ye))return new ye(Ye,!!i);if(Es(t,ei))return new ye(ei,i.toString());if(!lo(t,Gt))throw new Error(`got a number, but expected ${ro(t)}`);return new ye(Gt,i)}case"string":{if(Es(t,Yi))return new ye(Yi,gg(i));if(Es(t,Ye))return new ye(Ye,!!i);if(!lo(t,ei))throw new Error(`got a string, but expected ${ro(t)}`);return new ye(ei,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return C3(i,t,e);for(const s of i)if(typeof s!="number")throw new Error("expected an array of numbers");if(Es(t,ao)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new ye(ao,i)}if(Es(t,Yi)){if(i.length===3)return new ye(Yi,[...i,1]);if(i.length===4)return new ye(Yi,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!lo(t,Sa))throw new Error(`got an array of numbers, but expected ${ro(t)}`);return new ye(Sa,i)}const q={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},m3={[q.Get]:vt(Mt(1,1/0),O2),[q.Var]:vt(Mt(1,1),y3),[q.Has]:vt(Mt(1,1/0),O2),[q.Id]:vt(v3,Er),[q.Concat]:vt(Mt(2,1/0),zt(ei)),[q.GeometryType]:vt(E3,Er),[q.LineMetric]:vt(Er),[q.Resolution]:vt(o0,Er),[q.Zoom]:vt(o0,Er),[q.Time]:vt(o0,Er),[q.Any]:vt(Mt(2,1/0),zt(Ye)),[q.All]:vt(Mt(2,1/0),zt(Ye)),[q.Not]:vt(Mt(1,1),zt(Ye)),[q.Equal]:vt(Mt(2,2),zt(vu)),[q.NotEqual]:vt(Mt(2,2),zt(vu)),[q.GreaterThan]:vt(Mt(2,2),zt(Gt)),[q.GreaterThanOrEqualTo]:vt(Mt(2,2),zt(Gt)),[q.LessThan]:vt(Mt(2,2),zt(Gt)),[q.LessThanOrEqualTo]:vt(Mt(2,2),zt(Gt)),[q.Multiply]:vt(Mt(2,1/0),G2),[q.Coalesce]:vt(Mt(2,1/0),G2),[q.Divide]:vt(Mt(2,2),zt(Gt)),[q.Add]:vt(Mt(2,1/0),zt(Gt)),[q.Subtract]:vt(Mt(2,2),zt(Gt)),[q.Clamp]:vt(Mt(3,3),zt(Gt)),[q.Mod]:vt(Mt(2,2),zt(Gt)),[q.Pow]:vt(Mt(2,2),zt(Gt)),[q.Abs]:vt(Mt(1,1),zt(Gt)),[q.Floor]:vt(Mt(1,1),zt(Gt)),[q.Ceil]:vt(Mt(1,1),zt(Gt)),[q.Round]:vt(Mt(1,1),zt(Gt)),[q.Sin]:vt(Mt(1,1),zt(Gt)),[q.Cos]:vt(Mt(1,1),zt(Gt)),[q.Atan]:vt(Mt(1,2),zt(Gt)),[q.Sqrt]:vt(Mt(1,1),zt(Gt)),[q.Match]:vt(Mt(4,1/0),L2,S3),[q.Between]:vt(Mt(3,3),zt(Gt)),[q.Interpolate]:vt(Mt(6,1/0),L2,M3),[q.Case]:vt(Mt(3,1/0),p3,x3),[q.In]:vt(Mt(2,2),w3),[q.Number]:vt(Mt(1,1/0),zt(vu)),[q.String]:vt(Mt(1,1/0),zt(vu)),[q.Array]:vt(Mt(1,1/0),zt(Gt)),[q.Color]:vt(Mt(1,4),zt(Gt)),[q.Band]:vt(Mt(1,3),zt(Gt)),[q.Palette]:vt(Mt(2,2),b3),[q.ToString]:vt(Mt(1,1),zt(Ye|Gt|ei|Yi))};function O2(i,t,e){const s=i.length-1,r=new Array(s);for(let l=0;l<s;++l){const h=i[l+1];switch(typeof h){case"number":{r[l]=new ye(Gt,h);break}case"string":{r[l]=new ye(ei,h);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${h}`)}l===0&&e.properties.add(String(h))}return r}function y3(i,t,e){const s=i[1];if(typeof s!="string")throw new Error("expected a string argument for var operation");return e.variables.add(s),[new ye(ei,s)]}function v3(i,t,e){e.featureId=!0}function E3(i,t,e){e.geometryType=!0}function o0(i,t,e){e.mapState=!0}function Er(i,t,e){const s=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${s} operation`);return[]}function Mt(i,t){return function(e,s,r){const l=e[0],h=e.length-1;if(i===t){if(h!==i){const u=i===1?"":"s";throw new Error(`expected ${i} argument${u} for ${l}, got ${h}`)}}else if(h<i||h>t){const u=t===1/0?`${i} or more`:`${i} to ${t}`;throw new Error(`expected ${u} arguments for ${l}, got ${h}`)}}}function G2(i,t,e){const s=i.length-1,r=new Array(s);for(let l=0;l<s;++l){const h=Ne(i[l+1],t,e);r[l]=h}return r}function zt(i){return function(t,e,s){const r=t.length-1,l=new Array(r);for(let h=0;h<r;++h){const u=Ne(t[h+1],i,s);l[h]=u}return l}}function p3(i,t,e){const s=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${s}, got ${r} instead`)}function L2(i,t,e){const s=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${s}, got ${r} instead`)}function S3(i,t,e){const s=i.length-1,r=ei|Gt|Ye,l=Ne(i[1],r,e),h=Ne(i[i.length-1],t,e),u=new Array(s-2);for(let f=0;f<s-2;f+=2){try{const g=Ne(i[f+2],l.type,e);u[f]=g}catch(g){throw new Error(`failed to parse argument ${f+1} of match expression: ${g.message}`)}try{const g=Ne(i[f+3],h.type,e);u[f+1]=g}catch(g){throw new Error(`failed to parse argument ${f+2} of match expression: ${g.message}`)}}return[l,...u,h]}function M3(i,t,e){const s=i[1];let r;switch(s[0]){case"linear":r=1;break;case"exponential":const f=s[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);r=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(s)}`)}const l=new ye(Gt,r);let h;try{h=Ne(i[2],Gt,e)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const u=new Array(i.length-3);for(let f=0;f<u.length;f+=2){try{const g=Ne(i[f+3],Gt,e);u[f]=g}catch(g){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${g.message}`)}try{const g=Ne(i[f+4],t,e);u[f+1]=g}catch(g){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${g.message}`)}}return[l,h,...u]}function x3(i,t,e){const s=Ne(i[i.length-1],t,e),r=new Array(i.length-1);for(let l=0;l<r.length-1;l+=2){try{const h=Ne(i[l+1],Ye,e);r[l]=h}catch(h){throw new Error(`failed to parse argument ${l} of case expression: ${h.message}`)}try{const h=Ne(i[l+2],s.type,e);r[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+1} of case expression: ${h.message}`)}}return r[r.length-1]=s,r}function w3(i,t,e){let s=i[2];if(!Array.isArray(s))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof s[0]=="string"){if(s[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(s[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');s=s[1],r=ei}else r=Gt;const l=new Array(s.length);for(let u=0;u<l.length;u++)try{const f=Ne(s[u],r,e);l[u]=f}catch(f){throw new Error(`failed to parse haystack item ${u} for "in" expression: ${f.message}`)}return[Ne(i[1],r,e),...l]}function b3(i,t,e){let s;try{s=Ne(i[1],Gt,e)}catch(h){throw new Error(`failed to parse first argument in palette expression: ${h.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const l=new Array(r.length);for(let h=0;h<l.length;h++){let u;try{u=Ne(r[h],Yi,e)}catch(f){throw new Error(`failed to parse color at index ${h} in palette expression: ${f.message}`)}if(!(u instanceof ye))throw new Error(`the palette color at index ${h} must be a literal value`);l[h]=u}return[s,...l]}function vt(...i){return function(t,e,s){const r=t[0];let l;for(let h=0;h<i.length;h++){const u=i[h](t,e,s);if(h==i.length-1){if(!u)throw new Error("expected last argument validator to return the parsed args");l=u}}return new _3(e,r,...l)}}function C3(i,t,e){const s=i[0],r=m3[s];if(!r)throw new Error(`unknown operator: ${s}`);return r(i,t,e)}function hE(i){if(!i)return"";const t=i.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return hE(i.getGeometries()[0]);default:return""}}function uE(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Xn(i,t,e){const s=Ne(i,t,e);return Vi(s)}function Vi(i,t){if(i instanceof ye){if(i.type===Yi&&typeof i.value=="string"){const s=gg(i.value);return function(){return s}}return function(){return i.value}}const e=i.operator;switch(e){case q.Number:case q.String:case q.Coalesce:return T3(i);case q.Get:case q.Var:case q.Has:return R3(i);case q.Id:return s=>s.featureId;case q.GeometryType:return s=>s.geometryType;case q.Concat:{const s=i.args.map(r=>Vi(r));return r=>"".concat(...s.map(l=>l(r).toString()))}case q.Resolution:return s=>s.resolution;case q.Any:case q.All:case q.Between:case q.In:case q.Not:return O3(i);case q.Equal:case q.NotEqual:case q.LessThan:case q.LessThanOrEqualTo:case q.GreaterThan:case q.GreaterThanOrEqualTo:return A3(i);case q.Multiply:case q.Divide:case q.Add:case q.Subtract:case q.Clamp:case q.Mod:case q.Pow:case q.Abs:case q.Floor:case q.Ceil:case q.Round:case q.Sin:case q.Cos:case q.Atan:case q.Sqrt:return G3(i);case q.Case:return L3(i);case q.Match:return N3(i);case q.Interpolate:return D3(i);case q.ToString:return I3(i);default:throw new Error(`Unsupported operator ${e}`)}}function T3(i,t){const e=i.operator,s=i.args.length,r=new Array(s);for(let l=0;l<s;++l)r[l]=Vi(i.args[l]);switch(e){case q.Coalesce:return l=>{for(let h=0;h<s;++h){const u=r[h](l);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case q.Number:case q.String:return l=>{for(let h=0;h<s;++h){const u=r[h](l);if(typeof u===e)return u}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function R3(i,t){const s=i.args[0].value;switch(i.operator){case q.Get:return r=>{const l=i.args;let h=r.properties[s];for(let u=1,f=l.length;u<f;++u){const _=l[u].value;h=h[_]}return h};case q.Var:return r=>r.variables[s];case q.Has:return r=>{const l=i.args;if(!(s in r.properties))return!1;let h=r.properties[s];for(let u=1,f=l.length;u<f;++u){const _=l[u].value;if(!h||!Object.hasOwn(h,_))return!1;h=h[_]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function A3(i,t){const e=i.operator,s=Vi(i.args[0]),r=Vi(i.args[1]);switch(e){case q.Equal:return l=>s(l)===r(l);case q.NotEqual:return l=>s(l)!==r(l);case q.LessThan:return l=>s(l)<r(l);case q.LessThanOrEqualTo:return l=>s(l)<=r(l);case q.GreaterThan:return l=>s(l)>r(l);case q.GreaterThanOrEqualTo:return l=>s(l)>=r(l);default:throw new Error(`Unsupported comparison operator ${e}`)}}function O3(i,t){const e=i.operator,s=i.args.length,r=new Array(s);for(let l=0;l<s;++l)r[l]=Vi(i.args[l]);switch(e){case q.Any:return l=>{for(let h=0;h<s;++h)if(r[h](l))return!0;return!1};case q.All:return l=>{for(let h=0;h<s;++h)if(!r[h](l))return!1;return!0};case q.Between:return l=>{const h=r[0](l),u=r[1](l),f=r[2](l);return h>=u&&h<=f};case q.In:return l=>{const h=r[0](l);for(let u=1;u<s;++u)if(h===r[u](l))return!0;return!1};case q.Not:return l=>!r[0](l);default:throw new Error(`Unsupported logical operator ${e}`)}}function G3(i,t){const e=i.operator,s=i.args.length,r=new Array(s);for(let l=0;l<s;++l)r[l]=Vi(i.args[l]);switch(e){case q.Multiply:return l=>{let h=1;for(let u=0;u<s;++u)h*=r[u](l);return h};case q.Divide:return l=>r[0](l)/r[1](l);case q.Add:return l=>{let h=0;for(let u=0;u<s;++u)h+=r[u](l);return h};case q.Subtract:return l=>r[0](l)-r[1](l);case q.Clamp:return l=>{const h=r[0](l),u=r[1](l);if(h<u)return u;const f=r[2](l);return h>f?f:h};case q.Mod:return l=>r[0](l)%r[1](l);case q.Pow:return l=>Math.pow(r[0](l),r[1](l));case q.Abs:return l=>Math.abs(r[0](l));case q.Floor:return l=>Math.floor(r[0](l));case q.Ceil:return l=>Math.ceil(r[0](l));case q.Round:return l=>Math.round(r[0](l));case q.Sin:return l=>Math.sin(r[0](l));case q.Cos:return l=>Math.cos(r[0](l));case q.Atan:return s===2?l=>Math.atan2(r[0](l),r[1](l)):l=>Math.atan(r[0](l));case q.Sqrt:return l=>Math.sqrt(r[0](l));default:throw new Error(`Unsupported numeric operator ${e}`)}}function L3(i,t){const e=i.args.length,s=new Array(e);for(let r=0;r<e;++r)s[r]=Vi(i.args[r]);return r=>{for(let l=0;l<e-1;l+=2)if(s[l](r))return s[l+1](r);return s[e-1](r)}}function N3(i,t){const e=i.args.length,s=new Array(e);for(let r=0;r<e;++r)s[r]=Vi(i.args[r]);return r=>{const l=s[0](r);for(let h=1;h<e-1;h+=2)if(l===s[h](r))return s[h+1](r);return s[e-1](r)}}function D3(i,t){const e=i.args.length,s=new Array(e);for(let r=0;r<e;++r)s[r]=Vi(i.args[r]);return r=>{const l=s[0](r),h=s[1](r);let u,f;for(let g=2;g<e;g+=2){const _=s[g](r);let y=s[g+1](r);const v=Array.isArray(y);if(v&&(y=QM(y)),_>=h)return g===2?y:v?P3(l,h,u,f,_,y):oo(l,h,u,f,_,y);u=_,f=y}return f}}function I3(i,t){const e=i.operator,s=i.args.length,r=new Array(s);for(let l=0;l<s;++l)r[l]=Vi(i.args[l]);switch(e){case q.ToString:return l=>{const h=r[0](l);return i.args[0].type===Yi?_g(h):h.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function oo(i,t,e,s,r,l){const h=r-e;if(h===0)return s;const u=t-e,f=i===1?u/h:(Math.pow(i,u)-1)/(Math.pow(i,h)-1);return s+f*(l-s)}function P3(i,t,e,s,r,l){if(r-e===0)return s;const u=u2(s),f=u2(l);let g=f[2]-u[2];g>180?g-=360:g<-180&&(g+=360);const _=[oo(i,t,e,u[0],r,f[0]),oo(i,t,e,u[1],r,f[1]),u[2]+oo(i,t,e,0,r,g),oo(i,t,e,s[3],r,l[3])];return $M(_)}function z3(i){return!0}function F3(i){const t=oE(),e=U3(i,t),s=uE();return function(r,l){if(s.properties=r.getPropertiesInternal(),s.resolution=l,t.featureId){const h=r.getId();h!==void 0?s.featureId=h:s.featureId=null}return t.geometryType&&(s.geometryType=hE(r.getGeometry())),e(s)}}function N2(i){const t=oE(),e=i.length,s=new Array(e);for(let h=0;h<e;++h)s[h]=z0(i[h],t);const r=uE(),l=new Array(e);return function(h,u){if(r.properties=h.getPropertiesInternal(),r.resolution=u,t.featureId){const g=h.getId();g!==void 0?r.featureId=g:r.featureId=null}let f=0;for(let g=0;g<e;++g){const _=s[g](r);_&&(l[f]=_,f+=1)}return l.length=f,l}}function U3(i,t){const e=i.length,s=new Array(e);for(let r=0;r<e;++r){const l=i[r],h="filter"in l?Xn(l.filter,Ye,t):z3;let u;if(Array.isArray(l.style)){const f=l.style.length;u=new Array(f);for(let g=0;g<f;++g)u[g]=z0(l.style[g],t)}else u=[z0(l.style,t)];s[r]={filter:h,styles:u}}return function(r){const l=[];let h=!1;for(let u=0;u<e;++u){const f=s[u].filter;if(f(r)&&!(i[u].else&&h)){h=!0;for(const g of s[u].styles){const _=g(r);_&&l.push(_)}}}return l}}function z0(i,t){const e=Ao(i,"",t),s=Oo(i,"",t),r=k3(i,t),l=X3(i,t),h=si(i,"z-index",t);if(!e&&!s&&!r&&!l&&!Ea(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const u=new Gs;return function(f){let g=!0;if(e){const _=e(f);_&&(g=!1),u.setFill(_)}if(s){const _=s(f);_&&(g=!1),u.setStroke(_)}if(r){const _=r(f);_&&(g=!1),u.setText(_)}if(l){const _=l(f);_&&(g=!1),u.setImage(_)}return h&&u.setZIndex(h(f)),g?null:u}}function Ao(i,t,e){let s;if(t+"fill-pattern-src"in i)s=q3(i,t+"fill-",e);else{if(i[t+"fill-color"]==="none")return l=>null;s=Mg(i,t+"fill-color",e)}if(!s)return null;const r=new Hr;return function(l){const h=s(l);return h===dg?null:(r.setColor(h),r)}}function Oo(i,t,e){const s=si(i,t+"stroke-width",e),r=Mg(i,t+"stroke-color",e);if(!s&&!r)return null;const l=In(i,t+"stroke-line-cap",e),h=In(i,t+"stroke-line-join",e),u=cE(i,t+"stroke-line-dash",e),f=si(i,t+"stroke-line-dash-offset",e),g=si(i,t+"stroke-miter-limit",e),_=new jo;return function(y){if(r){const v=r(y);if(v===dg)return null;_.setColor(v)}if(s&&_.setWidth(s(y)),l){const v=l(y);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(v)}if(h){const v=h(y);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(v)}return u&&_.setLineDash(u(y)),f&&_.setLineDashOffset(f(y)),g&&_.setMiterLimit(g(y)),_}}function k3(i,t){const e="text-",s=In(i,e+"value",t);if(!s)return null;const r=Ao(i,e,t),l=Ao(i,e+"background-",t),h=Oo(i,e,t),u=Oo(i,e+"background-",t),f=In(i,e+"font",t),g=si(i,e+"max-angle",t),_=si(i,e+"offset-x",t),y=si(i,e+"offset-y",t),v=Dr(i,e+"overflow",t),p=In(i,e+"placement",t),S=si(i,e+"repeat",t),w=Mc(i,e+"scale",t),x=Dr(i,e+"rotate-with-view",t),b=si(i,e+"rotation",t),R=In(i,e+"align",t),L=In(i,e+"justify",t),O=In(i,e+"baseline",t),A=Dr(i,e+"keep-upright",t),k=cE(i,e+"padding",t),j=xc(i,e+"declutter-mode"),B=new pg({declutterMode:j});return function(Z){if(B.setText(s(Z)),r&&B.setFill(r(Z)),l&&B.setBackgroundFill(l(Z)),h&&B.setStroke(h(Z)),u&&B.setBackgroundStroke(u(Z)),f&&B.setFont(f(Z)),g&&B.setMaxAngle(g(Z)),_&&B.setOffsetX(_(Z)),y&&B.setOffsetY(y(Z)),v&&B.setOverflow(v(Z)),p){const J=p(Z);if(J!=="point"&&J!=="line")throw new Error("Expected point or line for text-placement");B.setPlacement(J)}if(S&&B.setRepeat(S(Z)),w&&B.setScale(w(Z)),x&&B.setRotateWithView(x(Z)),b&&B.setRotation(b(Z)),R){const J=R(Z);if(J!=="left"&&J!=="center"&&J!=="right"&&J!=="end"&&J!=="start")throw new Error("Expected left, right, center, start, or end for text-align");B.setTextAlign(J)}if(L){const J=L(Z);if(J!=="left"&&J!=="right"&&J!=="center")throw new Error("Expected left, right, or center for text-justify");B.setJustify(J)}if(O){const J=O(Z);if(J!=="bottom"&&J!=="top"&&J!=="middle"&&J!=="alphabetic"&&J!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");B.setTextBaseline(J)}return k&&B.setPadding(k(Z)),A&&B.setKeepUpright(A(Z)),B}}function X3(i,t){return"icon-src"in i?j3(i,t):"shape-points"in i?B3(i,t):"circle-radius"in i?Y3(i,t):null}function j3(i,t){const e="icon-",s=e+"src",r=fE(i[s],s),l=Xu(i,e+"anchor",t),h=Mc(i,e+"scale",t),u=si(i,e+"opacity",t),f=Xu(i,e+"displacement",t),g=si(i,e+"rotation",t),_=Dr(i,e+"rotate-with-view",t),y=I2(i,e+"anchor-origin"),v=P2(i,e+"anchor-x-units"),p=P2(i,e+"anchor-y-units"),S=V3(i,e+"color"),w=Z3(i,e+"cross-origin"),x=K3(i,e+"offset"),b=I2(i,e+"offset-origin"),R=ju(i,e+"width"),L=ju(i,e+"height"),O=H3(i,e+"size"),A=xc(i,e+"declutter-mode"),k=new Sc({src:r,anchorOrigin:y,anchorXUnits:v,anchorYUnits:p,color:S,crossOrigin:w,offset:x,offsetOrigin:b,height:L,width:R,size:O,declutterMode:A});return function(j){return u&&k.setOpacity(u(j)),f&&k.setDisplacement(f(j)),g&&k.setRotation(g(j)),_&&k.setRotateWithView(_(j)),h&&k.setScale(h(j)),l&&k.setAnchor(l(j)),k}}function B3(i,t){const e="shape-",s=e+"points",r=e+"radius",l=F0(i[s],s),h=F0(i[r],r),u=Ao(i,e,t),f=Oo(i,e,t),g=Mc(i,e+"scale",t),_=Xu(i,e+"displacement",t),y=si(i,e+"rotation",t),v=Dr(i,e+"rotate-with-view",t),p=ju(i,e+"radius2"),S=ju(i,e+"angle"),w=xc(i,e+"declutter-mode"),x=new Ec({points:l,radius:h,radius2:p,angle:S,declutterMode:w});return function(b){return u&&x.setFill(u(b)),f&&x.setStroke(f(b)),_&&x.setDisplacement(_(b)),y&&x.setRotation(y(b)),v&&x.setRotateWithView(v(b)),g&&x.setScale(g(b)),x}}function Y3(i,t){const e="circle-",s=Ao(i,e,t),r=Oo(i,e,t),l=si(i,e+"radius",t),h=Mc(i,e+"scale",t),u=Xu(i,e+"displacement",t),f=si(i,e+"rotation",t),g=Dr(i,e+"rotate-with-view",t),_=xc(i,e+"declutter-mode"),y=new pc({radius:5,declutterMode:_});return function(v){return l&&y.setRadius(l(v)),s&&y.setFill(s(v)),r&&y.setStroke(r(v)),u&&y.setDisplacement(u(v)),f&&y.setRotation(f(v)),g&&y.setRotateWithView(g(v)),h&&y.setScale(h(v)),y}}function si(i,t,e){if(!(t in i))return;const s=Xn(i[t],Gt,e);return function(r){return F0(s(r),t)}}function In(i,t,e){if(!(t in i))return null;const s=Xn(i[t],ei,e);return function(r){return fE(s(r),t)}}function q3(i,t,e){const s=In(i,t+"pattern-src",e),r=D2(i,t+"pattern-offset",e),l=D2(i,t+"pattern-size",e),h=Mg(i,t+"color",e);return function(u){return{src:s(u),offset:r&&r(u),size:l&&l(u),color:h&&h(u)}}}function Dr(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Ye,e);return function(r){const l=s(r);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${t}`);return l}}function Mg(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Yi,e);return function(r){return dE(s(r),t)}}function cE(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Sa,e);return function(r){return Bo(s(r),t)}}function Xu(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Sa,e);return function(r){const l=Bo(s(r),t);if(l.length!==2)throw new Error(`Expected two numbers for ${t}`);return l}}function D2(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Sa,e);return function(r){return gE(s(r),t)}}function Mc(i,t,e){if(!(t in i))return null;const s=Xn(i[t],Sa|Gt,e);return function(r){return W3(s(r),t)}}function ju(i,t){const e=i[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function H3(i,t){const e=i[t];if(e!==void 0){if(typeof e=="number")return ri(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function Z3(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function I2(i,t){const e=i[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function P2(i,t){const e=i[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function K3(i,t){const e=i[t];if(e!==void 0)return Bo(e,t)}function xc(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function V3(i,t){const e=i[t];if(e!==void 0)return dE(e,t)}function Bo(i,t){if(!Array.isArray(i))throw new Error(`Expected an array for ${t}`);const e=i.length;for(let s=0;s<e;++s)if(typeof i[s]!="number")throw new Error(`Expected an array of numbers for ${t}`);return i}function fE(i,t){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}function F0(i,t){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}function dE(i,t){if(typeof i=="string")return i;const e=Bo(i,t),s=e.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function gE(i,t){const e=Bo(i,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function W3(i,t){return typeof i=="number"?i:gE(i,t)}const ji={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function z2(i,t,e){return function(s,r,l,h,u){if(!s)return;if(!r&&!t)return s;const f=t?0:l[0]*r,g=t?0:l[1]*r,_=u?u[0]:0,y=u?u[1]:0;let v=i[0]+f/2+_,p=i[2]-f/2+_,S=i[1]+g/2+y,w=i[3]-g/2+y;v>p&&(v=(p+v)/2,p=v),S>w&&(S=(w+S)/2,w=S);let x=Jt(s[0],v,p),b=Jt(s[1],S,w);if(h&&e&&r){const R=30*r;x+=-R*Math.log(1+Math.max(0,v-s[0])/R)+R*Math.log(1+Math.max(0,s[0]-p)/R),b+=-R*Math.log(1+Math.max(0,S-s[1])/R)+R*Math.log(1+Math.max(0,s[1]-w)/R)}return[x,b]}}function Q3(i){return i}function _E(i){return Math.pow(i,3)}function Zr(i){return 1-_E(1-i)}function $3(i){return 3*i*i-2*i*i*i}function J3(i){return i}function mE(i,t,e,s){let r=0;const l=i[e-s],h=i[e-s+1];let u=0,f=0;for(;t<e;t+=s){const g=i[t]-l,_=i[t+1]-h;r+=f*g-u*_,u=g,f=_}return r/2}function yE(i,t,e,s){let r=0;for(let l=0,h=e.length;l<h;++l){const u=e[l];r+=mE(i,t,u,s),t=u}return r}function t8(i,t,e,s){let r=0;for(let l=0,h=e.length;l<h;++l){const u=e[l];r+=yE(i,t,u,s),t=u[u.length-1]}return r}function F2(i,t,e,s,r,l,h){const u=i[t],f=i[t+1],g=i[e]-u,_=i[e+1]-f;let y;if(g===0&&_===0)y=t;else{const v=((r-u)*g+(l-f)*_)/(g*g+_*_);if(v>1)y=e;else if(v>0){for(let p=0;p<s;++p)h[p]=yi(i[t+p],i[e+p],v);h.length=s;return}else y=t}for(let v=0;v<s;++v)h[v]=i[y+v];h.length=s}function xg(i,t,e,s,r){let l=i[t],h=i[t+1];for(t+=s;t<e;t+=s){const u=i[t],f=i[t+1],g=ma(l,h,u,f);g>r&&(r=g),l=u,h=f}return r}function wg(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l){const u=e[l];r=xg(i,t,u,s,r),t=u}return r}function e8(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l){const u=e[l];r=wg(i,t,u,s,r),t=u[u.length-1]}return r}function bg(i,t,e,s,r,l,h,u,f,g,_){if(t==e)return g;let y,v;if(r===0){if(v=ma(h,u,i[t],i[t+1]),v<g){for(y=0;y<s;++y)f[y]=i[t+y];return f.length=s,v}return g}_=_||[NaN,NaN];let p=t+s;for(;p<e;)if(F2(i,p-s,p,s,h,u,_),v=ma(h,u,_[0],_[1]),v<g){for(g=v,y=0;y<s;++y)f[y]=_[y];f.length=s,p+=s}else p+=s*Math.max((Math.sqrt(v)-Math.sqrt(g))/r|0,1);if(l&&(F2(i,e-s,t,s,h,u,_),v=ma(h,u,_[0],_[1]),v<g)){for(g=v,y=0;y<s;++y)f[y]=_[y];f.length=s}return g}function Cg(i,t,e,s,r,l,h,u,f,g,_){_=_||[NaN,NaN];for(let y=0,v=e.length;y<v;++y){const p=e[y];g=bg(i,t,p,s,r,l,h,u,f,g,_),t=p}return g}function i8(i,t,e,s,r,l,h,u,f,g,_){_=_||[NaN,NaN];for(let y=0,v=e.length;y<v;++y){const p=e[y];g=Cg(i,t,p,s,r,l,h,u,f,g,_),t=p[p.length-1]}return g}function n8(i,t,e,s){for(let r=0,l=e.length;r<l;++r)i[t++]=e[r];return t}function wc(i,t,e,s){for(let r=0,l=e.length;r<l;++r){const h=e[r];for(let u=0;u<s;++u)i[t++]=h[u]}return t}function Yo(i,t,e,s,r){r=r||[];let l=0;for(let h=0,u=e.length;h<u;++h){const f=wc(i,t,e[h],s);r[l++]=f,t=f}return r.length=l,r}function vE(i,t,e,s,r){r=r||[];let l=0;for(let h=0,u=e.length;h<u;++h){const f=Yo(i,t,e[h],s,r[l]);f.length===0&&(f[0]=t),r[l++]=f,t=f[f.length-1]}return r.length=l,r}class Go extends Ta{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Go(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,s,r){return r<ba(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,s,r))}getArea(){return mE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Cs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=yc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Go(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wc(this.flatCoordinates,0,t,this.stride),this.changed()}}let Bu=class EE extends Ta{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new EE(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,r){const l=this.flatCoordinates,h=ma(t,e,l[0],l[1]);if(h<r){const u=this.stride;for(let f=0;f<u;++f)s[f]=l[f];return s.length=u,h}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return xv(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ig(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=n8(this.flatCoordinates,0,t,this.stride),this.changed()}};function s8(i,t,e,s,r){return!Cv(r,function(h){return!ga(i,t,e,s,h[0],h[1])})}function ga(i,t,e,s,r,l){let h=0,u=i[e-s],f=i[e-s+1];for(;t<e;t+=s){const g=i[t],_=i[t+1];f<=l?_>l&&(g-u)*(l-f)-(r-u)*(_-f)>0&&h++:_<=l&&(g-u)*(l-f)-(r-u)*(_-f)<0&&h--,u=g,f=_}return h!==0}function Tg(i,t,e,s,r,l){if(e.length===0||!ga(i,t,e[0],s,r,l))return!1;for(let h=1,u=e.length;h<u;++h)if(ga(i,e[h-1],e[h],s,r,l))return!1;return!0}function a8(i,t,e,s,r,l){if(e.length===0)return!1;for(let h=0,u=e.length;h<u;++h){const f=e[h];if(Tg(i,t,f,s,r,l))return!0;t=f[f.length-1]}return!1}function Rg(i,t,e,s,r,l,h){let u,f,g,_,y,v,p;const S=r[l+1],w=[];for(let R=0,L=e.length;R<L;++R){const O=e[R];for(_=i[O-s],v=i[O-s+1],u=t;u<O;u+=s)y=i[u],p=i[u+1],(S<=v&&p<=S||v<=S&&S<=p)&&(g=(S-v)/(p-v)*(y-_)+_,w.push(g)),_=y,v=p}let x=NaN,b=-1/0;for(w.sort(Pn),_=w[0],u=1,f=w.length;u<f;++u){y=w[u];const R=Math.abs(y-_);R>b&&(g=(_+y)/2,Tg(i,t,e,s,g,S)&&(x=g,b=R)),_=y}return isNaN(x)&&(x=r[l]),h?(h.push(x,S,b),h):[x,S,b]}function pE(i,t,e,s,r){let l=[];for(let h=0,u=e.length;h<u;++h){const f=e[h];l=Rg(i,t,f,s,r,2*h,l),t=f[f.length-1]}return l}function SE(i,t,e,s,r){let l;for(t+=s;t<e;t+=s)if(l=r(i.slice(t-s,t),i.slice(t,t+s)),l)return l;return!1}function bc(i,t,e,s,r,l){return l=l??bv(Di(),i,t,e,s),ni(r,l)?l[0]>=r[0]&&l[2]<=r[2]||l[1]>=r[1]&&l[3]<=r[3]?!0:SE(i,t,e,s,function(h,u){return nM(r,h,u)}):!1}function r8(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l){if(bc(i,t,e[l],s,r))return!0;t=e[l]}return!1}function ME(i,t,e,s,r){return!!(bc(i,t,e,s,r)||ga(i,t,e,s,r[0],r[1])||ga(i,t,e,s,r[0],r[3])||ga(i,t,e,s,r[2],r[1])||ga(i,t,e,s,r[2],r[3]))}function xE(i,t,e,s,r){if(!ME(i,t,e[0],s,r))return!1;if(e.length===1)return!0;for(let l=1,h=e.length;l<h;++l)if(s8(i,e[l-1],e[l],s,r)&&!bc(i,e[l-1],e[l],s,r))return!1;return!0}function l8(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l){const u=e[l];if(xE(i,t,u,s,r))return!0;t=u[u.length-1]}return!1}function o8(i,t,e,s){for(;t<e-s;){for(let r=0;r<s;++r){const l=i[t+r];i[t+r]=i[e-s+r],i[e-s+r]=l}t+=s,e-=s}}function Ag(i,t,e,s){let r=0,l=i[e-s],h=i[e-s+1];for(;t<e;t+=s){const u=i[t],f=i[t+1];r+=(u-l)*(f+h),l=u,h=f}return r===0?void 0:r>0}function Og(i,t,e,s,r){r=r!==void 0?r:!1;for(let l=0,h=e.length;l<h;++l){const u=e[l],f=Ag(i,t,u,s);if(l===0){if(r&&f||!r&&!f)return!1}else if(r&&!f||!r&&f)return!1;t=u}return!0}function wE(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l){const u=e[l];if(!Og(i,t,u,s,r))return!1;u.length&&(t=u[u.length-1])}return!0}function Yu(i,t,e,s,r){r=r!==void 0?r:!1;for(let l=0,h=e.length;l<h;++l){const u=e[l],f=Ag(i,t,u,s);(l===0?r&&f||!r&&!f:r&&!f||!r&&f)&&o8(i,t,u,s),t=u}return t}function U0(i,t,e,s,r){for(let l=0,h=e.length;l<h;++l)t=Yu(i,t,e[l],s,r);return t}function h8(i,t){const e=[];let s=0,r=0,l;for(let h=0,u=t.length;h<u;++h){const f=t[h],g=Ag(i,s,f,2);if(l===void 0&&(l=g),g===l)e.push(t.slice(r,h+1));else{if(e.length===0)continue;e[e.length-1].push(t[r])}r=h+1,s=f}return e}class Is extends Ta{constructor(t,e,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&s?(this.setFlatCoordinates(e,t),this.ends_=s):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?cn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Is(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,s,r){return r<ba(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,s,r))}containsXY(t,e){return Tg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return yE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Yu(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,wo(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ds(this.getExtent());this.flatInteriorPoint_=Rg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Bu(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Go(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,s=this.ends_,r=[];let l=0;for(let h=0,u=s.length;h<u;++h){const f=s[h],g=new Go(e.slice(l,f),t);r.push(g),l=f}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Og(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Yu(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=vg(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,s),new Is(e,"XY",s)}getType(){return"Polygon"}intersectsExtent(t){return xE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=Yo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}function U2(i){if(rc(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],s=i[2],r=i[3],l=[t,e,t,r,s,r,s,e,t,e];return new Is(l,"XY",[l.length])}function Gg(i,t,e,s){const r=Ft(t)/e[0],l=qe(t)/e[1];return s?Math.min(i,Math.max(r,l)):Math.min(i,Math.min(r,l))}function Lg(i,t,e){let s=Math.min(i,t);const r=50;return s*=Math.log(1+r*Math.max(0,i/t-1))/r+1,e&&(s=Math.max(s,e),s/=Math.log(1+r*Math.max(0,e/i-1))/r+1),Jt(s,e/2,t*2)}function u8(i,t,e,s){return t=t!==void 0?t:!0,function(r,l,h,u){if(r!==void 0){const f=i[0],g=i[i.length-1],_=e?Gg(f,e,h,s):f;if(u)return t?Lg(r,_,g):Jt(r,g,_);const y=Math.min(_,r),v=Math.floor(tg(i,y,l));return i[v]>_&&v<i.length-1?i[v+1]:i[v]}}}function c8(i,t,e,s,r,l){return s=s!==void 0?s:!0,e=e!==void 0?e:0,function(h,u,f,g){if(h!==void 0){const _=r?Gg(t,r,f,l):t;if(g)return s?Lg(h,_,e):Jt(h,e,_);const y=1e-9,v=Math.ceil(Math.log(t/_)/Math.log(i)-y),p=-u*(.5-y)+.5,S=Math.min(_,h),w=Math.floor(Math.log(t/S)/Math.log(i)+p),x=Math.max(v,w),b=t/Math.pow(i,x);return Jt(b,e,_)}}}function k2(i,t,e,s,r){return e=e!==void 0?e:!0,function(l,h,u,f){if(l!==void 0){const g=s?Gg(i,s,u,r):i;return!e||!f?Jt(l,t,g):Lg(l,g,t)}}}function Ng(i){if(i!==void 0)return 0}function X2(i){if(i!==void 0)return i}function f8(i){const t=2*Math.PI/i;return function(e,s){if(s)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function d8(i){const t=As(5);return function(e,s){return s||e===void 0?e:Math.abs(e)<=t?0:e}}const g8=42,Dg=256,h0=0;class ln extends dn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=cg(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&zM(),t.center&&(t.center=Dn(t.center,this.projection_)),t.extent&&(t.extent=bs(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const u in ji)delete e[u];this.setProperties(e,!0);const s=m8(t);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=s.minZoom;const r=_8(t),l=s.constraint,h=y8(t);this.constraints_={center:r,resolution:l,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const s=this.getCenterInternal();if(s){const r=t||[0,0,0,0];e=e||[0,0,0,0];const l=this.getResolution(),h=l/2*(r[3]-e[3]+e[1]-r[1]),u=l/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([s[0]+h,s[1]-u])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let s=0;s<e.length;++s){let r=arguments[s];r.center&&(r=Object.assign({},r),r.center=Dn(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Dn(r.anchor,this.getProjection())),e[s]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,s;e>1&&typeof arguments[e-1]=="function"&&(s=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){const _=arguments[r];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(r===e){s&&Eu(s,!0);return}let l=Date.now(),h=this.targetCenter_.slice(),u=this.targetResolution_,f=this.targetRotation_;const g=[];for(;r<e;++r){const _=arguments[r],y={start:l,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||$3,callback:s};if(_.center&&(y.sourceCenter=h,y.targetCenter=_.center.slice(),h=y.targetCenter),_.zoom!==void 0?(y.sourceResolution=u,y.targetResolution=this.getResolutionForZoom(_.zoom),u=y.targetResolution):_.resolution&&(y.sourceResolution=u,y.targetResolution=_.resolution,u=y.targetResolution),_.rotation!==void 0){y.sourceRotation=f;const v=ya(_.rotation-f+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=f+v,f=y.targetRotation}v8(y)?y.complete=!0:l+=y.duration,g.push(y)}this.animations_.push(g),this.setHint(Ue.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ue.ANIMATING]>0}getInteracting(){return this.hints_[Ue.INTERACTING]>0}cancelAnimations(){this.setHint(Ue.ANIMATING,-this.hints_[Ue.ANIMATING]);let t;for(let e=0,s=this.animations_.length;e<s;++e){const r=this.animations_[e];if(r[0].callback&&Eu(r[0].callback,!1),!t)for(let l=0,h=r.length;l<h;++l){const u=r[l];if(!u.complete){t=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let s=this.animations_.length-1;s>=0;--s){const r=this.animations_[s];let l=!0;for(let h=0,u=r.length;h<u;++h){const f=r[h];if(f.complete)continue;const g=t-f.start;let _=f.duration>0?g/f.duration:1;_>=1?(f.complete=!0,_=1):l=!1;const y=f.easing(_);if(f.sourceCenter){const v=f.sourceCenter[0],p=f.sourceCenter[1],S=f.targetCenter[0],w=f.targetCenter[1];this.nextCenter_=f.targetCenter;const x=v+y*(S-v),b=p+y*(w-p);this.targetCenter_=[x,b]}if(f.sourceResolution&&f.targetResolution){const v=y===1?f.targetResolution:f.sourceResolution+y*(f.targetResolution-f.sourceResolution);if(f.anchor){const p=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(v,0,p,!0);this.targetCenter_=this.calculateCenterZoom(S,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const v=y===1?ya(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+y*(f.targetRotation-f.sourceRotation);if(f.anchor){const p=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(p,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!f.complete)break}if(l){this.animations_[s]=null,this.setHint(Ue.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const h=r[0].callback;h&&Eu(h,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let s;const r=this.getCenterInternal();return r!==void 0&&(s=[r[0]-e[0],r[1]-e[1]],sg(s,t-this.getRotation()),rM(s,e)),s}calculateCenterZoom(t,e){let s;const r=this.getCenterInternal(),l=this.getResolution();if(r!==void 0&&l!==void 0){const h=e[0]-t*(e[0]-r[0])/l,u=e[1]-t*(e[1]-r[1])/l;s=[h,u]}return s}getViewportSize_(t){const e=this.viewportSize_;if(t){const s=e[0],r=e[1];return[Math.abs(s*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(s*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&L0(t,this.getProjection())}getCenterInternal(){return this.get(ji.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return kv(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();jt(e,"The view center is not defined");const s=this.getResolution();jt(s!==void 0,"The view resolution is not defined");const r=this.getRotation();return jt(r!==void 0,"The view rotation is not defined"),C0(e,s,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ji.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(bs(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const s=Ft(t)/e[0],r=qe(t)/e[1];return Math.max(s,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(e/s)/Math.log(t);return function(l){return e/Math.pow(t,l*r)}}getRotation(){return this.get(ji.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),s=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,l=Math.log(s/r)/e;return function(h){return Math.log(s/h)/e/l}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const s=this.padding_;return s&&(e=[e[0]-s[1]-s[3],e[1]-s[0]-s[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),s=this.getRotation();let r=this.getCenterInternal();const l=this.padding_;if(l){const h=this.getViewportSizeMinusPadding_();r=u0(r,this.getViewportSize_(),[h[0]/2+l[3],h[1]/2+l[0]],e,s)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:s,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,s,r;if(this.resolutions_){const l=tg(this.resolutions_,t,1);e=l,s=this.resolutions_[l],l==this.resolutions_.length-1?r=2:r=s/this.resolutions_[l+1]}else s=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(s/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const e=Jt(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(s,Jt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let s;if(jt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){jt(!rc(t),"Cannot fit empty extent provided as `geometry`");const r=bs(t,this.getProjection());s=U2(r)}else if(t.getType()==="Circle"){const r=bs(t.getExtent(),this.getProjection());s=U2(r),s.rotate(this.getRotation(),Ds(r))}else s=t;this.fitInternal(s,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),s=Math.cos(e),r=Math.sin(-e),l=t.getFlatCoordinates(),h=t.getStride();let u=1/0,f=1/0,g=-1/0,_=-1/0;for(let y=0,v=l.length;y<v;y+=h){const p=l[y]*s-l[y+1]*r,S=l[y]*r+l[y+1]*s;u=Math.min(u,p),f=Math.min(f,S),g=Math.max(g,p),_=Math.max(_,S)}return[u,f,g,_]}fitInternal(t,e){e=e||{};let s=e.size;s||(s=this.getViewportSizeMinusPadding_());const r=e.padding!==void 0?e.padding:[0,0,0,0],l=e.nearest!==void 0?e.nearest:!1;let h;e.minResolution!==void 0?h=e.minResolution:e.maxZoom!==void 0?h=this.getResolutionForZoom(e.maxZoom):h=0;const u=this.rotatedExtentForGeometry(t);let f=this.getResolutionForExtentInternal(u,[s[0]-r[1]-r[3],s[1]-r[0]-r[2]]);f=isNaN(f)?h:Math.max(f,h),f=this.getConstrainedResolution(f,l?0:1);const g=this.getRotation(),_=Math.sin(g),y=Math.cos(g),v=Ds(u);v[0]+=(r[1]-r[3])/2*f,v[1]+=(r[0]-r[2])/2*f;const p=v[0]*y-v[1]*_,S=v[1]*y+v[0]*_,w=this.getConstrainedCenter([p,S],f),x=e.callback?e.callback:xo;e.duration!==void 0?this.animateInternal({resolution:f,center:w,duration:e.duration,easing:e.easing},x):(this.targetResolution_=f,this.targetCenter_=w,this.applyTargetState_(!1,!0),Eu(x,!0))}centerOn(t,e,s){this.centerOnInternal(Dn(t,this.getProjection()),e,s)}centerOnInternal(t,e,s){this.setCenterInternal(u0(t,e,s,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,s,r){let l;const h=this.padding_;if(h&&t){const u=this.getViewportSizeMinusPadding_(-s),f=u0(t,r,[u[0]/2+h[3],u[1]/2+h[0]],e,s);l=[t[0]-f[0],t[1]-f[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=L0(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Dn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const s=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*t,0,r,s);e&&(this.targetCenter_=this.calculateCenterZoom(l,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Dn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const s=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,s);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Dn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const s=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,s),l=this.getViewportSize_(r),h=this.constraints_.resolution(this.targetResolution_,0,l,s),u=this.constraints_.center(this.targetCenter_,h,l,s,this.calculateCenterShift(this.targetCenter_,h,r,l));this.get(ji.ROTATION)!==r&&this.set(ji.ROTATION,r),this.get(ji.RESOLUTION)!==h&&(this.set(ji.RESOLUTION,h),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(ji.CENTER)||!Nu(this.get(ji.CENTER),u))&&this.set(ji.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,s){t=t!==void 0?t:200;const r=e||0,l=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(l),u=this.constraints_.resolution(this.targetResolution_,r,h),f=this.constraints_.center(this.targetCenter_,u,h,!1,this.calculateCenterShift(this.targetCenter_,u,l,h));if(t===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=l,this.targetCenter_=f,this.applyTargetState_();return}s=s||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==l||!this.getCenterInternal()||!Nu(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:f,resolution:u,duration:t,easing:Zr,anchor:s}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ue.INTERACTING,1)}endInteraction(t,e,s){s=s&&Dn(s,this.getProjection()),this.endInteractionInternal(t,e,s)}endInteractionInternal(t,e,s){this.getInteracting()&&(this.setHint(Ue.INTERACTING,-1),this.resolveConstraints(t,e,s))}getConstrainedCenter(t,e){const s=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),s)}getConstrainedZoom(t,e){const s=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(s,e))}getConstrainedResolution(t,e){e=e||0;const s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,s)}}function Eu(i,t){setTimeout(function(){i(t)},0)}function _8(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return z2(i.extent,i.constrainOnlyCenter,e)}const t=cg(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,z2(e,!1,!1)}return Q3}function m8(i){let t,e,s,h=i.minZoom!==void 0?i.minZoom:h0,u=i.maxZoom!==void 0?i.maxZoom:28;const f=i.zoomFactor!==void 0?i.zoomFactor:2,g=i.multiWorld!==void 0?i.multiWorld:!1,_=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,y=i.showFullExtent!==void 0?i.showFullExtent:!1,v=cg(i.projection,"EPSG:3857"),p=v.getExtent();let S=i.constrainOnlyCenter,w=i.extent;if(!g&&!w&&v.isGlobal()&&(S=!1,w=p),i.resolutions!==void 0){const x=i.resolutions;e=x[h],s=x[u]!==void 0?x[u]:x[x.length-1],i.constrainResolution?t=u8(x,_,!S&&w,y):t=k2(e,s,_,!S&&w,y)}else{const b=(p?Math.max(Ft(p),qe(p)):360*lg.degrees/v.getMetersPerUnit())/Dg/Math.pow(2,h0),R=b/Math.pow(2,28-h0);e=i.maxResolution,e!==void 0?h=0:e=b/Math.pow(f,h),s=i.minResolution,s===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?s=e/Math.pow(f,u):s=b/Math.pow(f,u):s=R),u=h+Math.floor(Math.log(e/s)/Math.log(f)),s=e/Math.pow(f,u-h),i.constrainResolution?t=c8(f,e,s,_,!S&&w,y):t=k2(e,s,_,!S&&w,y)}return{constraint:t,maxResolution:e,minResolution:s,minZoom:h,zoomFactor:f}}function y8(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?d8():e===!1?X2:typeof e=="number"?f8(e):X2}return Ng}function v8(i){return!(i.sourceCenter&&i.targetCenter&&!Nu(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function u0(i,t,e,s,r){const l=Math.cos(-r);let h=Math.sin(-r),u=i[0]*l-i[1]*h,f=i[1]*l+i[0]*h;u+=(t[0]/2-e[0])*s,f+=(e[1]-t[1]/2)*s,h=-h;const g=u*l-f*h,_=f*l+u*h;return[g,_]}const qt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class bE extends dn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[qt.OPACITY]=t.opacity!==void 0?t.opacity:1,jt(typeof e[qt.OPACITY]=="number","Layer opacity must be a number"),e[qt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[qt.Z_INDEX]=t.zIndex,e[qt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[qt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[qt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[qt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},s=this.getZIndex();return e.opacity=Jt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=s===void 0&&!e.managed?1/0:s,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Et()}getLayerStatesArray(t){return Et()}getExtent(){return this.get(qt.EXTENT)}getMaxResolution(){return this.get(qt.MAX_RESOLUTION)}getMinResolution(){return this.get(qt.MIN_RESOLUTION)}getMinZoom(){return this.get(qt.MIN_ZOOM)}getMaxZoom(){return this.get(qt.MAX_ZOOM)}getOpacity(){return this.get(qt.OPACITY)}getSourceState(){return Et()}getVisible(){return this.get(qt.VISIBLE)}getZIndex(){return this.get(qt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(qt.EXTENT,t)}setMaxResolution(t){this.set(qt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(qt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(qt.MAX_ZOOM,t)}setMinZoom(t){this.set(qt.MIN_ZOOM,t)}setOpacity(t){jt(typeof t=="number","Layer opacity must be a number"),this.set(qt.OPACITY,t)}setVisible(t){this.set(qt.VISIBLE,t)}setZIndex(t){this.set(qt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Cc extends bE{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(qt.SOURCE,this.handleSourcePropertyChange_);const s=t.source?t.source:null;this.setSource(s)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(qt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(te(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Lt(t,pt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const s=this.getMapInternal();!t&&s&&(t=s.getView()),t instanceof ln?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&s&&(e.layerStatesArray=s.getLayerGroup().getLayerStatesArray());let r;if(e.layerStatesArray){if(r=e.layerStatesArray.find(h=>h.layer===this),!r)return!1}else r=this.getLayerState();const l=this.getExtent();return Ig(r,e.viewState)&&(!l||ni(l,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];const s=t instanceof ln?t.getViewStateAndExtent():t;let r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){const s=this.getRenderer();return s.prepareFrame(t)?(this.rendered=!0,s.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(qt.MAP,t)}getMapInternal(){return this.get(qt.MAP)}setMap(t){this.mapPrecomposeKey_&&(te(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(te(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Lt(t,Gi.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Lt(this,pt.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,s=this.getLayerState(!1);jt(!e.some(r=>r.layer===s.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(s)}setSource(t){this.set(qt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Ig(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const s=t.zoom;return s>i.minZoom&&s<=i.maxZoom}const j2={RENDER_ORDER:"renderOrder"};class CE extends Cc{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(j2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const s=this.getDeclutter();s in t.declutter||(t.declutter[s]=new lE(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(j2.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?Jv:t;const e=E8(t);this.styleFunction_=t===null?void 0:Ux(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function E8(i){if(i===void 0)return Jv;if(!i)return null;if(typeof i=="function"||i instanceof Gs)return i;if(!Array.isArray(i))return N2([i]);if(i.length===0)return[];const t=i.length,e=i[0];if(e instanceof Gs){const r=new Array(t);for(let l=0;l<t;++l){const h=i[l];if(!(h instanceof Gs))throw new Error("Expected a list of style instances");r[l]=h}return r}if("style"in e){const r=new Array(t);for(let l=0;l<t;++l){const h=i[l];if(!("style"in h))throw new Error("Expected a list of rules with a style property");r[l]=h}return F3(r)}return N2(i)}class p8 extends CE{constructor(t){super(t)}createRenderer(){return new r3(this)}}const ii={ADD:"add",REMOVE:"remove"},B2={LENGTH:"length"};class pu extends kn{constructor(t,e,s){super(t),this.element=e,this.index=s}}class hn extends dn{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let s=0,r=this.array_.length;s<r;++s)this.assertUnique_(this.array_[s],s);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,s=t.length;e<s;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)t(e[s],s,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(B2.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new pu(ii.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let s=0,r=e.length;s<r;++s)if(e[s]===t)return this.removeAt(s)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new pu(ii.REMOVE,e,t)),e}setAt(t,e){const s=this.getLength();if(t>=s){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new pu(ii.REMOVE,r,t)),this.dispatchEvent(new pu(ii.ADD,e,t))}updateLength_(){this.set(B2.LENGTH,this.array_.length)}assertUnique_(t,e){for(let s=0,r=this.array_.length;s<r;++s)if(this.array_[s]===t&&s!==e)throw new Error("Duplicate item added to a unique collection")}}let S8=!1;function M8(i,t,e,s,r,l,h){const u=new XMLHttpRequest;u.open("GET",typeof i=="function"?i(e,s,r):i,!0),t.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=S8,u.onload=function(f){if(!u.status||u.status>=200&&u.status<300){const g=t.getType();try{let _;g=="text"||g=="json"?_=u.responseText:g=="xml"?_=u.responseXML||u.responseText:g=="arraybuffer"&&(_=u.response),_?l(t.readFeatures(_,{extent:e,featureProjection:r}),t.readProjection(_)):h()}catch{h()}}else h()},u.onerror=h,u.send()}function Y2(i,t){return function(e,s,r,l,h){M8(i,t,e,s,r,(u,f)=>{this.addFeatures(u),l!==void 0&&l(u)},()=>{this.changed(),h!==void 0&&h()})}}function x8(i,t){return[[-1/0,-1/0,1/0,1/0]]}function w8(i,t){return[i]}class Tc extends dn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Tc(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const s=this.getStyle();return s&&t.setStyle(s),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(te(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Lt(t,pt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?b8(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function b8(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(jt(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}function TE(i,t,e,s){const r=[];let l=Di();for(let h=0,u=e.length;h<u;++h){const f=e[h];l=ng(i,t,f[0],s),r.push((l[0]+l[2])/2,(l[1]+l[3])/2),t=f[f.length-1]}return r}function qu(i,t,e,s,r,l,h){let u,f;const g=(e-t)/s;if(g===1)u=t;else if(g===2)u=t,f=r;else if(g!==0){let _=i[t],y=i[t+1],v=0;const p=[0];for(let x=t+s;x<e;x+=s){const b=i[x],R=i[x+1];v+=Math.sqrt((b-_)*(b-_)+(R-y)*(R-y)),p.push(v),_=b,y=R}const S=r*v,w=WS(p,S);w<0?(f=(S-p[-w-2])/(p[-w-1]-p[-w-2]),u=t+(-w-2)*s):u=t+w*s}h=h>1?h:2,l=l||new Array(h);for(let _=0;_<h;++_)l[_]=u===void 0?NaN:f===void 0?i[u+_]:yi(i[u+_],i[u+s+_],f);return l}function k0(i,t,e,s,r,l){if(e==t)return null;let h;if(r<i[t+s-1])return l?(h=i.slice(t,t+s),h[s-1]=r,h):null;if(i[e-1]<r)return l?(h=i.slice(e-s,e),h[s-1]=r,h):null;if(r==i[t+s-1])return i.slice(t,t+s);let u=t/s,f=e/s;for(;u<f;){const v=u+f>>1;r<i[(v+1)*s-1]?f=v:u=v+1}const g=i[u*s-1];if(r==g)return i.slice((u-1)*s,(u-1)*s+s);const _=i[(u+1)*s-1],y=(r-g)/(_-g);h=[];for(let v=0;v<s-1;++v)h.push(yi(i[(u-1)*s+v],i[u*s+v],y));return h.push(r),h}function C8(i,t,e,s,r,l,h){if(h)return k0(i,t,e[e.length-1],s,r,l);let u;if(r<i[s-1])return l?(u=i.slice(0,s),u[s-1]=r,u):null;if(i[i.length-1]<r)return l?(u=i.slice(i.length-s),u[s-1]=r,u):null;for(let f=0,g=e.length;f<g;++f){const _=e[f];if(t!=_){if(r<i[t+s-1])return null;if(r<=i[_-1])return k0(i,t,_,s,r,!1);t=_}}return null}class Hu extends tE{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(te),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,s=t.length;e<s;++e)this.changeEventsKeys_.push(Lt(t[e],pt.CHANGE,this.changed,this))}clone(){const t=new Hu(c0(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,s,r){if(r<ba(this.getExtent(),t,e))return r;const l=this.geometries_;for(let h=0,u=l.length;h<u;++h)r=l[h].closestPointXY(t,e,s,r);return r}containsXY(t,e){const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)if(s[r].containsXY(t,e))return!0;return!1}computeExtent(t){zo(t);const e=this.geometries_;for(let s=0,r=e.length;s<r;++s)wv(t,e[s].getExtent());return t}getGeometries(){return c0(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let s=0,r=e.length;s<r;++s)e[s].getType()===this.getType()?t=t.concat(e[s].getGeometriesArrayRecursive()):t.push(e[s]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],s=this.geometries_;let r=!1;for(let l=0,h=s.length;l<h;++l){const u=s[l],f=u.getSimplifiedGeometry(t);e.push(f),f!==u&&(r=!0)}return r?new Hu(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let s=0,r=e.length;s<r;++s)if(e[s].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)s[r].rotate(t,e);this.changed()}scale(t,e,s){s||(s=Ds(this.getExtent()));const r=this.geometries_;for(let l=0,h=r.length;l<h;++l)r[l].scale(t,e,s);this.changed()}setGeometries(t){this.setGeometriesArray(c0(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let s=0,r=e.length;s<r;++s)e[s].applyTransform(t);this.changed()}translate(t,e){const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)s[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function c0(i){return i.map(t=>t.clone())}class Yr extends Ta{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){cn(this.flatCoordinates,t),this.changed()}clone(){const t=new Yr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,r){return r<ba(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,s,r))}forEachSegment(t){return SE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,k0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Cs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return qu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=yc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Yr(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wc(this.flatCoordinates,0,t,this.stride),this.changed()}}class Zu extends Ta{constructor(t,e,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&s)this.setFlatCoordinates(e,t),this.ends_=s;else{const r=t,l=[],h=[];for(let f=0,g=r.length;f<g;++f){const _=r[f];cn(l,_.getFlatCoordinates()),h.push(l.length)}const u=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(u,l),this.ends_=h}}appendLineString(t){cn(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Zu(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,s,r){return r<ba(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wg(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,s,r))}getCoordinateAtM(t,e,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,s=s!==void 0?s:!1,C8(this.flatCoordinates,0,this.ends_,this.stride,t,e,s))}getCoordinates(){return wo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Yr(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,s=this.layout,r=[];let l=0;for(let h=0,u=e.length;h<u;++h){const f=e[h],g=new Yr(t.slice(l,f),s);r.push(g),l=f}return r}getLength(){const t=this.ends_;let e=0,s=0;for(let r=0,l=t.length;r<l;++r)s+=Eg(this.flatCoordinates,e,t[r],this.stride),e=t[r];return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let s=0;const r=this.ends_,l=this.stride;for(let h=0,u=r.length;h<u;++h){const f=r[h],g=qu(e,s,f,l,.5);cn(t,g),s=f}return t}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=Kv(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,s),new Zu(e,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(t){return r8(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=Yo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}class Rc extends Ta{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){cn(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new Rc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,r){if(r<ba(this.getExtent(),t,e))return r;const l=this.flatCoordinates,h=this.stride;for(let u=0,f=l.length;u<f;u+=h){const g=ma(t,e,l[u],l[u+1]);if(g<r){r=g;for(let _=0;_<h;++_)s[_]=l[u+_];s.length=h}}return r}getCoordinates(){return Cs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Bu(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,s=this.stride,r=[];for(let l=0,h=t.length;l<h;l+=s){const u=new Bu(t.slice(l,l+s),e);r.push(u)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,s=this.stride;for(let r=0,l=e.length;r<l;r+=s){const h=e[r],u=e[r+1];if(ig(t,h,u))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wc(this.flatCoordinates,0,t,this.stride),this.changed()}}class Ku extends Ta{constructor(t,e,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(t[0])){const r=t,l=[],h=[];for(let u=0,f=r.length;u<f;++u){const g=r[u],_=l.length,y=g.getEnds();for(let v=0,p=y.length;v<p;++v)y[v]+=_;cn(l,g.getFlatCoordinates()),h.push(y)}e=r.length===0?this.getLayout():r[0].getLayout(),t=l,s=h}e!==void 0&&s?(this.setFlatCoordinates(e,t),this.endss_=s):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;cn(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,l=e.length;r<l;++r)e[r]+=s}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const s=new Ku(this.flatCoordinates.slice(),this.layout,e);return s.applyProperties(this),s}closestPointXY(t,e,s,r){return r<ba(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(e8(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),i8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,s,r))}containsXY(t,e){return a8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return t8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),U0(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,N0(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=TE(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=pE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Rc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;wE(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=U0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=vx(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,s),new Ku(e,"XY",s)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const l=this.endss_[t-1];e=l[l.length-1]}const s=this.endss_[t].slice(),r=s[s.length-1];if(e!==0)for(let l=0,h=s.length;l<h;++l)s[l]-=e;return new Is(this.flatCoordinates.slice(e,r),this.layout,s)}getPolygons(){const t=this.layout,e=this.flatCoordinates,s=this.endss_,r=[];let l=0;for(let h=0,u=s.length;h<u;++h){const f=s[h].slice(),g=f[f.length-1];if(l!==0)for(let y=0,v=f.length;y<v;++y)f[y]-=l;const _=new Is(e.slice(l,g),t,f);r.push(_),l=g}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return l8(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=vE(this.flatCoordinates,0,t,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const r=s[s.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const q2=Hi();class vi{constructor(t,e,s,r,l,h){this.styleFunction,this.extent_,this.id_=h,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s||null,this.properties_=l,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?xv(this.flatCoordinates_):ng(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Ds(this.getExtent());this.flatInteriorPoints_=Rg(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=h8(this.flatCoordinates_,this.ends_),e=TE(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=pE(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=qu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const s=this.ends_;for(let r=0,l=s.length;r<l;++r){const h=s[r],u=qu(t,e,h,2,.5);cn(this.flatMidpoints_,u),e=h}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=$t(t);const e=t.getExtent(),s=t.getWorldExtent();if(e&&s){const r=qe(s)/qe(e);Un(q2,s[0],s[3],r,-r,0,0,0),Os(this.flatCoordinates_,0,this.flatCoordinates_.length,2,q2,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new vi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=jv((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const s=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":s.length=yc(s,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,s,0),r=[s.length];break;case"MultiLineString":r=[],s.length=Kv(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,s,0,r);break;case"Polygon":r=[],s.length=vg(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),s,0,r);break}return r&&(this.simplifiedGeometry_=new vi(this.type_,s,r,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}vi.prototype.getFlatCoordinates=vi.prototype.getOrientedFlatCoordinates;class H2{constructor(t){this.rbush_=new lE(t),this.items_={}}insert(t,e){const s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(s),this.items_[It(e)]=s}load(t,e){const s=new Array(e.length);for(let r=0,l=e.length;r<l;r++){const h=t[r],u=e[r],f={minX:h[0],minY:h[1],maxX:h[2],maxY:h[3],value:u};s[r]=f,this.items_[It(u)]=f}this.rbush_.load(s)}remove(t){const e=It(t),s=this.items_[e];return delete this.items_[e],this.rbush_.remove(s)!==null}update(t,e){const s=this.items_[It(e)],r=[s.minX,s.minY,s.maxX,s.maxY];po(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let s;for(let r=0,l=t.length;r<l;r++)if(s=e(t[r]),s)return s;return s}isEmpty(){return Ea(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Ns(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class RE extends dn{constructor(t){super(),this.projection=$t(t.projection),this.attributions_=Z2(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(s,r){e.viewResolver=s,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Z2(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Z2(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),t=>i):null}const Ai={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ps extends kn{constructor(t,e,s){super(t),this.feature=e,this.features=s}}class T8 extends RE{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=xo,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(jt(this.format_,"`format` must be set when `url` is set"),this.loader_=Y2(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:x8;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new H2:null,this.loadedExtentsRtree_=new H2,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let s,r;Array.isArray(t.features)?r=t.features:t.features&&(s=t.features,r=s.getArray()),!e&&s===void 0&&(s=new hn(r)),r!==void 0&&this.addFeaturesInternal(r),s!==void 0&&this.bindFeaturesCollection_(s)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=It(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const s=t.getGeometry();if(s){const r=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ps(Ai.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof vi||(this.featureChangeKeys_[t]=[Lt(e,pt.CHANGE,this.handleFeatureChange_,this),Lt(e,Xr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let s=!0;if(e.getId()!==void 0){const r=String(e.getId());if(!(r in this.idIndex_))this.idIndex_[r]=e;else if(e instanceof vi){const l=this.idIndex_[r];l instanceof vi?Array.isArray(l)?l.push(e):this.idIndex_[r]=[l,e]:s=!1}else s=!1}return s&&(jt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),s}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],s=[],r=[];for(let l=0,h=t.length;l<h;l++){const u=t[l],f=It(u);this.addToIndex_(f,u)&&s.push(u)}for(let l=0,h=s.length;l<h;l++){const u=s[l],f=It(u);this.setupChangeEvents_(f,u);const g=u.getGeometry();if(g){const _=g.getExtent();e.push(_),r.push(u)}else this.nullGeometryFeatures_[f]=u}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(Ai.ADDFEATURE))for(let l=0,h=s.length;l<h;l++)this.dispatchEvent(new ps(Ai.ADDFEATURE,s[l]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ai.ADDFEATURE,function(s){e||(e=!0,t.push(s.feature),e=!1)}),this.addEventListener(Ai.REMOVEFEATURE,function(s){e||(e=!0,t.remove(s.feature),e=!1)}),t.addEventListener(ii.ADD,s=>{e||(e=!0,this.addFeature(s.element),e=!1)}),t.addEventListener(ii.REMOVE,s=>{e||(e=!0,this.removeFeature(s.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const s in this.featureChangeKeys_)this.featureChangeKeys_[s].forEach(te);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(s=>{this.removeFeatureInternal(s)});for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new ps(Ai.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const s=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(s,function(r){const l=r.getGeometry();if(l instanceof vi||l.intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(s){const r=s.getGeometry();if(r instanceof vi||r.intersectsExtent(t)){const l=e(s);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ea(this.nullGeometryFeatures_)||cn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(s){e.push(s)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=Av(t,e);return[].concat(...r.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const s=t[0],r=t[1];let l=null;const h=[NaN,NaN];let u=1/0;const f=[-1/0,-1/0,1/0,1/0];return e=e||Mo,this.featuresRtree_.forEachInExtent(f,function(g){if(e(g)){const _=g.getGeometry(),y=u;if(u=_ instanceof vi?0:_.closestPointXY(s,r,h,u),u<y){l=g;const v=Math.sqrt(u);f[0]=s-v,f[1]=r-v,f[2]=s+v,f[3]=r+v}}}),l}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,s=It(e),r=e.getGeometry();if(!r)s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[s]=e);else{const h=r.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(h,e)):this.featuresRtree_&&this.featuresRtree_.update(h,e)}const l=e.getId();if(l!==void 0){const h=l.toString();this.idIndex_[h]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[h]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[s]=e;this.changed(),this.dispatchEvent(new ps(Ai.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:It(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ea(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,s){const r=this.loadedExtentsRtree_,l=this.strategy_(t,e,s);for(let h=0,u=l.length;h<u;++h){const f=l[h];r.forEachInExtent(f,function(_){return io(_.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ps(Ai.FEATURESLOADSTART)),this.loader_.call(this,f,e,s,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new ps(Ai.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ps(Ai.FEATURESLOADERROR))}),r.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,s=e.forEachInExtent(t,function(r){if(po(r.extent,t))return r});s&&e.remove(s)}removeFeatures(t){let e=!1;for(let s=0,r=t.length;s<r;++s)e=this.removeFeatureInternal(t[s])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=It(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.featureChangeKeys_[e]?.forEach(te),delete this.featureChangeKeys_[e];const r=t.getId();if(r!==void 0){const l=r.toString(),h=this.idIndex_[l];h===t?delete this.idIndex_[l]:Array.isArray(h)&&(h.splice(h.indexOf(t),1),h.length===1&&(this.idIndex_[l]=h[0]))}return delete this.uidIndex_[e],this.hasListener(Ai.REMOVEFEATURE)&&this.dispatchEvent(new ps(Ai.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){jt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Y2(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const X0=[{id:"luchtvaartgebieden",label:"Flight Zones",typeName:"drone-no-flyzones:luchtvaartgebieden",wfsUrl:"/lvnl/drone-no-flyzones/wfs/v1_0",colorMap:{"Beperkt toegestaan":"rgba(0, 0, 255, 0.4)",Verboden:"rgba(255, 0, 0, 0.4)",Natura2000:"rgba(0, 255, 0, 0.4)"},legendItems:[{color:"rgba(255, 0, 0, 0.7)",label:"Forbidden"},{color:"rgba(0, 0, 255, 0.7)",label:"Limited Permission"},{color:"rgba(0, 255, 0, 0.7)",label:"Natura2000"}],featureType:"localtype"},{id:"fysischgeografischeregios",label:"Physical Geographical Regions",typeName:"fysischgeografischeregios:fysischgeografischeregios",wfsUrl:"/ez/fysischgeografischeregios/wfs/v1_0",colorMap:{Duinen:"rgba(240,220,130,0.4)",Getijdengebied:"rgba(180,200,160,0.4)","Hogere Zandgronden":"rgba(210,180,140,0.4)",Laagveengebied:"rgba(130,80,50,0.4)","Niet indeelbaar":"rgba(200,200,200,0.4)",Rivierengebied:"rgba(100,160,90,0.4)",Zeekleigebied:"rgba(120,150,200,0.4)","Afgesloten Zeearmen":"rgba(120,150,200,0.4)",Noordzee:"rgba(60,100,160,0.4)"},legendItems:[{color:"rgba(240,220,130,0.7)",label:"Dunes"},{color:"rgba(180,200,160,0.7)",label:"Tidal Area"},{color:"rgba(210,180,140,0.7)",label:"Higher Sandy Grounds"},{color:"rgba(130,80,50,0.7)",label:"Peat Area"},{color:"rgba(200,200,200,0.7)",label:"Not Classifiable"},{color:"rgba(100,160,90,0.7)",label:"River Area"},{color:"rgba(120,150,200,0.7)",label:"Marine Clay Area"},{color:"rgba(120,150,200,0.7)",label:"Enclosed Sea Arms"},{color:"rgba(60,100,160,0.7)",label:"North Sea"}],featureType:"fgr"}],R8=({layersState:i,setLayersState:t})=>{const[e,s]=qi.useState(!1),r=(h,u)=>{t(f=>({...f,[h]:{...f[h],visible:u}}))},l=(h,u)=>{t(f=>({...f,[h]:{...f[h],opacity:u}}))};return bt.jsxs("div",{className:`absolute top-4 left-4 bg-white rounded-lg shadow text-sm z-10 overflow-hidden transition-all duration-300 ease-in-out ${e?"w-24 p-2":"w-80 p-4 max-h-[90vh] overflow-auto"}`,children:[bt.jsxs("div",{className:"flex items-center justify-between",children:[bt.jsx("h2",{className:"font-semibold",children:"Legend"}),bt.jsx("button",{onClick:()=>s(!e),className:"p-1 hover:bg-gray-100 rounded","aria-label":e?"Expand sidebar":"Collapse sidebar",children:e?bt.jsx(US,{className:"w-4 h-4","aria-label":"Expand sidebar"}):bt.jsx(zS,{className:"w-4 h-4","aria-label":"Collapse sidebar"})})]}),!e&&X0.map(({id:h,label:u,legendItems:f})=>{const g=i[h];return g?bt.jsxs("div",{className:"mb-4",children:[bt.jsxs("label",{className:"flex items-center gap-2 font-semibold mb-1",children:[g.visible?bt.jsx(qS,{className:"w-4 h-4","aria-label":"Show"}):bt.jsx(BS,{className:"w-4 h-4","aria-label":"Hide"}),bt.jsx("input",{className:"hidden",type:"checkbox",checked:g.visible,onChange:()=>r(h,!g.visible),"aria-label":`Toggle ${u} visibility`}),u]}),bt.jsxs("div",{className:"flex items-center gap-2",children:[bt.jsx(XS,{className:"w-4 h-4","aria-label":"Opacity"}),bt.jsx("input",{type:"range",min:0,max:1,step:.01,value:g.opacity,onChange:_=>l(h,parseFloat(_.target.value)),"aria-label":`Adjust ${u} opacity`,className:"w-full"})]}),bt.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:f.map(({color:_,label:y})=>bt.jsxs("div",{className:"flex items-center gap-1",children:[bt.jsx("span",{className:"w-4 h-4 rounded border border-black",style:{backgroundColor:_}}),bt.jsx("span",{children:y})]},y))})]},h):null})]})};class Cr extends kn{constructor(t,e,s){super(t),this.map=e,this.frameState=s!==void 0?s:null}}class Ms extends Cr{constructor(t,e,s,r,l,h){super(t,e,l),this.originalEvent=s,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=h}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const le={SINGLECLICK:"singleclick",CLICK:pt.CLICK,DBLCLICK:pt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Lo={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTEROUT:"pointerout"};class A8 extends _c{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const s=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=s,this.pointerdownListenerKey_=Lt(s,Lo.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Lt(s,Lo.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_,Nv?{passive:!1}:!1)}emulateClick_(t){let e=new Ms(le.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ms(le.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const s=new Ms(le.SINGLECLICK,this.map_,t);this.dispatchEvent(s)},250)}updateActivePointers_(t){const e=t,s=e.pointerId;if(e.type==le.POINTERUP||e.type==le.POINTERCANCEL){delete this.trackedTouches_[s];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==le.POINTERDOWN||e.type==le.POINTERMOVE)&&(this.trackedTouches_[s]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Ms(le.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(te),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Ms(le.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Lt(s,le.POINTERMOVE,this.handlePointerMove_,this),Lt(s,le.POINTERUP,this.handlePointerUp_,this),Lt(this.element_,le.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(Lt(this.element_.getRootNode(),le.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Ms(le.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Ms(le.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(te(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(te(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(te),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const xs={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Fe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},gt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Vu=1/0;class O8{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Uo(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,s=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const r=this.keyFunction_(s);return delete this.queuedElements_[r],s}enqueue(t){jt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Vu?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,s=this.priorities_,r=e.length,l=e[t],h=s[t],u=t;for(;t<r>>1;){const f=this.getLeftChildIndex_(t),g=this.getRightChildIndex_(t),_=g<r&&s[g]<s[f]?g:f;e[t]=e[_],s[t]=s[_],t=_}e[t]=l,s[t]=h,this.siftDown_(u,t)}siftDown_(t,e){const s=this.elements_,r=this.priorities_,l=s[e],h=r[e];for(;e>t;){const u=this.getParentIndex_(e);if(r[u]>h)s[e]=s[u],r[e]=r[u],e=u;else break}s[e]=l,r[e]=h}reprioritize(){const t=this.priorityFunction_,e=this.elements_,s=this.priorities_;let r=0;const l=e.length;let h,u,f;for(u=0;u<l;++u)h=e[u],f=t(h),f==Vu?delete this.queuedElements_[this.keyFunction_(h)]:(s[r]=f,e[r++]=h);e.length=r,s.length=r,this.heapify_()}}class G8 extends O8{constructor(t,e){super(s=>t.apply(null,s),s=>s[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(pt.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,s=e.getState();if(s===gt.LOADED||s===gt.ERROR||s===gt.EMPTY){s!==gt.ERROR&&e.removeEventListener(pt.CHANGE,this.boundHandleTileChange_);const r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;){const r=this.dequeue()[0],l=r.getKey();r.getState()===gt.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++s,r.load())}}}function L8(i,t,e,s,r){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return Vu;const l=i.viewState.center,h=s[0]-l[0],u=s[1]-l[1];return 65536*Math.log(r)+Math.sqrt(h*h+u*u)/r}class Ac extends dn{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let e=0,s=this.listenerKeys.length;e<s;++e)te(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==xo&&this.listenerKeys.push(Lt(t,xs.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class N8 extends Ac{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",s=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",l=t.collapseLabel!==void 0?t.collapseLabel:"",h=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=h):this.collapseLabel_=l;const u=t.label!==void 0?t.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=r):this.label_=u;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const g=e+" "+mc+" "+yg+(this.collapsed_&&this.collapsible_?" "+f2:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=g,_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),s=new Set(e.flatMap(r=>r.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>s.add(r)):s.add(this.attributions_)),!this.overrideCollapsible_){const r=!e.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(s)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(r=>JM(()=>r))),s=e.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!Fs(e,this.renderedAttributions_)){cM(this.ulElement_);for(let r=0,l=e.length;r<l;++r){const h=document.createElement("li");h.innerHTML=e[r],this.ulElement_.appendChild(h)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(f2),this.collapsed_?Jy(this.collapseLabel_,this.label_):Jy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class D8 extends Ac{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",s=t.label!==void 0?t.label:"",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof s=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=s):(this.label_=s,this.label_.classList.add(r));const l=t.tipLabel?t.tipLabel:"Reset rotation",h=document.createElement("button");h.className=e+"-reset",h.setAttribute("type","button"),h.title=l,h.appendChild(this.label_),h.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+mc+" "+yg,f=this.element;f.className=u,f.appendChild(h),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(gu)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const s=e.getRotation();s!==void 0&&(this.duration_>0&&s%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Zr}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const s=e.viewState.rotation;if(s!=this.rotation_){const r="rotate("+s+"rad)";if(this.autoHide_){const l=this.element.classList.contains(gu);!l&&s===0?this.element.classList.add(gu):l&&s!==0&&this.element.classList.remove(gu)}this.label_.style.transform=r}this.rotation_=s}}class I8 extends Ac{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",s=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",l=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",h=t.zoomInLabel!==void 0?t.zoomInLabel:"+",u=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",f=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",g=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=r,_.setAttribute("type","button"),_.title=f,_.appendChild(typeof h=="string"?document.createTextNode(h):h),_.addEventListener(pt.CLICK,this.handleClick_.bind(this,s),!1);const y=document.createElement("button");y.className=l,y.setAttribute("type","button"),y.title=g,y.appendChild(typeof u=="string"?document.createTextNode(u):u),y.addEventListener(pt.CLICK,this.handleClick_.bind(this,-s),!1);const v=e+" "+mc+" "+yg,p=this.element;p.className=v,p.appendChild(_),p.appendChild(y),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const s=this.getMap().getView();if(!s)return;const r=s.getZoom();if(r!==void 0){const l=s.getConstrainedZoom(r+t);this.duration_>0?(s.getAnimating()&&s.cancelAnimations(),s.animate({zoom:l,duration:this.duration_,easing:Zr})):s.setZoom(l)}}}function P8(i){i=i||{};const t=new hn;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new I8(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new D8(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new N8(i.attributionOptions)),t}class z8{constructor(t,e,s){this.decay_=t,this.minVelocity_=e,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let s=e-3;for(;s>0&&this.points_[s+2]>t;)s-=3;const r=this.points_[e+2]-this.points_[s+2];if(r<1e3/60)return!1;const l=this.points_[e]-this.points_[s],h=this.points_[e+1]-this.points_[s+1];return this.angle_=Math.atan2(h,l),this.initialVelocity_=Math.sqrt(l*l+h*h)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const K2={ACTIVE:"active"};class qo extends dn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(K2.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(K2.ACTIVE,t)}setMap(t){this.map_=t}}function F8(i,t,e){const s=i.getCenterInternal();if(s){const r=[s[0]+t[0],s[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:J3,center:i.getConstrainedCenter(r)})}}function Pg(i,t,e,s){const r=i.getZoom();if(r===void 0)return;const l=i.getConstrainedZoom(r+t),h=i.getResolutionForZoom(l);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:h,anchor:e,duration:s!==void 0?s:250,easing:Zr})}class U8 extends qo{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==le.DBLCLICK){const s=t.originalEvent,r=t.map,l=t.coordinate,h=s.shiftKey?-this.delta_:this.delta_,u=r.getView();Pg(u,h,l,this.duration_),s.preventDefault(),e=!0}return!e}}function j0(i){const t=arguments;return function(e){let s=!0;for(let r=0,l=t.length;r<l&&(s=s&&t[r](e),!!s);++r);return s}}const k8=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},X8=function(i){const t=i.map.getTargetElement(),e=t.getRootNode(),s=i.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(s):t.contains(s)},AE=function(i){const t=i.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?X8(i):!0},j8=Mo,OE=function(i){const t=i.originalEvent;return"pointerId"in t&&t.button==0&&!(hM&&Gv&&t.ctrlKey)},GE=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},B8=function(i){const t=i.originalEvent;return Gv?t.metaKey:t.ctrlKey},Y8=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},LE=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},f0=function(i){const t=i.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},q8=function(i){const t=i.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class Ho extends qo{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==le.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==le.POINTERUP){const s=this.handleUpEvent(t);this.handlingDownUpSequence=s&&this.targetPointers.length>0}}else if(t.type==le.POINTERDOWN){const s=this.handleDownEvent(t);this.handlingDownUpSequence=s,e=this.stopDown(s)}else t.type==le.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function zg(i){const t=i.length;let e=0,s=0;for(let r=0;r<t;r++)e+=i[r].clientX,s+=i[r].clientY;return{clientX:e/t,clientY:s/t}}class H8 extends Ho{constructor(t){super({stopDown:gc}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:j0(GE,q8);this.condition_=t.onFocusOnly?j0(AE,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const s=this.targetPointers,r=e.getEventPixel(zg(s));if(s.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const l=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],u=t.map.getView();lM(l,u.getResolution()),sg(l,u.getRotation()),u.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=s.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,s=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),h=s.getCenterInternal(),u=e.getPixelFromCoordinateInternal(h),f=e.getCoordinateFromPixelInternal([u[0]-r*Math.cos(l),u[1]-r*Math.sin(l)]);s.animateInternal({center:s.getConstrainedCenter(f),duration:500,easing:Zr})}return this.panning_&&(this.panning_=!1,s.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const s=t.map.getView();return this.lastCentroid=null,s.getAnimating()&&s.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Z8 extends Ho{constructor(t){t=t||{},super({stopDown:gc}),this.condition_=t.condition?t.condition:k8,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!f0(t))return;const e=t.map,s=e.getView();if(s.getConstraints().rotation===Ng)return;const r=e.getSize(),l=t.pixel,h=Math.atan2(r[1]/2-l[1],l[0]-r[0]/2);if(this.lastAngle_!==void 0){const u=h-this.lastAngle_;s.adjustRotationInternal(-u)}this.lastAngle_=h}handleUpEvent(t){return f0(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return f0(t)&&OE(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class K8 extends dc{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,s="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+s,r.top=Math.min(t[1],e[1])+s,r.width=Math.abs(e[0]-t[0])+s,r.height=Math.abs(e[1]-t[1])+s}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Is([r])}getGeometry(){return this.geometry_}}const pr={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class to extends kn{constructor(t,e,s){super(t),this.coordinate=e,this.mapBrowserEvent=s}}class V8 extends Ho{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new K8(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??OE,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,s){const r=s[0]-e[0],l=s[1]-e[1];return r*r+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new to(pr.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new to(e?pr.BOXEND:pr.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new to(pr.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new to(pr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new to(pr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class W8 extends V8{constructor(t){t=t||{};const e=t.condition?t.condition:Y8;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const s=this.getMap().getView();let r=this.getGeometry();if(this.out_){const l=s.rotatedExtentForGeometry(r),h=s.getResolutionForExtentInternal(l),u=s.getResolution()/h;r=r.clone(),r.scale(u*u)}s.fitInternal(r,{duration:this.duration_,easing:Zr})}}const ra={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Q8 extends qo{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return GE(e)&&LE(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN){const s=t.originalEvent,r=s.key;if(this.condition_(t)&&(r==ra.DOWN||r==ra.LEFT||r==ra.RIGHT||r==ra.UP)){const h=t.map.getView(),u=h.getResolution()*this.pixelDelta_;let f=0,g=0;r==ra.DOWN?g=-u:r==ra.LEFT?f=-u:r==ra.RIGHT?f=u:g=u;const _=[f,g];sg(_,h.getRotation()),F8(h,_,this.duration_),s.preventDefault(),e=!0}}return!e}}class $8 extends qo{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!B8(e)&&LE(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==pt.KEYDOWN||t.type==pt.KEYPRESS){const s=t.originalEvent,r=s.key;if(this.condition_(t)&&(r==="+"||r==="-")){const l=t.map,h=r==="+"?this.delta_:-this.delta_,u=l.getView();Pg(u,h,void 0,this.duration_),s.preventDefault(),e=!0}}return!e}}const J8=40,tw=300;class ew extends qo{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:j8;this.condition_=t.onFocusOnly?j0(AE,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==pt.WHEEL)return!0;const s=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let l=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:l*=J8;break;case WheelEvent.DOM_DELTA_PAGE:l*=tw;break}if(l===0)return!1;this.lastDelta_=l;const h=Date.now();this.startTime_===void 0&&(this.startTime_=h),(!this.mode_||h-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const u=s.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?s.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=h,!1;this.totalDelta_+=l;const f=Math.max(this.timeout_-(h-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,s),f),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let s=-Jt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(s=s?s>0?1:-1:0),Pg(e,s,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class iw extends Ho{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=gc),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const s=this.targetPointers[0],r=this.targetPointers[1],l=Math.atan2(r.clientY-s.clientY,r.clientX-s.clientX);if(this.lastAngle_!==void 0){const f=l-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=f}this.lastAngle_=l;const h=t.map,u=h.getView();u.getConstraints().rotation!==Ng&&(this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(zg(this.targetPointers))),this.rotating_&&(h.render(),u.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class nw extends Ho{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=gc),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const s=this.targetPointers[0],r=this.targetPointers[1],l=s.clientX-r.clientX,h=s.clientY-r.clientY,u=Math.sqrt(l*l+h*h);this.lastDistance_!==void 0&&(e=this.lastDistance_/u),this.lastDistance_=u;const f=t.map,g=f.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(zg(this.targetPointers))),f.render(),g.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const s=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return s.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function sw(i){i=i||{};const t=new hn,e=new z8(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new Z8),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new U8({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new H8({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new iw),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new nw({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new Q8),t.push(new $8({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new ew({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new W8({duration:i.zoomDuration})),t}class ws extends kn{constructor(t,e){super(t),this.layer=e}}const d0={LAYERS:"layers"};class Kr extends bE{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let s=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(d0.LAYERS,this.handleLayersChanged_),s?Array.isArray(s)?s=new hn(s.slice(),{unique:!0}):jt(typeof s.getArray=="function","Expected `layers` to be an array or a `Collection`"):s=new hn(void 0,{unique:!0}),this.setLayers(s)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(te),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Lt(t,ii.ADD,this.handleLayersAdd_,this),Lt(t,ii.REMOVE,this.handleLayersRemove_,this));for(const s in this.listenerKeys_)this.listenerKeys_[s].forEach(te);Uo(this.listenerKeys_);const e=t.getArray();for(let s=0,r=e.length;s<r;s++){const l=e[s];this.registerLayerListeners_(l),this.dispatchEvent(new ws("addlayer",l))}this.changed()}registerLayerListeners_(t){const e=[Lt(t,Xr.PROPERTYCHANGE,this.handleLayerChange_,this),Lt(t,pt.CHANGE,this.handleLayerChange_,this)];t instanceof Kr&&e.push(Lt(t,"addlayer",this.handleLayerGroupAdd_,this),Lt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[It(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new ws("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ws("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new ws("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,s=It(e);this.listenerKeys_[s].forEach(te),delete this.listenerKeys_[s],this.dispatchEvent(new ws("removelayer",e)),this.changed()}getLayers(){return this.get(d0.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const s=e.getArray();for(let r=0,l=s.length;r<l;++r)this.dispatchEvent(new ws("removelayer",s[r]))}this.set(d0.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],s=e.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(e)});const r=this.getLayerState();let l=r.zIndex;!t&&r.zIndex===void 0&&(l=0);for(let h=s,u=e.length;h<u;h++){const f=e[h];f.opacity*=r.opacity,f.visible=f.visible&&r.visible,f.maxResolution=Math.min(f.maxResolution,r.maxResolution),f.minResolution=Math.max(f.minResolution,r.minResolution),f.minZoom=Math.max(f.minZoom,r.minZoom),f.maxZoom=Math.min(f.maxZoom,r.maxZoom),r.extent!==void 0&&(f.extent!==void 0?f.extent=_a(f.extent,r.extent):f.extent=r.extent),f.zIndex===void 0&&(f.zIndex=l)}return e}getSourceState(){return"ready"}}class aw extends dc{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Et()}calculateMatrices2D(t){const e=t.viewState,s=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Un(s,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Wv(r,s)}forEachFeatureAtCoordinate(t,e,s,r,l,h,u,f){let g;const _=e.viewState;function y(O,A,k,j){return l.call(h,A,O?k:null,j)}const v=_.projection,p=ag(t.slice(),v),S=[[0,0]];if(v.canWrapX()&&r){const O=v.getExtent(),A=Ft(O);S.push([-A,0],[A,0])}const w=e.layerStatesArray,x=w.length,b=[],R=[];for(let O=0;O<S.length;O++)for(let A=x-1;A>=0;--A){const k=w[A],j=k.layer;if(j.hasRenderer()&&Ig(k,_)&&u.call(f,j)){const B=j.getRenderer(),Z=j.getSource();if(B&&Z){const J=Z.getWrapX()?p:t,st=y.bind(null,k.managed);R[0]=J[0]+S[O][0],R[1]=J[1]+S[O][1],g=B.forEachFeatureAtCoordinate(R,e,s,st,b)}if(g)return g}}if(b.length===0)return;const L=1/b.length;return b.forEach((O,A)=>O.distanceSq+=A*L),b.sort((O,A)=>O.distanceSq-A.distanceSq),b.some(O=>g=O.callback(O.feature,O.layer,O.geometry)),g}hasFeatureAtCoordinate(t,e,s,r,l,h){return this.forEachFeatureAtCoordinate(t,e,s,r,Mo,this,l,h)!==void 0}getMap(){return this.map_}renderFrame(t){Et()}scheduleExpireIconCache(t){Li.canExpireCache()&&t.postRenderFunctions.push(rw)}}function rw(i,t){Li.expire()}class lw extends aw{constructor(t){super(t),this.fontChangeListenerKey_=Lt(xr,Xr.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=mc+" ol-layers";const s=t.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const s=this.getMap();if(s.hasListener(t)){const r=new sE(t,void 0,e);s.dispatchEvent(r)}}disposeInternal(){te(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Gi.PRECOMPOSE,t);const e=t.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);e.some(u=>u.layer instanceof CE&&u.layer.getDeclutter())&&(t.declutter={});const r=t.viewState;this.children_.length=0;const l=[];let h=null;for(let u=0,f=e.length;u<f;++u){const g=e[u];t.layerIndex=u;const _=g.layer,y=_.getSourceState();if(!Ig(g,r)||y!="ready"&&y!="undefined"){_.unrender();continue}const v=_.render(t,h);v&&(v!==h&&(this.children_.push(v),h=v),l.push(g))}this.declutter(t,l),fM(this.element_,this.children_),this.dispatchRenderEvent(Gi.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let s=e.length-1;s>=0;--s){const r=e[s],l=r.layer;l.getDeclutter()&&l.renderDeclutter(t,r)}e.forEach(s=>s.layer.renderDeferred(t))}}}function NE(i){if(i instanceof Cc){i.setMapInternal(null);return}i instanceof Kr&&i.getLayers().forEach(NE)}function DE(i,t){if(i instanceof Cc){i.setMapInternal(t);return}if(i instanceof Kr){const e=i.getLayers().getArray();for(let s=0,r=e.length;s<r;++s)DE(e[s],t)}}let ow=class extends dn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=hw(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:uM,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Hi(),this.pixelToCoordinateTransform_=Hi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||P8(),this.interactions=e.interactions||sw({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new G8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Fe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Fe.VIEW,this.handleViewChanged_),this.addChangeListener(Fe.SIZE,this.handleSizeChanged_),this.addChangeListener(Fe.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const s=this;t.view&&!(t.view instanceof ln)&&t.view.then(function(r){s.setView(new ln(r))}),this.controls.addEventListener(ii.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ii.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ii.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ii.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ii.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ii.REMOVE,r=>{const l=r.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){DE(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,s){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);s=s!==void 0?s:{};const l=s.hitTolerance!==void 0?s.hitTolerance:0,h=s.layerFilter!==void 0?s.layerFilter:Mo,u=s.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,l,u,e,null,h,null)}getFeaturesAtPixel(t,e){const s=[];return this.forEachFeatureAtPixel(t,function(r){s.push(r)},e),s}getAllLayers(){const t=[];function e(s){s.forEach(function(r){r instanceof Kr?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const s=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const r=e.layerFilter!==void 0?e.layerFilter:Mo,l=e.hitTolerance!==void 0?e.hitTolerance:0,h=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(s,this.frameState_,l,h,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const s=this.viewport_.getBoundingClientRect(),r=this.getSize(),l=s.width/r[0],h=s.height/r[1],u="changedTouches"in t?t.changedTouches[0]:t;return[(u.clientX-s.left)/l,(u.clientY-s.top)/h]}getTarget(){return this.get(Fe.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return L0(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Ce(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Fe.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof hn){e.setLayers(t);return}const s=e.getLayers();s.clear(),s.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,s=t.length;e<s;++e){const r=t[e];if(!r.visible)continue;const l=r.layer.getRenderer();if(l&&!l.ready)return!0;const h=r.layer.getSource();if(h&&h.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Dn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Ce(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Fe.SIZE)}getView(){return this.get(Fe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,s,r){return L8(this.frameState_,t,e,s,r)}handleBrowserEvent(t,e){e=e||t.type;const s=new Ms(e,this,t);this.handleMapBrowserEvent(s)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,s=e.type;if(s===Lo.POINTERDOWN||s===pt.WHEEL||s===pt.KEYDOWN){const r=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():r,h=e.target,u=l instanceof ShadowRoot?l.host===h?l.host.ownerDocument:l:l===r?r.documentElement:l;if(this.overlayContainerStopEvent_.contains(h)||!u.contains(h))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let l=r.length-1;l>=0;l--){const h=r[l];if(h.getMap()!==this||!h.getActive()||!this.getTargetElement())continue;if(!h.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,l=r;if(t){const h=t.viewHints;if(h[Ue.ANIMATING]||h[Ue.INTERACTING]){const u=Date.now()-t.time>8;r=u?0:8,l=u?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,l))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Gi.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Gi.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Cr(xs.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Cr(xs.LOADSTART,this,t))));const s=this.postRenderFunctions_;if(t)for(let r=0,l=s.length;r<l;++r)s[r](this,t);s.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let s=0,r=this.targetChangeHandlerKeys_.length;s<r;++s)te(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new lw(this)),this.mapBrowserEventHandler_=new A8(this,this.moveTolerance_);for(const l in le)this.mapBrowserEventHandler_.addEventListener(le[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pt.WHEEL,this.boundHandleBrowserEvent_,Nv?{passive:!1}:!1);let s;if(this.keyboardEventTarget_)s=this.keyboardEventTarget_;else{const l=e.getRootNode();s=l instanceof ShadowRoot?l.host:e}this.targetChangeHandlerKeys_=[Lt(s,pt.KEYDOWN,this.handleBrowserEvent,this),Lt(s,pt.KEYPRESS,this.handleBrowserEvent,this)];const r=e.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(te(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(te(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Lt(t,Xr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Lt(t,pt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(te),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ws("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Lt(t,Xr.PROPERTYCHANGE,this.render,this),Lt(t,pt.CHANGE,this.render,this),Lt(t,"addlayer",this.handleLayerAdd_,this),Lt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let e=0,s=t.length;e<s;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){NE(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),s=this.getView(),r=this.frameState_;let l=null;if(e!==void 0&&S2(e)&&s&&s.isDef()){const h=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=s.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:C0(u.center,u.resolution,u.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:h,wantedTiles:{},mapId:It(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const f=isNaN(u.nextRotation)?u.rotation:u.nextRotation;l.nextExtent=C0(u.nextCenter,u.nextResolution,f,e)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),r&&(!this.previousExtent_||!rc(this.previousExtent_)&&!po(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Cr(xs.MOVESTART,this,r)),this.previousExtent_=zo(this.previousExtent_)),this.previousExtent_&&!l.viewHints[Ue.ANIMATING]&&!l.viewHints[Ue.INTERACTING]&&!po(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Cr(xs.MOVEEND,this,l)),Mv(l.extent,this.previousExtent_))),this.dispatchEvent(new Cr(xs.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(xs.LOADSTART)||this.hasListener(xs.LOADEND)||this.hasListener(Gi.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new ws("removelayer",e)),this.set(Fe.LAYERGROUP,t)}setSize(t){this.set(Fe.SIZE,t)}setTarget(t){this.set(Fe.TARGET,t)}setView(t){if(!t||t instanceof ln){this.set(Fe.VIEW,t);return}this.set(Fe.VIEW,new ln);const e=this;t.then(function(s){e.setView(new ln(s))})}updateSize(){const t=this.getTargetElement();let e;if(t){const r=getComputedStyle(t),l=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),h=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(l)&&!isNaN(h)&&(e=[Math.max(0,l),Math.max(0,h)],!S2(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Dv("No map visible because the map container's width or height are 0."))}const s=this.getSize();e&&(!s||!Fs(e,s))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function hw(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},s=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Kr({layers:i.layers});e[Fe.LAYERGROUP]=s,e[Fe.TARGET]=i.target,e[Fe.VIEW]=i.view instanceof ln?i.view:new ln;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new hn(i.controls.slice()):(jt(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let l;i.interactions!==void 0&&(Array.isArray(i.interactions)?l=new hn(i.interactions.slice()):(jt(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=i.interactions));let h;return i.overlays!==void 0?Array.isArray(i.overlays)?h=new hn(i.overlays.slice()):(jt(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),h=i.overlays):h=new hn,{controls:r,interactions:l,keyboardEventTarget:t,overlays:h,values:e}}class Fg extends _c{constructor(t,e,s){super(),s=s||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=s.transition===void 0?250:s.transition,this.transitionStarts_={},this.interpolate=!!s.interpolate}changed(){this.dispatchEvent(pt.CHANGE)}release(){this.setState(gt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==gt.EMPTY){if(this.state!==gt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){Et()}getAlpha(t,e){if(!this.transition_)return 1;let s=this.transitionStarts_[t];if(!s)s=e,this.transitionStarts_[t]=s;else if(s===-1)return 1;const r=e-s+1e3/60;return r>=this.transition_?1:_E(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function B0(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const uw=new Error("disposed"),cw=[256,256];class V2 extends Fg{constructor(t){const e=gt.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=B0(this.data_);return t?[t.width,t.height]:cw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==gt.IDLE&&this.state!==gt.ERROR)return;this.state=gt.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=gt.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=gt.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(uw),this.controller_=null),super.disposeInternal()}}class IE extends Fg{constructor(t,e,s,r,l,h){super(t,e,h),this.crossOrigin_=r,this.src_=s,this.key=s,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(t){this.image_=t,this.state=gt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=gt.ERROR,this.unlistenImage_(),this.image_=fw(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=gt.LOADED:this.state=gt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==gt.ERROR&&(this.state=gt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==gt.IDLE&&(this.state=gt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=tx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function fw(){const i=ve(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class Ug{constructor(t,e,s,r){this.minX=t,this.maxX=e,this.minY=s,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Sr(i,t,e,s,r){return r!==void 0?(r.minX=i,r.maxX=t,r.minY=e,r.maxY=s,r):new Ug(i,t,e,s)}let g0;const Ir=[];function W2(i,t,e,s,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(s,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,s)+1,Math.max(e,r)),i.restore()}function _0(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function dw(){if(g0===void 0){const i=ve(6,6,Ir);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",W2(i,4,5,4,0),W2(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;g0=_0(t,0)||_0(t,4)||_0(t,8),oc(i),Ir.push(i.canvas)}return g0}function Q2(i,t,e,s){const r=fg(e,t,i);let l=o2(t,s,e);const h=t.getMetersPerUnit();h!==void 0&&(l*=h);const u=i.getMetersPerUnit();u!==void 0&&(l/=u);const f=i.getExtent();if(!f||Fr(f,r)){const g=o2(i,l,r)/l;isFinite(g)&&g>0&&(l/=g)}return l}function gw(i,t,e,s){const r=Ds(e);let l=Q2(i,t,r,s);return(!isFinite(l)||l<=0)&&Cv(e,function(h){return l=Q2(i,t,h,s),isFinite(l)&&l>0}),l}function _w(i,t,e,s,r,l,h,u,f,g,_,y,v,p){const S=ve(Math.round(e*i),Math.round(e*t),Ir);if(y||(S.imageSmoothingEnabled=!1),f.length===0)return S.canvas;S.scale(e,e);function w(A){return Math.round(A*e)/e}S.globalCompositeOperation="lighter";const x=Di();f.forEach(function(A,k,j){wv(x,A.extent)});let b;const R=e/s,L=(y?1:1+Math.pow(2,-24))/R;b=ve(Math.round(Ft(x)*R),Math.round(qe(x)*R),Ir),y||(b.imageSmoothingEnabled=!1),f.forEach(function(A,k,j){if(A.image.width>0&&A.image.height>0){if(A.clipExtent){b.save();const tt=(A.clipExtent[0]-x[0])*R,it=-(A.clipExtent[3]-x[3])*R,lt=Ft(A.clipExtent)*R,ct=qe(A.clipExtent)*R;b.rect(y?tt:Math.round(tt),y?it:Math.round(it),y?lt:Math.round(tt+lt)-Math.round(tt),y?ct:Math.round(it+ct)-Math.round(it)),b.clip()}const B=(A.extent[0]-x[0])*R,Z=-(A.extent[3]-x[3])*R,J=Ft(A.extent)*R,st=qe(A.extent)*R;b.drawImage(A.image,g,g,A.image.width-2*g,A.image.height-2*g,y?B:Math.round(B),y?Z:Math.round(Z),y?J:Math.round(B+J)-Math.round(B),y?st:Math.round(Z+st)-Math.round(Z)),A.clipExtent&&b.restore()}});const O=Ca(h);return u.getTriangles().forEach(function(A,k,j){const B=A.source,Z=A.target;let J=B[0][0],st=B[0][1],tt=B[1][0],it=B[1][1],lt=B[2][0],ct=B[2][1];const D=w((Z[0][0]-O[0])/l),K=w(-(Z[0][1]-O[1])/l),W=w((Z[1][0]-O[0])/l),at=w(-(Z[1][1]-O[1])/l),C=w((Z[2][0]-O[0])/l),X=w(-(Z[2][1]-O[1])/l),z=J,$=st;J=0,st=0,tt-=z,it-=$,lt-=z,ct-=$;const rt=[[tt,it,0,0,W-D],[lt,ct,0,0,C-D],[0,0,tt,it,at-K],[0,0,lt,ct,X-K]],ft=aM(rt);if(!ft)return;if(S.save(),S.beginPath(),dw()||!y){S.moveTo(W,at);const Ut=4,Ot=D-W,fe=K-at;for(let Te=0;Te<Ut;Te++)S.lineTo(W+w((Te+1)*Ot/Ut),at+w(Te*fe/(Ut-1))),Te!=Ut-1&&S.lineTo(W+w((Te+1)*Ot/Ut),at+w((Te+1)*fe/(Ut-1)));S.lineTo(C,X)}else S.moveTo(W,at),S.lineTo(D,K),S.lineTo(C,X);S.clip(),S.transform(ft[0],ft[2],ft[1],ft[3],D,K),S.translate(x[0]-z,x[3]-$);let ht;if(b)ht=b.canvas,S.scale(L,-L);else{const Ut=f[0],Ot=Ut.extent;ht=Ut.image,S.scale(Ft(Ot)/ht.width,-qe(Ot)/ht.height)}S.drawImage(ht,0,0),S.restore()}),b&&(oc(b),Ir.push(b.canvas)),_&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,u.getTriangles().forEach(function(A,k,j){const B=A.target,Z=(B[0][0]-O[0])/l,J=-(B[0][1]-O[1])/l,st=(B[1][0]-O[0])/l,tt=-(B[1][1]-O[1])/l,it=(B[2][0]-O[0])/l,lt=-(B[2][1]-O[1])/l;S.beginPath(),S.moveTo(st,tt),S.lineTo(Z,J),S.lineTo(it,lt),S.closePath(),S.stroke()}),S.restore()),S.canvas}const mw=10,$2=.25;class yw{constructor(t,e,s,r,l,h,u){this.sourceProj_=t,this.targetProj_=e;let f={};const g=u?G0(L=>Ce(u,fg(L,this.targetProj_,this.sourceProj_))):So(this.targetProj_,this.sourceProj_);this.transformInv_=function(L){const O=L[0]+"/"+L[1];return f[O]||(f[O]=g(L)),f[O]},this.maxSourceExtent_=r,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ft(r)>=Ft(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ft(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ft(this.targetProj_.getExtent()):null;const _=Ca(s),y=ac(s),v=sc(s),p=nc(s),S=this.transformInv_(_),w=this.transformInv_(y),x=this.transformInv_(v),b=this.transformInv_(p),R=mw+(h?Math.max(0,Math.ceil(Math.log2(b0(s)/(h*h*256*256)))):0);if(this.addQuad_(_,y,v,p,S,w,x,b,R),this.wrapsXInSource_){let L=1/0;this.triangles_.forEach(function(O,A,k){L=Math.min(L,O.source[0][0],O.source[1][0],O.source[2][0])}),this.triangles_.forEach(O=>{if(Math.max(O.source[0][0],O.source[1][0],O.source[2][0])-L>this.sourceWorldWidth_/2){const A=[[O.source[0][0],O.source[0][1]],[O.source[1][0],O.source[1][1]],[O.source[2][0],O.source[2][1]]];A[0][0]-L>this.sourceWorldWidth_/2&&(A[0][0]-=this.sourceWorldWidth_),A[1][0]-L>this.sourceWorldWidth_/2&&(A[1][0]-=this.sourceWorldWidth_),A[2][0]-L>this.sourceWorldWidth_/2&&(A[2][0]-=this.sourceWorldWidth_);const k=Math.min(A[0][0],A[1][0],A[2][0]);Math.max(A[0][0],A[1][0],A[2][0])-k<this.sourceWorldWidth_/2&&(O.source=A)}})}f={}}addTriangle_(t,e,s,r,l,h){this.triangles_.push({source:[r,l,h],target:[t,e,s]})}addQuad_(t,e,s,r,l,h,u,f,g){const _=Qy([l,h,u,f]),y=this.sourceWorldWidth_?Ft(_)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&y>.5&&y<1;let S=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=Qy([t,e,s,r]);S=Ft(x)/this.targetWorldWidth_>$2||S}!p&&this.sourceProj_.isGlobal()&&y&&(S=y>$2||S)}if(!S&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!ni(_,this.maxSourceExtent_))return;let w=0;if(!S&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(f[0])||!isFinite(f[1]))){if(g>0)S=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(h[0])||!isFinite(h[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!S){const x=[(t[0]+s[0])/2,(t[1]+s[1])/2],b=this.transformInv_(x);let R;p?R=(ya(l[0],v)+ya(u[0],v))/2-ya(b[0],v):R=(l[0]+u[0])/2-b[0];const L=(l[1]+u[1])/2-b[1];S=R*R+L*L>this.errorThresholdSquared_}if(S){if(Math.abs(t[0]-s[0])<=Math.abs(t[1]-s[1])){const x=[(e[0]+s[0])/2,(e[1]+s[1])/2],b=this.transformInv_(x),R=[(r[0]+t[0])/2,(r[1]+t[1])/2],L=this.transformInv_(R);this.addQuad_(t,e,x,R,l,h,b,L,g-1),this.addQuad_(R,x,s,r,L,b,u,f,g-1)}else{const x=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(x),R=[(s[0]+r[0])/2,(s[1]+r[1])/2],L=this.transformInv_(R);this.addQuad_(t,x,R,r,l,b,L,f,g-1),this.addQuad_(x,e,s,R,b,h,u,L,g-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(w&11)==0&&this.addTriangle_(t,s,r,l,u,f),(w&14)==0&&this.addTriangle_(t,s,e,l,u,h),w&&((w&13)==0&&this.addTriangle_(e,r,t,h,f,l),(w&7)==0&&this.addTriangle_(e,r,s,h,f,u))}calculateSourceExtent(){const t=Di();return this.triangles_.forEach(function(e,s,r){const l=e.source;fo(t,l[0]),fo(t,l[1]),fo(t,l[2])}),t}getTriangles(){return this.triangles_}}const vw=.5;class PE extends Fg{constructor(t,e,s,r,l,h,u,f,g,_,y,v){super(l,gt.IDLE,v),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=u,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=h||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const p=r.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const x=S?_a(p,S):p;if(b0(x)===0){this.state=gt.EMPTY;return}const b=t.getExtent();b&&(w?w=_a(w,b):w=b);const R=r.getResolution(this.wrappedTileCoord_[0]),L=gw(t,s,x,R);if(!isFinite(L)||L<=0){this.state=gt.EMPTY;return}const O=_!==void 0?_:vw;if(this.triangulation_=new yw(t,s,x,w,L*O,R),this.triangulation_.getTriangles().length===0){this.state=gt.EMPTY;return}this.sourceZ_=e.getZForResolution(L);let A=this.triangulation_.calculateSourceExtent();if(w&&(t.canWrapX()?(A[1]=Jt(A[1],w[1],w[3]),A[3]=Jt(A[3],w[1],w[3])):A=_a(A,w)),!b0(A))this.state=gt.EMPTY;else{let k=0,j=0;t.canWrapX()&&(k=Ft(b),j=Math.floor((A[0]-b[0])/k)),Av(A.slice(),t,!0).forEach(Z=>{const J=e.getTileRangeForExtentAndZ(Z,this.sourceZ_);for(let st=J.minX;st<=J.maxX;st++)for(let tt=J.minY;tt<=J.maxY;tt++){const it=g(this.sourceZ_,st,tt,u);if(it){const lt=j*k;this.sourceTiles_.push({tile:it,offset:lt})}}++j}),this.sourceTiles_.length===0&&(this.state=gt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{const s=e.tile;if(s&&s.getState()==gt.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(s.tileCoord);r[0]+=e.offset,r[2]+=e.offset;const l=this.clipExtent_?.slice();l&&(l[0]+=e.offset,l[2]+=e.offset),t.push({extent:r,clipExtent:l,image:s.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=gt.ERROR;else{const e=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(e),r=typeof s=="number"?s:s[0],l=typeof s=="number"?s:s[1],h=this.targetTileGrid_.getResolution(e),u=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=_w(r,l,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),h,f,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=gt.LOADED}this.changed()}load(){if(this.state==gt.IDLE){this.state=gt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const s=e.getState();if(s==gt.IDLE||s==gt.LOADING){t++;const r=Lt(e,pt.CHANGE,l=>{const h=e.getState();(h==gt.LOADED||h==gt.ERROR||h==gt.EMPTY)&&(te(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},s,r){e.getState()==gt.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(te),this.sourcesListenerKeys_=null}release(){this.canvas_&&(oc(this.canvas_.getContext("2d")),Ir.push(this.canvas_),this.canvas_=null),super.release()}}class Ew{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof dc&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const s=this.entries_[t];return jt(s!==void 0,"Tried to get a value for a key that does not exist in the cache"),s===this.newest_||(s===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(s.newer.older=s.older,s.older.newer=s.newer),s.newer=null,s.older=this.newest_,this.newest_.newer=s,this.newest_=s),s.value_}remove(t){const e=this.entries_[t];return jt(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,s;for(s=this.newest_;s;s=s.older)t[e++]=s.key_;return t}getValues(){const t=new Array(this.count_);let e=0,s;for(s=this.newest_;s;s=s.older)t[e++]=s.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){jt(!(t in this.entries_),"Tried to set a value for a key that is used already");const s={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_}setSize(t){this.highWaterMark=t}}function Wu(i,t,e,s){return s!==void 0?(s[0]=i,s[1]=t,s[2]=e,s):[i,t,e]}function pw(i,t,e){return i+"/"+t+"/"+e}function Sw(i){return Mw(i[0],i[1],i[2])}function Mw(i,t,e){return(t<<i)+e}function xw(i,t){const e=i[0],s=i[1],r=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const l=t.getFullTileRange(e);return l?l.containsXY(s,r):!0}function m0(i,t,e,s,r){return`${It(i)},${t},${pw(e,s,r)}`}function y0(i,t,e){if(!(e in i))return i[e]=new Set([t]),!0;const s=i[e],r=s.has(t);return r||s.add(t),!r}function ww(i,t,e){const s=i[e];return s?s.delete(t):!1}function J2(i,t){const e=i.layerStatesArray[i.layerIndex];e.extent&&(t=_a(t,bs(e.extent,i.viewState.projection)));const s=e.layer.getRenderSource();if(!s.getWrapX()){const r=s.getTileGridForProjection(i.viewState.projection).getExtent();r&&(t=_a(t,r))}return t}class bw extends aE{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Di(),this.tempTileRange_=new Ug(0,0,0,0),this.tempTileCoord_=Wu(0,0,0);const s=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new Ew(s),this.maxStaleKeys=s*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,s,r){const l=this.tileCache_,u=this.getLayer().getSource(),f=m0(u,u.getKey(),t,e,s);let g;if(l.containsKey(f))g=l.get(f);else{if(g=u.getTile(t,e,s,r.pixelRatio,r.viewState.projection),!g)return null;l.set(f,g)}return g}getTile(t,e,s,r){const l=this.getOrCreateTile(t,e,s,r);return l||null}getData(t){const e=this.frameState;if(!e)return null;const s=this.getLayer(),r=Ce(e.pixelToCoordinateTransform,t.slice()),l=s.getExtent();if(l&&!Fr(l,r))return null;const h=e.viewState,u=s.getRenderSource(),f=u.getTileGridForProjection(h.projection),g=u.getTilePixelRatio(e.pixelRatio);for(let _=f.getZForResolution(h.resolution);_>=f.getMinZoom();--_){const y=f.getTileCoordForCoordAndZ(r,_),v=this.getTile(_,y[1],y[2],e);if(!v||v.getState()!==gt.LOADED)continue;const p=f.getOrigin(_),S=ri(f.getTileSize(_)),w=f.getResolution(_);let x;if(v instanceof IE||v instanceof PE)x=v.getImage();else if(v instanceof V2){if(x=B0(v.getData()),!x)continue}else continue;const b=Math.floor(g*((r[0]-p[0])/w-y[1]*S[0])),R=Math.floor(g*((p[1]-r[1])/w-y[2]*S[1])),L=Math.round(g*u.getGutterForProjection(h.projection));return this.getImageData(x,b+L,R+L)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const s=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==s&&(this.renderedSourceRevision_=s,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=s,!0}enqueueTiles(t,e,s,r,l){const h=t.viewState,u=this.getLayer(),f=u.getRenderSource(),g=f.getTileGridForProjection(h.projection),_=It(f);_ in t.wantedTiles||(t.wantedTiles[_]={});const y=t.wantedTiles[_],v=u.getMapInternal(),p=Math.max(s-l,g.getMinZoom(),g.getZForResolution(Math.min(u.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):g.getResolution(0)),f.zDirection)),S=h.rotation,w=S?Tv(h.center,h.resolution,S,t.size):void 0;for(let x=s;x>=p;--x){const b=g.getTileRangeForExtentAndZ(e,x,this.tempTileRange_),R=g.getResolution(x);for(let L=b.minX;L<=b.maxX;++L)for(let O=b.minY;O<=b.maxY;++O){if(S&&!g.tileCoordIntersectsViewport([x,L,O],w))continue;const A=this.getTile(x,L,O,t);if(!A||!y0(r,A,x))continue;const j=A.getKey();if(y[j]=!0,A.getState()===gt.IDLE&&!t.tileQueue.isKeyQueued(j)){const B=Wu(x,L,O,this.tempTileCoord_);t.tileQueue.enqueue([A,_,g.getTileCoordCenter(B),R])}}}}findStaleTile_(t,e){const s=this.tileCache_,r=t[0],l=t[1],h=t[2],u=this.getStaleKeys();for(let f=0;f<u.length;++f){const g=m0(this.getLayer().getSource(),u[f],r,l,h);if(s.containsKey(g)){const _=s.peek(g);if(_.getState()===gt.LOADED)return _.endTransition(It(this)),y0(e,_,r),!0}}return!1}findAltTiles_(t,e,s,r){const l=t.getTileRangeForTileCoordAndZ(e,s,this.tempTileRange_);if(!l)return!1;let h=!0;const u=this.tileCache_,f=this.getLayer().getRenderSource(),g=f.getKey();for(let _=l.minX;_<=l.maxX;++_)for(let y=l.minY;y<=l.maxY;++y){const v=m0(f,g,s,_,y);let p=!1;if(u.containsKey(v)){const S=u.peek(v);S.getState()===gt.LOADED&&(y0(r,S,s),p=!0)}p||(h=!1)}return h}renderFrame(t,e){this.renderComplete=!0;const s=t.layerStatesArray[t.layerIndex],r=t.viewState,l=r.projection,h=r.resolution,u=r.center,f=t.pixelRatio,g=this.getLayer(),_=g.getSource(),y=_.getTileGridForProjection(l),v=y.getZForResolution(h,_.zDirection),p=y.getResolution(v),S=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let w=t.extent;const x=_.getTilePixelRatio(f);this.prepareContainer(t,e);const b=this.context.canvas.width,R=this.context.canvas.height,L=s.extent&&bs(s.extent);L&&(w=_a(w,bs(s.extent)));const O=p*b/2/x,A=p*R/2/x,k=[u[0]-O,u[1]-A,u[0]+O,u[1]+A],j={};this.renderedTiles.length=0;const B=g.getPreload();if(t.nextExtent){const W=y.getZForResolution(r.nextResolution,_.zDirection),at=J2(t,t.nextExtent);this.enqueueTiles(t,at,W,j,B)}const Z=J2(t,w);if(this.enqueueTiles(t,Z,v,j,0),B>0&&setTimeout(()=>{this.enqueueTiles(t,Z,v-1,j,B-1)},0),!(v in j))return this.container;const J=It(this),st=t.time;for(const W of j[v]){const at=W.getState();if(at===gt.EMPTY)continue;const C=W.tileCoord;if(at===gt.LOADED&&W.getAlpha(J,st)===1){W.endTransition(J);continue}if(at!==gt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(C,j)){ww(j,W,v),t.animate=!0;continue}if(this.findAltTiles_(y,C,v+1,j))continue;const $=y.getMinZoom();for(let rt=v-1;rt>=$&&!this.findAltTiles_(y,C,rt,j);--rt);}const tt=p/h*f/x,it=this.getRenderContext(t);Un(this.tempTransform,b/2,R/2,tt,tt,0,-b/2,-R/2),s.extent&&this.clipUnrotated(it,t,L),_.getInterpolate()||(it.imageSmoothingEnabled=!1),this.preRender(it,t);const lt=Object.keys(j).map(Number);lt.sort(Pn);let ct;const D=[],K=[];for(let W=lt.length-1;W>=0;--W){const at=lt[W],C=_.getTilePixelSize(at,f,l),z=y.getResolution(at)/p,$=C[0]*z*tt,rt=C[1]*z*tt,ft=y.getTileCoordForCoordAndZ(Ca(k),at),ht=y.getTileCoordExtent(ft),Ut=Ce(this.tempTransform,[x*(ht[0]-k[0])/p,x*(k[3]-ht[3])/p]),Ot=x*_.getGutterForProjection(l);for(const fe of j[at]){if(fe.getState()!==gt.LOADED)continue;const Te=fe.tileCoord,gn=ft[1]-Te[1],ks=Math.round(Ut[0]-(gn-1)*$),_n=ft[2]-Te[2],Ii=Math.round(Ut[1]-(_n-1)*rt),Ze=Math.round(Ut[0]-gn*$),Ei=Math.round(Ut[1]-_n*rt),Re=ks-Ze,Bn=Ii-Ei,Yn=lt.length===1;let Wi=!1;ct=[Ze,Ei,Ze+Re,Ei,Ze+Re,Ei+Bn,Ze,Ei+Bn];for(let Pi=0,qn=D.length;Pi<qn;++Pi)if(!Yn&&at<K[Pi]){const oe=D[Pi];ni([Ze,Ei,Ze+Re,Ei+Bn],[oe[0],oe[3],oe[4],oe[7]])&&(Wi||(it.save(),Wi=!0),it.beginPath(),it.moveTo(ct[0],ct[1]),it.lineTo(ct[2],ct[3]),it.lineTo(ct[4],ct[5]),it.lineTo(ct[6],ct[7]),it.moveTo(oe[6],oe[7]),it.lineTo(oe[4],oe[5]),it.lineTo(oe[2],oe[3]),it.lineTo(oe[0],oe[1]),it.clip())}D.push(ct),K.push(at),this.drawTile(fe,t,Ze,Ei,Re,Bn,Ot,Yn),Wi&&it.restore(),this.renderedTiles.unshift(fe),this.updateUsedTiles(t.usedTiles,_,fe)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!po(this.renderedExtent_,k),this.renderedExtent_=k,this.renderedPixelRatio=f,this.postRender(this.context,t),s.extent&&it.restore(),it.imageSmoothingEnabled=!0,this.renderComplete){const W=(at,C)=>{const X=It(_),z=C.wantedTiles[X],$=z?Object.keys(z).length:0;this.updateCacheSize($),this.tileCache_.expireCache()};t.postRenderFunctions.push(W)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,s,r,l,h,u,f){let g;if(t instanceof V2){if(g=B0(t.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(t);if(!g)return;const _=this.getRenderContext(e),y=It(this),v=e.layerStatesArray[e.layerIndex],p=v.opacity*(f?t.getAlpha(y,e.time):1),S=p!==_.globalAlpha;S&&(_.save(),_.globalAlpha=p),_.drawImage(g,u,u,g.width-2*u,g.height-2*u,s,r,l,h),S&&_.restore(),p!==v.opacity?e.animate=!0:f&&t.endTransition(y)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,s){const r=It(e);r in t||(t[r]={}),t[r][s.getKey()]=!0}}const Su={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Cw extends Cc{constructor(t){t=t||{};const e=Object.assign({},t),s=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=s,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Su.PRELOAD)}setPreload(t){this.set(Su.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Su.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Su.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class Tw extends Cw{constructor(t){super(t)}createRenderer(){return new bw(this,{cacheSize:this.getCacheSize()})}}const Mr=[0,0,0],Ss=5;class zE{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,jt(JS(this.resolutions_,(r,l)=>l-r),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let r=0,l=this.resolutions_.length-1;r<l;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,jt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const s=t.extent;s!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ca(s)),jt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,jt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Dg,jt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=s!==void 0?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((r,l)=>{const h=new Ug(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(s){const u=this.getTileRangeForExtentAndZ(s,l);h.minX=Math.max(u.minX,h.minX),h.maxX=Math.min(u.maxX,h.maxX),h.minY=Math.max(u.minY,h.minY),h.maxY=Math.min(u.maxY,h.maxY)}return h}):s&&this.calculateTileRanges_(s)}forEachTileCoord(t,e,s){const r=this.getTileRangeForExtentAndZ(t,e);for(let l=r.minX,h=r.maxX;l<=h;++l)for(let u=r.minY,f=r.maxY;u<=f;++u)s([e,l,u])}forEachTileCoordParentTileRange(t,e,s,r){let l,h,u,f=null,g=t[0]-1;for(this.zoomFactor_===2?(h=t[1],u=t[2]):f=this.getTileCoordExtent(t,r);g>=this.minZoom;){if(h!==void 0&&u!==void 0?(h=Math.floor(h/2),u=Math.floor(u/2),l=Sr(h,h,u,u,s)):l=this.getTileRangeForExtentAndZ(f,g,s),e(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,s){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const l=t[1]*2,h=t[2]*2;return Sr(l,l+1,h,h+1,e)}const r=this.getTileCoordExtent(t,s||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,s){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],l=t[1],h=t[2];if(e===r)return Sr(l,h,l,h,s);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,e-r),g=Math.floor(l*f),_=Math.floor(h*f);if(e<r)return Sr(g,g,_,_,s);const y=Math.floor(f*(l+1))-1,v=Math.floor(f*(h+1))-1;return Sr(g,y,_,v,s)}const u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,s)}getTileRangeForExtentAndZ(t,e,s){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Mr);const r=Mr[1],l=Mr[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Mr);const h=Mr[1],u=Mr[2];return Sr(r,h,l,u,s)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=ri(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*s,e[1]-(t[2]+.5)*r[1]*s]}getTileCoordExtent(t,e){const s=this.getOrigin(t[0]),r=this.getResolution(t[0]),l=ri(this.getTileSize(t[0]),this.tmpSize_),h=s[0]+t[1]*l[0]*r,u=s[1]-(t[2]+1)*l[1]*r,f=h+l[0]*r,g=u+l[1]*r;return Ns(h,u,f,g,e)}getTileCoordForCoordAndResolution(t,e,s){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,s)}getTileCoordForXYAndResolution_(t,e,s,r,l){const h=this.getZForResolution(s),u=s/this.getResolution(h),f=this.getOrigin(h),g=ri(this.getTileSize(h),this.tmpSize_);let _=u*(t-f[0])/s/g[0],y=u*(f[1]-e)/s/g[1];return r?(_=cu(_,Ss)-1,y=cu(y,Ss)-1):(_=uu(_,Ss),y=uu(y,Ss)),Wu(h,_,y,l)}getTileCoordForXYAndZ_(t,e,s,r,l){const h=this.getOrigin(s),u=this.getResolution(s),f=ri(this.getTileSize(s),this.tmpSize_);let g=(t-h[0])/u/f[0],_=(h[1]-e)/u/f[1];return r?(g=cu(g,Ss)-1,_=cu(_,Ss)-1):(g=uu(g,Ss),_=uu(_,Ss)),Wu(s,g,_,l)}getTileCoordForCoordAndZ(t,e,s){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,s)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const s=tg(this.resolutions_,t,e||0);return Jt(s,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return ME(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,s=new Array(e);for(let r=this.minZoom;r<e;++r)s[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=s}}function FE(i){let t=i.getDefaultTileGrid();return t||(t=Gw(i),i.setDefaultTileGrid(t)),t}function Rw(i,t,e){const s=t[0],r=i.getTileCoordCenter(t),l=kg(e);if(!Fr(l,r)){const h=Ft(l),u=Math.ceil((l[0]-r[0])/h);return r[0]+=h*u,i.getTileCoordForCoordAndZ(r,s)}return t}function Aw(i,t,e,s){s=s!==void 0?s:"top-left";const r=UE(i,t,e);return new zE({extent:i,origin:eM(i,s),resolutions:r,tileSize:e})}function Ow(i){const t=i||{},e=t.extent||$t("EPSG:3857").getExtent(),s={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:UE(e,t.maxZoom,t.tileSize,t.maxResolution)};return new zE(s)}function UE(i,t,e,s){t=t!==void 0?t:g8,e=ri(e!==void 0?e:Dg);const r=qe(i),l=Ft(i);s=s>0?s:Math.max(l/e[0],r/e[1]);const h=t+1,u=new Array(h);for(let f=0;f<h;++f)u[f]=s/Math.pow(2,f);return u}function Gw(i,t,e,s){const r=kg(i);return Aw(r,t,e,s)}function kg(i){i=$t(i);let t=i.getExtent();if(!t){const e=180*lg.degrees/i.getMetersPerUnit();t=Ns(-e,-e,e,e)}return t}const Lw=/\{z\}/g,Nw=/\{x\}/g,Dw=/\{y\}/g,Iw=/\{-y\}/g;function Pw(i,t,e,s,r){return i.replace(Lw,t.toString()).replace(Nw,e.toString()).replace(Dw,s.toString()).replace(Iw,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-s).toString()})}function zw(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const s=e[1].charCodeAt(0),r=e[2].charCodeAt(0);let l;for(l=s;l<=r;++l)t.push(i.replace(e[0],String.fromCharCode(l)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const s=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=s;r++)t.push(i.replace(e[0],r.toString()));return t}return t.push(i),t}function Fw(i,t){return function(e,s,r){if(!e)return;let l;const h=e[0];if(t){const u=t.getFullTileRange(h);u&&(l=u.getHeight()-1)}return Pw(i,h,e[1],e[2],l)}}function Uw(i,t){const e=i.length,s=new Array(e);for(let r=0;r<e;++r)s[r]=Fw(i[r],t);return kw(s)}function kw(i){return i.length===1?i[0]:function(t,e,s){if(!t)return;const r=Sw(t),l=ya(r,i.length);return i[l](t,e,s)}}class Xw extends RE{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&ri(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||It(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,s,r,l){return Et()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:FE(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,s){const r=this.getTileGridForProjection(s),l=this.getTilePixelRatio(e),h=ri(r.getTileSize(t),this.tmpSize);return l==1?h:Fx(h,l,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const s=e!==void 0?e:this.getProjection(),r=e!==void 0?this.getTileGridForProjection(s):this.tileGrid||this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(t=Rw(r,t,s)),xw(t,r)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class jw extends kn{constructor(t,e){super(t),this.tile=e}}const v0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Xg extends Xw{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Xg.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,s=It(e),r=e.getState();let l;r==gt.LOADING?(this.tileLoadingKeys_[s]=!0,l=v0.TILELOADSTART):s in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[s],l=r==gt.ERROR?v0.TILELOADERROR:r==gt.LOADED?v0.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new jw(l,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=zw(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Uw(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,s){}}class Bw extends Xg{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Yw,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:IE,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!Ru(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Ru(e,t)))return this.tileGrid;const s=It(t);return s in this.tileGridForProjection||(this.tileGridForProjection[s]=FE(t)),this.tileGridForProjection[s]}createTile_(t,e,s,r,l,h){const u=[t,e,s],f=this.getTileCoordForTileUrlFunction(u,l),g=f?this.tileUrlFunction(f,r,l):void 0,_=new this.tileClass(u,g!==void 0?gt.IDLE:gt.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return _.key=h,_.addEventListener(pt.CHANGE,this.handleTileChange.bind(this)),_}getTile(t,e,s,r,l){const h=this.getProjection();if(!h||!l||Ru(h,l))return this.getTileInternal(t,e,s,r,h||l);const u=[t,e,s],f=this.getKey(),g=this.getTileGridForProjection(h),_=this.getTileGridForProjection(l),y=this.getTileCoordForTileUrlFunction(u,l),v=new PE(h,g,l,_,u,y,this.getTilePixelRatio(r),this.getGutter(),(p,S,w,x)=>this.getTileInternal(p,S,w,x,h),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=f,v}getTileInternal(t,e,s,r,l){const h=this.getKey();return this.createTile_(t,e,s,r,l,h)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const s=$t(t);if(s){const r=It(s);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}}function Yw(i,t){i.getImage().src=t}class qw extends Bw{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",s=t.tileGrid!==void 0?t.tileGrid:Ow({extent:kg(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Hw='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Zw extends qw{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[Hw];const s=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:s,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}class Kw{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Tc,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let s=e.dataProjection?$t(e.dataProjection):this.readProjection(t);e.extent&&s&&s.getUnits()==="tile-pixels"&&(s=$t(s),s.setWorldExtent(e.extent)),e={dataProjection:s,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Et()}readFeature(t,e){return Et()}readFeatures(t,e){return Et()}readGeometry(t,e){return Et()}readProjection(t){return Et()}writeFeature(t,e){return Et()}writeFeatures(t,e){return Et()}writeGeometry(t,e){return Et()}}function jg(i,t,e){const s=e?$t(e.featureProjection):null,r=e?$t(e.dataProjection):null;let l=i;if(s&&r&&!Ru(s,r)){t&&(l=i.clone());const h=t?s:r,u=t?r:s;h.getUnits()==="tile-pixels"?l.transform(h,u):l.applyTransform(So(h,u))}if(t&&e&&e.decimals!==void 0){const h=Math.pow(10,e.decimals),u=function(f){for(let g=0,_=f.length;g<_;++g)f[g]=Math.round(f[g]*h)/h;return f};l===i&&(l=i.clone()),l.applyTransform(u)}return l}const Vw={Point:Bu,LineString:Yr,Polygon:Is,MultiPoint:Rc,MultiLineString:Zu,MultiPolygon:Ku};function Ww(i,t,e){return Array.isArray(t[0])?(wE(i,0,t,e)||(i=i.slice(),U0(i,0,t,e)),i):(Og(i,0,t,e)||(i=i.slice(),Yu(i,0,t,e)),i)}function kE(i,t){const e=i.geometry;if(!e)return[];if(Array.isArray(e))return e.map(l=>kE({...i,geometry:l})).flat();const s=e.type==="MultiPolygon"?"Polygon":e.type;if(s==="GeometryCollection"||s==="Circle")throw new Error("Unsupported geometry type: "+s);const r=e.layout.length;return jg(new vi(s,s==="Polygon"?Ww(e.flatCoordinates,e.ends,r):e.flatCoordinates,e.ends?.flat(),r,i.properties||{},i.id).enableSimplifyTransformed(),!1,t)}function Bg(i,t){if(!i)return null;if(Array.isArray(i)){const s=i.map(r=>Bg(r,t));return new Hu(s)}const e=Vw[i.type];return jg(new e(i.flatCoordinates,i.layout||"XY",i.ends),!1,t)}class Qw extends Kw{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Mu(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Mu(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Et()}readFeaturesFromObject(t,e){return Et()}readGeometry(t,e){return this.readGeometryFromObject(Mu(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Et()}readProjection(t){return this.readProjectionFromObject(Mu(t))}readProjectionFromObject(t){return Et()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Et()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Et()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Et()}}function Mu(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}return i!==null?i:null}class $w extends Qw{constructor(t){t=t||{},super(),this.dataProjection=$t(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=$t(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let s=null;t.type==="Feature"?s=t:s={type:"Feature",geometry:t,properties:null};const r=Yg(s.geometry);if(this.featureClass===vi)return kE({geometry:r,id:s.id,properties:s.properties},e);const l=new Tc;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&s.geometry_name&&l.setGeometryName(s.geometry_name),l.setGeometry(Bg(r,e)),"id"in s&&l.setId(s.id),s.properties&&l.setProperties(s.properties,!0),l}readFeaturesFromObject(t,e){const s=t;let r=null;if(s.type==="FeatureCollection"){const l=t;r=[];const h=l.features;for(let u=0,f=h.length;u<f;++u){const g=this.readFeatureFromObject(h[u],e);g&&r.push(g)}}else r=[this.readFeatureFromObject(t,e)];return r.flat()}readGeometryFromObject(t,e){return Jw(t,e)}readProjectionFromObject(t){const e=t.crs;let s;if(e)if(e.type=="name")s=$t(e.properties.name);else if(e.type==="EPSG")s=$t("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else s=this.dataProjection;return s}writeFeatureObject(t,e){e=this.adaptOptions(e);const s={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(s.id=r),!t.hasProperties())return s;const l=t.getProperties(),h=t.getGeometry();return h&&(s.geometry=Y0(h,e),delete l[t.getGeometryName()]),Ea(l)||(s.properties=l),s}writeFeaturesObject(t,e){e=this.adaptOptions(e);const s=[];for(let r=0,l=t.length;r<l;++r)s.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:s}}writeGeometryObject(t,e){return Y0(t,this.adaptOptions(e))}}function Yg(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=eb(i);break}case"LineString":{e=ib(i);break}case"Polygon":{e=rb(i);break}case"MultiPoint":{e=sb(i);break}case"MultiLineString":{e=nb(i);break}case"MultiPolygon":{e=ab(i);break}case"GeometryCollection":{e=tb(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return e}function Jw(i,t){const e=Yg(i);return Bg(e,t)}function tb(i,t){return i.geometries.map(function(s){return Yg(s)})}function eb(i){const t=i.coordinates;return{type:"Point",flatCoordinates:t,layout:Ra(t.length)}}function ib(i){const t=i.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Ra(t[0]?.length||2)}}function nb(i){const t=i.coordinates,e=t[0]?.[0]?.length||2,s=[],r=Yo(s,0,t,e);return{type:"MultiLineString",flatCoordinates:s,ends:r,layout:Ra(e)}}function sb(i){const t=i.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Ra(t[0]?.length||2)}}function ab(i){const t=i.coordinates,e=[],s=t[0]?.[0]?.[0].length||2,r=vE(e,0,t,s);return{type:"MultiPolygon",flatCoordinates:e,ends:r,layout:Ra(s)}}function rb(i){const t=i.coordinates,e=[],s=t[0]?.[0]?.length,r=Yo(e,0,t,s);return{type:"Polygon",flatCoordinates:e,ends:r,layout:Ra(s)}}function Y0(i,t){i=jg(i,!0,t);const e=i.getType();let s;switch(e){case"Point":{s=fb(i);break}case"LineString":{s=ob(i);break}case"Polygon":{s=db(i,t);break}case"MultiPoint":{s=ub(i);break}case"MultiLineString":{s=hb(i);break}case"MultiPolygon":{s=cb(i,t);break}case"GeometryCollection":{s=lb(i,t);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return s}function lb(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(s){return Y0(s,t)})}}function ob(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function hb(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function ub(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function cb(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function fb(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function db(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const E0="projection",tv="coordinateFormat";class gb extends Ac{constructor(t){t=t||{};const e=document.createElement("div");e.className=t.className!==void 0?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(E0,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=t.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=t.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(tv)}getProjection(){return this.get(E0)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(Lt(e,Lo.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Lt(e,Lo.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(tv,t)}setProjection(t){this.set(E0,$t(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const l=this.getProjection();l?this.transform_=fc(this.mapProjection_,l):this.transform_=FM}const r=this.getMap().getCoordinateFromPixelInternal(t);if(r){if(this.transform_(r,r),this.wrapX_){const h=this.getProjection()||this.mapProjection_;ag(r,h)}const l=this.getCoordinateFormat();l?e=l(r):e=r.toString()}}(!this.renderedHTML_||e!==this.renderedHTML_)&&(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}function _b(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)i("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),i("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var Ma=1,xa=2,Pr=3,mb=4,q0=5,ev=6378137,yb=6356752314e-3,iv=.0066943799901413165,_o=484813681109536e-20,Q=Math.PI/2,vb=.16666666666666666,Eb=.04722222222222222,pb=.022156084656084655,et=1e-10,Le=.017453292519943295,un=57.29577951308232,kt=Math.PI/4,No=Math.PI*2,ce=3.14159265359,li={};li.greenwich=0;li.lisbon=-9.131906111111;li.paris=2.337229166667;li.bogota=-74.080916666667;li.madrid=-3.687938888889;li.rome=12.452333333333;li.bern=7.439583333333;li.jakarta=106.807719444444;li.ferro=-17.666666666667;li.brussels=4.367975;li.stockholm=18.058277777778;li.athens=23.7163375;li.oslo=10.722916666667;const Sb={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var nv=/[\s_\-\/\(\)]/g;function Ps(i,t){if(i[t])return i[t];for(var e=Object.keys(i),s=t.toLowerCase().replace(nv,""),r=-1,l,h;++r<e.length;)if(l=e[r],h=l.toLowerCase().replace(nv,""),h===s)return i[l]}function H0(i){var t={},e=i.split("+").map(function(u){return u.trim()}).filter(function(u){return u}).reduce(function(u,f){var g=f.split("=");return g.push(!0),u[g[0].toLowerCase()]=g[1],u},{}),s,r,l,h={proj:"projName",datum:"datumCode",rf:function(u){t.rf=parseFloat(u)},lat_0:function(u){t.lat0=u*Le},lat_1:function(u){t.lat1=u*Le},lat_2:function(u){t.lat2=u*Le},lat_ts:function(u){t.lat_ts=u*Le},lon_0:function(u){t.long0=u*Le},lon_1:function(u){t.long1=u*Le},lon_2:function(u){t.long2=u*Le},alpha:function(u){t.alpha=parseFloat(u)*Le},gamma:function(u){t.rectified_grid_angle=parseFloat(u)*Le},lonc:function(u){t.longc=u*Le},x_0:function(u){t.x0=parseFloat(u)},y_0:function(u){t.y0=parseFloat(u)},k_0:function(u){t.k0=parseFloat(u)},k:function(u){t.k0=parseFloat(u)},a:function(u){t.a=parseFloat(u)},b:function(u){t.b=parseFloat(u)},r:function(u){t.a=t.b=parseFloat(u)},r_a:function(){t.R_A=!0},zone:function(u){t.zone=parseInt(u,10)},south:function(){t.utmSouth=!0},towgs84:function(u){t.datum_params=u.split(",").map(function(f){return parseFloat(f)})},to_meter:function(u){t.to_meter=parseFloat(u)},units:function(u){t.units=u;var f=Ps(Sb,u);f&&(t.to_meter=f.to_meter)},from_greenwich:function(u){t.from_greenwich=u*Le},pm:function(u){var f=Ps(li,u);t.from_greenwich=(f||parseFloat(u))*Le},nadgrids:function(u){u==="@null"?t.datumCode="none":t.nadgrids=u},axis:function(u){var f="ewnsud";u.length===3&&f.indexOf(u.substr(0,1))!==-1&&f.indexOf(u.substr(1,1))!==-1&&f.indexOf(u.substr(2,1))!==-1&&(t.axis=u)},approx:function(){t.approx=!0}};for(s in e)r=e[s],s in h?(l=h[s],typeof l=="function"?l(r):t[l]=r):t[s]=r;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}class XE{static getId(t){const e=t.find(s=>Array.isArray(s)&&s[0]==="ID");return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(t,e="unit"){if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};const s=t[1],r=parseFloat(t[2])||null,l=t.find(u=>Array.isArray(u)&&u[0]==="ID"),h=l?{authority:l[1],code:parseInt(l[2],10)}:null;return{type:e,name:s,conversion_factor:r,id:h}}static convertAxis(t){const e=t[1]||"Unknown";let s;const r=e.match(/^\((.)\)$/);if(r){const g=r[1].toUpperCase();if(g==="E")s="east";else if(g==="N")s="north";else if(g==="U")s="up";else throw new Error(`Unknown axis abbreviation: ${g}`)}else s=t[2]?t[2].toLowerCase():"unknown";const l=t.find(g=>Array.isArray(g)&&g[0]==="ORDER"),h=l?parseInt(l[1],10):null,u=t.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT")),f=this.convertUnit(u);return{name:e,direction:s,unit:f,order:h}}static extractAxes(t){return t.filter(e=>Array.isArray(e)&&e[0]==="AXIS").map(e=>this.convertAxis(e)).sort((e,s)=>(e.order||0)-(s.order||0))}static convert(t,e={}){switch(t[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=t[1],e.base_crs=t.find(v=>Array.isArray(v)&&v[0]==="BASEGEOGCRS")?this.convert(t.find(v=>Array.isArray(v)&&v[0]==="BASEGEOGCRS")):null,e.conversion=t.find(v=>Array.isArray(v)&&v[0]==="CONVERSION")?this.convert(t.find(v=>Array.isArray(v)&&v[0]==="CONVERSION")):null;const s=t.find(v=>Array.isArray(v)&&v[0]==="CS");s&&(e.coordinate_system={type:s[1],axis:this.extractAxes(t)});const r=t.find(v=>Array.isArray(v)&&v[0]==="LENGTHUNIT");if(r){const v=this.convertUnit(r);e.coordinate_system.unit=v}e.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=t[1];const l=t.find(v=>Array.isArray(v)&&(v[0]==="DATUM"||v[0]==="ENSEMBLE"));if(l){const v=this.convert(l);l[0]==="ENSEMBLE"?e.datum_ensemble=v:e.datum=v;const p=t.find(S=>Array.isArray(S)&&S[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(v.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},e.id=this.getId(t);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=t[1],e.ellipsoid=t.find(v=>Array.isArray(v)&&v[0]==="ELLIPSOID")?this.convert(t.find(v=>Array.isArray(v)&&v[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=t[1],e.members=t.filter(v=>Array.isArray(v)&&v[0]==="MEMBER").map(v=>({type:"DatumEnsembleMember",name:v[1],id:this.getId(v)}));const h=t.find(v=>Array.isArray(v)&&v[0]==="ENSEMBLEACCURACY");h&&(e.accuracy=parseFloat(h[1]));const u=t.find(v=>Array.isArray(v)&&v[0]==="ELLIPSOID");u&&(e.ellipsoid=this.convert(u)),e.id=this.getId(t);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=t[1],e.semi_major_axis=parseFloat(t[2]),e.inverse_flattening=parseFloat(t[3]),t.find(v=>Array.isArray(v)&&v[0]==="LENGTHUNIT")&&this.convert(t.find(v=>Array.isArray(v)&&v[0]==="LENGTHUNIT"),e);break;case"CONVERSION":e.type="Conversion",e.name=t[1],e.method=t.find(v=>Array.isArray(v)&&v[0]==="METHOD")?this.convert(t.find(v=>Array.isArray(v)&&v[0]==="METHOD")):null,e.parameters=t.filter(v=>Array.isArray(v)&&v[0]==="PARAMETER").map(v=>this.convert(v));break;case"METHOD":e.type="Method",e.name=t[1],e.id=this.getId(t);break;case"PARAMETER":e.type="Parameter",e.name=t[1],e.value=parseFloat(t[2]),e.unit=this.convertUnit(t.find(v=>Array.isArray(v)&&(v[0]==="LENGTHUNIT"||v[0]==="ANGLEUNIT"||v[0]==="SCALEUNIT"))),e.id=this.getId(t);break;case"BOUNDCRS":e.type="BoundCRS";const f=t.find(v=>Array.isArray(v)&&v[0]==="SOURCECRS");if(f){const v=f.find(p=>Array.isArray(p));e.source_crs=v?this.convert(v):null}const g=t.find(v=>Array.isArray(v)&&v[0]==="TARGETCRS");if(g){const v=g.find(p=>Array.isArray(p));e.target_crs=v?this.convert(v):null}const _=t.find(v=>Array.isArray(v)&&v[0]==="ABRIDGEDTRANSFORMATION");_?e.transformation=this.convert(_):e.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=t[1],e.method=t.find(v=>Array.isArray(v)&&v[0]==="METHOD")?this.convert(t.find(v=>Array.isArray(v)&&v[0]==="METHOD")):null,e.parameters=t.filter(v=>Array.isArray(v)&&(v[0]==="PARAMETER"||v[0]==="PARAMETERFILE")).map(v=>{if(v[0]==="PARAMETER")return this.convert(v);if(v[0]==="PARAMETERFILE")return{name:v[1],value:v[2],id:{authority:"EPSG",code:8656}}}),e.parameters.length===7){const v=e.parameters[6];v.name==="Scale difference"&&(v.value=Math.round((v.value-1)*1e12)/1e6)}e.id=this.getId(t);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const y=this.convertUnit(t,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(v=>{v.unit||(v.unit=y)}),y.conversion_factor&&y.conversion_factor!==1&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:y});break;default:e.keyword=t[0];break}return e}}class Mb extends XE{static convert(t,e={}){return super.convert(t,e),e.coordinate_system&&e.coordinate_system.subtype==="Cartesian"&&delete e.coordinate_system,e.usage&&delete e.usage,e}}class xb extends XE{static convert(t,e={}){super.convert(t,e);const s=t.find(l=>Array.isArray(l)&&l[0]==="CS");s&&(e.coordinate_system={subtype:s[1],axis:this.extractAxes(t)});const r=t.find(l=>Array.isArray(l)&&l[0]==="USAGE");if(r){const l=r.find(f=>Array.isArray(f)&&f[0]==="SCOPE"),h=r.find(f=>Array.isArray(f)&&f[0]==="AREA"),u=r.find(f=>Array.isArray(f)&&f[0]==="BBOX");e.usage={},l&&(e.usage.scope=l[1]),h&&(e.usage.area=h[1]),u&&(e.usage.bbox=u.slice(1))}return e}}function wb(i){return i.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(i.find(t=>Array.isArray(t)&&t[0]==="CS")||i[0]==="BOUNDCRS"||i[0]==="PROJCRS"||i[0]==="GEOGCRS","2015")}function bb(i){return(wb(i)==="2019"?xb:Mb).convert(i)}function Cb(i){const t=i.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var Do=1,jE=2,BE=3,Qu=4,YE=5,qg=-1,Tb=/\s/,Rb=/[A-Za-z]/,Ab=/[A-Za-z84_]/,Oc=/[,\]]/,qE=/[\d\.E\-\+]/;function jn(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Do}jn.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==Qu)for(;Tb.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Do:return this.neutral(i);case jE:return this.keyword(i);case Qu:return this.quoted(i);case YE:return this.afterquote(i);case BE:return this.number(i);case qg:return}};jn.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=Qu;return}if(Oc.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};jn.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Do;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Do,this.currentObject=this.stack.pop(),this.currentObject||(this.state=qg);return}};jn.prototype.number=function(i){if(qE.test(i)){this.word+=i;return}if(Oc.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};jn.prototype.quoted=function(i){if(i==='"'){this.state=YE;return}this.word+=i};jn.prototype.keyword=function(i){if(Ab.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Do;return}if(Oc.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};jn.prototype.neutral=function(i){if(Rb.test(i)){this.word=i,this.state=jE;return}if(i==='"'){this.word="",this.state=Qu;return}if(qE.test(i)){this.word=i,this.state=BE;return}if(Oc.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};jn.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===qg)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ob(i){var t=new jn(i);return t.output()}function p0(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var s=t?{}:i,r=e.reduce(function(l,h){return Ar(h,l),l},s);t&&(i[t]=r)}function Ar(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},Ar(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var s;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Ar(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Ar(i[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],p0(t,e,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],p0(t,e,i),t[e].type=e;return;default:for(s=-1;++s<i.length;)if(!Array.isArray(i[s]))return Ar(i,t[e]);return p0(t,e,i)}}var Gb=.017453292519943295;function Bi(i){return i*Gb}function HE(i){const t=(i.projName||"").toLowerCase().replace(/_/g," ");!i.long0&&i.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(i.lat0=Bi(i.lat1>0?90:-90),i.lat_ts=i.lat1,delete i.lat1):!i.lat_ts&&i.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(i.lat_ts=i.lat0,i.lat0=Bi(i.lat0>0?90:-90),delete i.lat1)}function sv(i){let t={units:null,to_meter:void 0};return typeof i=="string"?(t.units=i.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):i&&i.name&&(t.units=i.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=i.conversion_factor),t}function av(i){return typeof i=="object"?i.value*i.unit.conversion_factor:i}function rv(i,t){i.ellipsoid.radius?(t.a=i.ellipsoid.radius,t.rf=0):(t.a=av(i.ellipsoid.semi_major_axis),i.ellipsoid.inverse_flattening!==void 0?t.rf=i.ellipsoid.inverse_flattening:i.ellipsoid.semi_major_axis!==void 0&&i.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-av(i.ellipsoid.semi_minor_axis))))}function $u(i,t={}){return!i||typeof i!="object"?i:i.type==="BoundCRS"?($u(i.source_crs,t),i.transformation&&(i.transformation.method&&i.transformation.method.name==="NTv2"?t.nadgrids=i.transformation.parameters[0].value:t.datum_params=i.transformation.parameters.map(e=>e.value)),t):(Object.keys(i).forEach(e=>{const s=i[e];if(s!==null)switch(e){case"name":if(t.srsCode)break;t.name=s,t.srsCode=s;break;case"type":s==="GeographicCRS"?t.projName="longlat":s==="ProjectedCRS"&&i.conversion&&i.conversion.method&&(t.projName=i.conversion.method.name);break;case"datum":case"datum_ensemble":s.ellipsoid&&(t.ellps=s.ellipsoid.name,rv(s,t)),s.prime_meridian&&(t.from_greenwich=s.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=s.name,rv(s,t);break;case"prime_meridian":t.long0=(s.longitude||0)*Math.PI/180;break;case"coordinate_system":if(s.axis){if(t.axis=s.axis.map(r=>{const l=r.direction;if(l==="east")return"e";if(l==="north")return"n";if(l==="west")return"w";if(l==="south")return"s";throw new Error(`Unknown axis direction: ${l}`)}).join("")+"u",s.unit){const{units:r,to_meter:l}=sv(s.unit);t.units=r,t.to_meter=l}else if(s.axis[0]&&s.axis[0].unit){const{units:r,to_meter:l}=sv(s.axis[0].unit);t.units=r,t.to_meter=l}}break;case"id":s.authority&&s.code&&(t.title=s.authority+":"+s.code);break;case"conversion":s.method&&s.method.name&&(t.projName=s.method.name),s.parameters&&s.parameters.forEach(r=>{const l=r.name.toLowerCase().replace(/\s+/g,"_"),h=r.value;r.unit&&r.unit.conversion_factor?t[l]=h*r.unit.conversion_factor:r.unit==="degree"?t[l]=h*Math.PI/180:t[l]=h});break;case"unit":s.name&&(t.units=s.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),s.conversion_factor&&(t.to_meter=s.conversion_factor);break;case"base_crs":$u(s,t),t.datumCode=s.id?s.id.authority+"_"+s.id.code:s.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),HE(t),t)}var Lb=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Nb(i,t){var e=t[0],s=t[1];!(e in i)&&s in i&&(i[e]=i[s],t.length===3&&(i[e]=t[2](i[e])))}function ZE(i){for(var t=Object.keys(i),e=0,s=t.length;e<s;++e){var r=t[e];Lb.indexOf(r)!==-1&&Db(i[r]),typeof i[r]=="object"&&ZE(i[r])}}function Db(i){if(i.AUTHORITY){var t=Object.keys(i.AUTHORITY)[0];t&&t in i.AUTHORITY&&(i.title=t+":"+i.AUTHORITY[t])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",s=0,r=i.AXIS.length;s<r;++s){var l=[i.AXIS[s][0].toLowerCase(),i.AXIS[s][1].toLowerCase()];l[0].indexOf("north")!==-1||(l[0]==="y"||l[0]==="lat")&&l[1]==="north"?e+="n":l[0].indexOf("south")!==-1||(l[0]==="y"||l[0]==="lat")&&l[1]==="south"?e+="s":l[0].indexOf("east")!==-1||(l[0]==="x"||l[0]==="lon")&&l[1]==="east"?e+="e":(l[0].indexOf("west")!==-1||(l[0]==="x"||l[0]==="lon")&&l[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var h=i.GEOGCS;i.type==="GEOGCS"&&(h=i),h&&(h.DATUM?i.datumCode=h.DATUM.name.toLowerCase():i.datumCode=h.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(i.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=h.DATUM.SPHEROID.a,i.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(i.datum_params=h.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),i.rectified_grid_angle&&(i.rectified_grid_angle=Bi(i.rectified_grid_angle));function u(_){var y=i.to_meter||1;return _*y}var f=function(_){return Nb(i,_)},g=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Bi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Bi],["x0","false_easting",u],["y0","false_northing",u],["long0","central_meridian",Bi],["lat0","latitude_of_origin",Bi],["lat0","standard_parallel_1",Bi],["lat1","standard_parallel_1",Bi],["lat2","standard_parallel_2",Bi],["azimuth","Azimuth"],["alpha","azimuth",Bi],["srsCode","name"]];g.forEach(f),HE(i)}function Z0(i){if(typeof i=="object")return $u(i);const t=Cb(i);var e=Ob(i);if(t==="WKT2"){const l=bb(e);return $u(l)}var s=e[0],r={};return Ar(e,r),ZE(r),r[s]}function Be(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?Be[i]=H0(arguments[1]):Be[i]=Z0(arguments[1]):Be[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(s){return Array.isArray(s)?Be.apply(t,s):Be(s)});if(typeof i=="string"){if(i in Be)return Be[i]}else"EPSG"in i?Be["EPSG:"+i.EPSG]=i:"ESRI"in i?Be["ESRI:"+i.ESRI]=i:"IAU2000"in i?Be["IAU2000:"+i.IAU2000]=i:console.log(i);return}}_b(Be);function Ib(i){return typeof i=="string"}function Pb(i){return i in Be}function zb(i){return i.indexOf("+")!==0&&i.indexOf("[")!==-1||typeof i=="object"&&!("srsCode"in i)}var Fb=["3857","900913","3785","102113"];function Ub(i){var t=Ps(i,"authority");if(t){var e=Ps(t,"epsg");return e&&Fb.indexOf(e)>-1}}function kb(i){var t=Ps(i,"extension");if(t)return Ps(t,"proj4")}function Xb(i){return i[0]==="+"}function jb(i){if(Ib(i)){if(Pb(i))return Be[i];if(zb(i)){var t=Z0(i);if(Ub(t))return Be["EPSG:3857"];var e=kb(t);return e?H0(e):t}if(Xb(i))return H0(i)}else return"projName"in i?i:Z0(i)}function lv(i,t){i=i||{};var e,s;if(!t)return i;for(s in t)e=t[s],e!==void 0&&(i[s]=e);return i}function fn(i,t,e){var s=i*t;return e/Math.sqrt(1-s*s)}function Zo(i){return i<0?-1:1}function nt(i){return Math.abs(i)<=ce?i:i-Zo(i)*No}function Zi(i,t,e){var s=i*e,r=.5*i;return s=Math.pow((1-s)/(1+s),r),Math.tan(.5*(Q-t))/s}function Io(i,t){for(var e=.5*i,s,r,l=Q-2*Math.atan(t),h=0;h<=15;h++)if(s=i*Math.sin(l),r=Q-2*Math.atan(t*Math.pow((1-s)/(1+s),e))-l,l+=r,Math.abs(r)<=1e-10)return l;return-9999}function Bb(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=fn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Yb(i){var t=i.x,e=i.y;if(e*un>90&&e*un<-90&&t*un>180&&t*un<-180)return null;var s,r;if(Math.abs(Math.abs(e)-Q)<=et)return null;if(this.sphere)s=this.x0+this.a*this.k0*nt(t-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(kt+.5*e));else{var l=Math.sin(e),h=Zi(this.e,e,l);s=this.x0+this.a*this.k0*nt(t-this.long0),r=this.y0-this.a*this.k0*Math.log(h)}return i.x=s,i.y=r,i}function qb(i){var t=i.x-this.x0,e=i.y-this.y0,s,r;if(this.sphere)r=Q-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var l=Math.exp(-e/(this.a*this.k0));if(r=Io(this.e,l),r===-9999)return null}return s=nt(this.long0+t/(this.a*this.k0)),i.x=s,i.y=r,i}var Hb=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Zb={init:Bb,forward:Yb,inverse:qb,names:Hb};function Kb(){}function ov(i){return i}var Vb=["longlat","identity"];const Wb={init:Kb,forward:ov,inverse:ov,names:Vb};var Qb=[Zb,Wb],oa={},Or=[];function KE(i,t){var e=Or.length;return i.names?(Or[e]=i,i.names.forEach(function(s){oa[s.toLowerCase()]=e}),this):(console.log(t),!0)}function VE(i){return i.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function $b(i){if(!i)return!1;var t=i.toLowerCase();if(typeof oa[t]<"u"&&Or[oa[t]]||(t=VE(t),t in oa&&Or[oa[t]]))return Or[oa[t]]}function Jb(){Qb.forEach(KE)}const tC={start:Jb,add:KE,get:$b};var WE={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const eC=WE.WGS84;function iC(i,t,e,s){var r=i*i,l=t*t,h=(r-l)/r,u=0;s?(i*=1-h*(vb+h*(Eb+h*pb)),r=i*i,h=0):u=Math.sqrt(h);var f=(r-l)/l;return{es:h,e:u,ep2:f}}function nC(i,t,e,s,r){if(!i){var l=Ps(WE,s);l||(l=eC),i=l.a,t=l.b,e=l.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<et)&&(r=!0,t=i),{a:i,b:t,rf:e,sphere:r}}var Au={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var sC in Au){var S0=Au[sC];S0.datumName&&(Au[S0.datumName]=S0)}function aC(i,t,e,s,r,l,h){var u={};return i===void 0||i==="none"?u.datum_type=q0:u.datum_type=mb,t&&(u.datum_params=t.map(parseFloat),(u.datum_params[0]!==0||u.datum_params[1]!==0||u.datum_params[2]!==0)&&(u.datum_type=Ma),u.datum_params.length>3&&(u.datum_params[3]!==0||u.datum_params[4]!==0||u.datum_params[5]!==0||u.datum_params[6]!==0)&&(u.datum_type=xa,u.datum_params[3]*=_o,u.datum_params[4]*=_o,u.datum_params[5]*=_o,u.datum_params[6]=u.datum_params[6]/1e6+1)),h&&(u.datum_type=Pr,u.grids=h),u.a=e,u.b=s,u.es=r,u.ep2=l,u}var Hg={};function rC(i,t,e){return t instanceof ArrayBuffer?lC(i,t,e):{ready:oC(i,t)}}function lC(i,t,e){var s=!0;e!==void 0&&e.includeErrorFields===!1&&(s=!1);var r=new DataView(t),l=cC(r),h=fC(r,l),u=dC(r,h,l,s),f={header:h,subgrids:u};return Hg[i]=f,f}async function oC(i,t){for(var e=[],s=await t.getImageCount(),r=s-1;r>=0;r--){var l=await t.getImage(r),h=await l.readRasters(),u=h,f=[l.getWidth(),l.getHeight()],g=l.getBoundingBox().map(hv),_=[l.fileDirectory.ModelPixelScale[0],l.fileDirectory.ModelPixelScale[1]].map(hv),y=g[0]+(f[0]-1)*_[0],v=g[3]-(f[1]-1)*_[1],p=u[0],S=u[1],w=[];for(let R=f[1]-1;R>=0;R--)for(let L=f[0]-1;L>=0;L--){var x=R*f[0]+L;w.push([-Rs(S[x]),Rs(p[x])])}e.push({del:_,lim:f,ll:[-y,v],cvs:w})}var b={header:{nSubgrids:s},subgrids:e};return Hg[i]=b,b}function hC(i){if(i===void 0)return null;var t=i.split(",");return t.map(uC)}function uC(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:Hg[i]||null,isNull:!1}}function hv(i){return i*Math.PI/180}function Rs(i){return i/3600*Math.PI/180}function cC(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function fC(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:K0(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function K0(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function dC(i,t,e,s){for(var r=176,l=[],h=0;h<t.nSubgrids;h++){var u=_C(i,r,e),f=mC(i,r,u,e,s),g=Math.round(1+(u.upperLongitude-u.lowerLongitude)/u.longitudeInterval),_=Math.round(1+(u.upperLatitude-u.lowerLatitude)/u.latitudeInterval);l.push({ll:[Rs(u.lowerLongitude),Rs(u.lowerLatitude)],del:[Rs(u.longitudeInterval),Rs(u.latitudeInterval)],lim:[g,_],count:u.gridNodeCount,cvs:gC(f)});var y=16;s===!1&&(y=8),r+=176+u.gridNodeCount*y}return l}function gC(i){return i.map(function(t){return[Rs(t.longitudeShift),Rs(t.latitudeShift)]})}function _C(i,t,e){return{name:K0(i,t+8,t+16).trim(),parent:K0(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function mC(i,t,e,s,r){var l=t+176,h=16;r===!1&&(h=8);for(var u=[],f=0;f<e.gridNodeCount;f++){var g={latitudeShift:i.getFloat32(l+f*h,s),longitudeShift:i.getFloat32(l+f*h+4,s)};r!==!1&&(g.latitudeAccuracy=i.getFloat32(l+f*h+8,s),g.longitudeAccuracy=i.getFloat32(l+f*h+12,s)),u.push(g)}return u}function Ki(i,t){if(!(this instanceof Ki))return new Ki(i);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(g){if(g)throw g};var e=jb(i);if(typeof e!="object"){t("Could not parse to valid json: "+i);return}var s=Ki.projections.get(e.projName);if(!s){t("Could not get projection name from: "+i);return}if(e.datumCode&&e.datumCode!=="none"){var r=Ps(Au,e.datumCode);r&&(e.datum_params=e.datum_params||(r.towgs84?r.towgs84.split(","):null),e.ellps=r.ellipse,e.datumName=r.datumName?r.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var l=nC(e.a,e.b,e.rf,e.ellps,e.sphere),h=iC(l.a,l.b,l.rf,e.R_A),u=hC(e.nadgrids),f=e.datum||aC(e.datumCode,e.datum_params,l.a,l.b,h.es,h.ep2,u);lv(this,e),lv(this,s),this.a=l.a,this.b=l.b,this.rf=l.rf,this.sphere=l.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=f,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}Ki.projections=tC;Ki.projections.start();function yC(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===Ma?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===xa?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function QE(i,t,e){var s=i.x,r=i.y,l=i.z?i.z:0,h,u,f,g;if(r<-Q&&r>-1.001*Q)r=-Q;else if(r>Q&&r<1.001*Q)r=Q;else{if(r<-Q)return{x:-1/0,y:-1/0,z:i.z};if(r>Q)return{x:1/0,y:1/0,z:i.z}}return s>Math.PI&&(s-=2*Math.PI),u=Math.sin(r),g=Math.cos(r),f=u*u,h=e/Math.sqrt(1-t*f),{x:(h+l)*g*Math.cos(s),y:(h+l)*g*Math.sin(s),z:(h*(1-t)+l)*u}}function $E(i,t,e,s){var r=1e-12,l=r*r,h=30,u,f,g,_,y,v,p,S,w,x,b,R,L,O=i.x,A=i.y,k=i.z?i.z:0,j,B,Z;if(u=Math.sqrt(O*O+A*A),f=Math.sqrt(O*O+A*A+k*k),u/e<r){if(j=0,f/e<r)return B=Q,Z=-s,{x:i.x,y:i.y,z:i.z}}else j=Math.atan2(A,O);g=k/f,_=u/f,y=1/Math.sqrt(1-t*(2-t)*_*_),S=_*(1-t)*y,w=g*y,L=0;do L++,p=e/Math.sqrt(1-t*w*w),Z=u*S+k*w-p*(1-t*w*w),v=t*p/(p+Z),y=1/Math.sqrt(1-v*(2-v)*_*_),x=_*(1-v)*y,b=g*y,R=b*S-x*w,S=x,w=b;while(R*R>l&&L<h);return B=Math.atan(b/Math.abs(x)),{x:j,y:B,z:Z}}function vC(i,t,e){if(t===Ma)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===xa){var s=e[0],r=e[1],l=e[2],h=e[3],u=e[4],f=e[5],g=e[6];return{x:g*(i.x-f*i.y+u*i.z)+s,y:g*(f*i.x+i.y-h*i.z)+r,z:g*(-u*i.x+h*i.y+i.z)+l}}}function EC(i,t,e){if(t===Ma)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===xa){var s=e[0],r=e[1],l=e[2],h=e[3],u=e[4],f=e[5],g=e[6],_=(i.x-s)/g,y=(i.y-r)/g,v=(i.z-l)/g;return{x:_+f*y-u*v,y:-f*_+y+h*v,z:u*_-h*y+v}}}function xu(i){return i===Ma||i===xa}function pC(i,t,e){if(yC(i,t)||i.datum_type===q0||t.datum_type===q0)return e;var s=i.a,r=i.es;if(i.datum_type===Pr){var l=uv(i,!1,e);if(l!==0)return;s=ev,r=iv}var h=t.a,u=t.b,f=t.es;if(t.datum_type===Pr&&(h=ev,u=yb,f=iv),r===f&&s===h&&!xu(i.datum_type)&&!xu(t.datum_type))return e;if(e=QE(e,r,s),xu(i.datum_type)&&(e=vC(e,i.datum_type,i.datum_params)),xu(t.datum_type)&&(e=EC(e,t.datum_type,t.datum_params)),e=$E(e,f,h,u),t.datum_type===Pr){var g=uv(t,!0,e);if(g!==0)return}return e}function uv(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var s={x:-e.x,y:e.y},r={x:Number.NaN,y:Number.NaN},l=[];t:for(var h=0;h<i.grids.length;h++){var u=i.grids[h];if(l.push(u.name),u.isNull){r=s;break}if(u.grid===null){if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1;continue}for(var f=u.grid.subgrids,g=0,_=f.length;g<_;g++){var y=f[g],v=(Math.abs(y.del[1])+Math.abs(y.del[0]))/1e4,p=y.ll[0]-v,S=y.ll[1]-v,w=y.ll[0]+(y.lim[0]-1)*y.del[0]+v,x=y.ll[1]+(y.lim[1]-1)*y.del[1]+v;if(!(S>s.y||p>s.x||x<s.y||w<s.x)&&(r=SC(s,t,y),!isNaN(r.x)))break t}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*un+" "+s.y*un+" tried: '"+l+"'"),-1):(e.x=-r.x,e.y=r.y,0)}function SC(i,t,e){var s={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return s;var r={x:i.x,y:i.y};r.x-=e.ll[0],r.y-=e.ll[1],r.x=nt(r.x-Math.PI)+Math.PI;var l=cv(r,e);if(t){if(isNaN(l.x))return s;l.x=r.x-l.x,l.y=r.y-l.y;var h=9,u=1e-12,f,g;do{if(g=cv(l,e),isNaN(g.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}f={x:r.x-(g.x+l.x),y:r.y-(g.y+l.y)},l.x+=f.x,l.y+=f.y}while(h--&&Math.abs(f.x)>u&&Math.abs(f.y)>u);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=nt(l.x+e.ll[0]),s.y=l.y+e.ll[1]}else isNaN(l.x)||(s.x=i.x+l.x,s.y=i.y+l.y);return s}function cv(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},s={x:Math.floor(e.x),y:Math.floor(e.y)},r={x:e.x-1*s.x,y:e.y-1*s.y},l={x:Number.NaN,y:Number.NaN},h;if(s.x<0||s.x>=t.lim[0]||s.y<0||s.y>=t.lim[1])return l;h=s.y*t.lim[0]+s.x;var u={x:t.cvs[h][0],y:t.cvs[h][1]};h++;var f={x:t.cvs[h][0],y:t.cvs[h][1]};h+=t.lim[0];var g={x:t.cvs[h][0],y:t.cvs[h][1]};h--;var _={x:t.cvs[h][0],y:t.cvs[h][1]},y=r.x*r.y,v=r.x*(1-r.y),p=(1-r.x)*(1-r.y),S=(1-r.x)*r.y;return l.x=p*u.x+v*f.x+S*_.x+y*g.x,l.y=p*u.y+v*f.y+S*_.y+y*g.y,l}function fv(i,t,e){var s=e.x,r=e.y,l=e.z||0,h,u,f,g={};for(f=0;f<3;f++)if(!(t&&f===2&&e.z===void 0))switch(f===0?(h=s,"ew".indexOf(i.axis[f])!==-1?u="x":u="y"):f===1?(h=r,"ns".indexOf(i.axis[f])!==-1?u="y":u="x"):(h=l,u="z"),i.axis[f]){case"e":g[u]=h;break;case"w":g[u]=-h;break;case"n":g[u]=h;break;case"s":g[u]=-h;break;case"u":e[u]!==void 0&&(g.z=h);break;case"d":e[u]!==void 0&&(g.z=-h);break;default:return null}return g}function JE(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function MC(i){dv(i.x),dv(i.y)}function dv(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function xC(i,t){return(i.datum.datum_type===Ma||i.datum.datum_type===xa||i.datum.datum_type===Pr)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Ma||t.datum.datum_type===xa||t.datum.datum_type===Pr)&&i.datumCode!=="WGS84"}function Ju(i,t,e,s){var r;Array.isArray(e)?e=JE(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var l=e.z!==void 0;if(MC(e),i.datum&&t.datum&&xC(i,t)&&(r=new Ki("WGS84"),e=Ju(i,r,e,s),i=r),s&&i.axis!=="enu"&&(e=fv(i,!1,e)),i.projName==="longlat")e={x:e.x*Le,y:e.y*Le,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=pC(i.datum,t.datum,e),!!e)return e=e,t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*un,y:e.y*un,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),s&&t.axis!=="enu"?fv(t,!0,e):(e&&!l&&delete e.z,e)}var gv=Ki("WGS84");function M0(i,t,e,s){var r,l,h;return Array.isArray(e)?(r=Ju(i,t,e,s)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(e.slice(3)):[r.x,r.y,e[2]].concat(e.slice(3)):[r.x,r.y].concat(e.slice(2)):[r.x,r.y]):(l=Ju(i,t,e,s),h=Object.keys(e),h.length===2||h.forEach(function(u){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(u==="x"||u==="y"||u==="z")return}else if(u==="x"||u==="y")return;l[u]=e[u]}),l)}function wu(i){return i instanceof Ki?i:typeof i=="object"&&"oProj"in i?i.oProj:Ki(i)}function wC(i,t,e){var s,r,l=!1,h;return typeof t>"u"?(r=wu(i),s=gv,l=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,r=wu(i),s=gv,l=!0),s||(s=wu(i)),r||(r=wu(t)),e?M0(s,r,e):(h={forward:function(u,f){return M0(s,r,u,f)},inverse:function(u,f){return M0(r,s,u,f)}},l&&(h.oProj=r),h)}var _v=6,tp="AJSAJS",ep="AFAFAF",Gr=65,Je=73,Oi=79,ho=86,uo=90;const bC={forward:ip,inverse:CC,toPoint:np};function ip(i,t){return t=t||5,AC(TC({lat:i[1],lon:i[0]}),t)}function CC(i){var t=Zg(ap(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function np(i){var t=Zg(ap(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function x0(i){return i*(Math.PI/180)}function mv(i){return 180*(i/Math.PI)}function TC(i){var t=i.lat,e=i.lon,s=6378137,r=.00669438,l=.9996,h,u,f,g,_,y,v,p=x0(t),S=x0(e),w,x;x=Math.floor((e+180)/6)+1,e===180&&(x=60),t>=56&&t<64&&e>=3&&e<12&&(x=32),t>=72&&t<84&&(e>=0&&e<9?x=31:e>=9&&e<21?x=33:e>=21&&e<33?x=35:e>=33&&e<42&&(x=37)),h=(x-1)*6-180+3,w=x0(h),u=r/(1-r),f=s/Math.sqrt(1-r*Math.sin(p)*Math.sin(p)),g=Math.tan(p)*Math.tan(p),_=u*Math.cos(p)*Math.cos(p),y=Math.cos(p)*(S-w),v=s*((1-r/4-3*r*r/64-5*r*r*r/256)*p-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*p)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*p)-35*r*r*r/3072*Math.sin(6*p));var b=l*f*(y+(1-g+_)*y*y*y/6+(5-18*g+g*g+72*_-58*u)*y*y*y*y*y/120)+5e5,R=l*(v+f*Math.tan(p)*(y*y/2+(5-g+9*_+4*_*_)*y*y*y*y/24+(61-58*g+g*g+600*_-330*u)*y*y*y*y*y*y/720));return t<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(b),zoneNumber:x,zoneLetter:RC(t)}}function Zg(i){var t=i.northing,e=i.easting,s=i.zoneLetter,r=i.zoneNumber;if(r<0||r>60)return null;var l=.9996,h=6378137,u=.00669438,f,g=(1-Math.sqrt(1-u))/(1+Math.sqrt(1-u)),_,y,v,p,S,w,x,b,R,L=e-5e5,O=t;s<"N"&&(O-=1e7),x=(r-1)*6-180+3,f=u/(1-u),w=O/l,b=w/(h*(1-u/4-3*u*u/64-5*u*u*u/256)),R=b+(3*g/2-27*g*g*g/32)*Math.sin(2*b)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*b)+151*g*g*g/96*Math.sin(6*b),_=h/Math.sqrt(1-u*Math.sin(R)*Math.sin(R)),y=Math.tan(R)*Math.tan(R),v=f*Math.cos(R)*Math.cos(R),p=h*(1-u)/Math.pow(1-u*Math.sin(R)*Math.sin(R),1.5),S=L/(_*l);var A=R-_*Math.tan(R)/p*(S*S/2-(5+3*y+10*v-4*v*v-9*f)*S*S*S*S/24+(61+90*y+298*v+45*y*y-252*f-3*v*v)*S*S*S*S*S*S/720);A=mv(A);var k=(S-(1+2*y+v)*S*S*S/6+(5-2*v+28*y-3*v*v+8*f+24*y*y)*S*S*S*S*S/120)/Math.cos(R);k=x+mv(k);var j;if(i.accuracy){var B=Zg({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});j={top:B.lat,right:B.lon,bottom:A,left:k}}else j={lat:A,lon:k};return j}function RC(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function AC(i,t){var e="00000"+i.easting,s="00000"+i.northing;return i.zoneNumber+i.zoneLetter+OC(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+s.substr(s.length-5,t)}function OC(i,t,e){var s=sp(e),r=Math.floor(i/1e5),l=Math.floor(t/1e5)%20;return GC(r,l,s)}function sp(i){var t=i%_v;return t===0&&(t=_v),t}function GC(i,t,e){var s=e-1,r=tp.charCodeAt(s),l=ep.charCodeAt(s),h=r+i-1,u=l+t,f=!1;h>uo&&(h=h-uo+Gr-1,f=!0),(h===Je||r<Je&&h>Je||(h>Je||r<Je)&&f)&&h++,(h===Oi||r<Oi&&h>Oi||(h>Oi||r<Oi)&&f)&&(h++,h===Je&&h++),h>uo&&(h=h-uo+Gr-1),u>ho?(u=u-ho+Gr-1,f=!0):f=!1,(u===Je||l<Je&&u>Je||(u>Je||l<Je)&&f)&&u++,(u===Oi||l<Oi&&u>Oi||(u>Oi||l<Oi)&&f)&&(u++,u===Je&&u++),u>ho&&(u=u-ho+Gr-1);var g=String.fromCharCode(h)+String.fromCharCode(u);return g}function ap(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,s="",r,l=0;!/[A-Z]/.test(r=i.charAt(l));){if(l>=2)throw"MGRSPoint bad conversion from: "+i;s+=r,l++}var h=parseInt(s,10);if(l===0||l+3>t)throw"MGRSPoint bad conversion from: "+i;var u=i.charAt(l++);if(u<="A"||u==="B"||u==="Y"||u>="Z"||u==="I"||u==="O")throw"MGRSPoint zone letter "+u+" not handled: "+i;e=i.substring(l,l+=2);for(var f=sp(h),g=LC(e.charAt(0),f),_=NC(e.charAt(1),f);_<DC(u);)_+=2e6;var y=t-l;if(y%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var v=y/2,p=0,S=0,w,x,b,R,L;return v>0&&(w=1e5/Math.pow(10,v),x=i.substring(l,l+v),p=parseFloat(x)*w,b=i.substring(l+v),S=parseFloat(b)*w),R=p+g,L=S+_,{easting:R,northing:L,zoneLetter:u,zoneNumber:h,accuracy:w}}function LC(i,t){for(var e=tp.charCodeAt(t-1),s=1e5,r=!1;e!==i.charCodeAt(0);){if(e++,e===Je&&e++,e===Oi&&e++,e>uo){if(r)throw"Bad character: "+i;e=Gr,r=!0}s+=1e5}return s}function NC(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=ep.charCodeAt(t-1),s=0,r=!1;e!==i.charCodeAt(0);){if(e++,e===Je&&e++,e===Oi&&e++,e>ho){if(r)throw"Bad character: "+i;e=Gr,r=!0}s+=1e5}return s}function DC(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function qr(i,t,e){if(!(this instanceof qr))return new qr(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var s=i.split(",");this.x=parseFloat(s[0]),this.y=parseFloat(s[1]),this.z=parseFloat(s[2])||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}qr.fromMGRS=function(i){return new qr(np(i))};qr.prototype.toMGRS=function(i){return ip([this.x,this.y],i)};var IC=1,PC=.25,yv=.046875,vv=.01953125,Ev=.01068115234375,zC=.75,FC=.46875,UC=.013020833333333334,kC=.007120768229166667,XC=.3645833333333333,jC=.005696614583333333,BC=.3076171875;function Kg(i){var t=[];t[0]=IC-i*(PC+i*(yv+i*(vv+i*Ev))),t[1]=i*(zC-i*(yv+i*(vv+i*Ev)));var e=i*i;return t[2]=e*(FC-i*(UC+i*kC)),e*=i,t[3]=e*(XC-i*jC),t[4]=e*i*BC,t}function Vr(i,t,e,s){return e*=t,t*=t,s[0]*i-e*(s[1]+t*(s[2]+t*(s[3]+t*s[4])))}var YC=20;function Vg(i,t,e){for(var s=1/(1-t),r=i,l=YC;l;--l){var h=Math.sin(r),u=1-t*h*h;if(u=(Vr(r,h,Math.cos(r),e)-i)*(u*Math.sqrt(u))*s,r-=u,Math.abs(u)<et)return r}return r}function qC(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Kg(this.es),this.ml0=Vr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function HC(i){var t=i.x,e=i.y,s=nt(t-this.long0),r,l,h,u=Math.sin(e),f=Math.cos(e);if(this.es){var _=f*s,y=Math.pow(_,2),v=this.ep2*Math.pow(f,2),p=Math.pow(v,2),S=Math.abs(f)>et?Math.tan(e):0,w=Math.pow(S,2),x=Math.pow(w,2);r=1-this.es*Math.pow(u,2),_=_/Math.sqrt(r);var b=Vr(e,u,f,this.en);l=this.a*(this.k0*_*(1+y/6*(1-w+v+y/20*(5-18*w+x+14*v-58*w*v+y/42*(61+179*x-x*w-479*w)))))+this.x0,h=this.a*(this.k0*(b-this.ml0+u*s*_/2*(1+y/12*(5-w+9*v+4*p+y/30*(61+x-58*w+270*v-330*w*v+y/56*(1385+543*x-x*w-3111*w))))))+this.y0}else{var g=f*Math.sin(s);if(Math.abs(Math.abs(g)-1)<et)return 93;if(l=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,h=f*Math.cos(s)/Math.sqrt(1-Math.pow(g,2)),g=Math.abs(h),g>=1){if(g-1>et)return 93;h=0}else h=Math.acos(h);e<0&&(h=-h),h=this.a*this.k0*(h-this.lat0)+this.y0}return i.x=l,i.y=h,i}function ZC(i){var t,e,s,r,l=(i.x-this.x0)*(1/this.a),h=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+h/this.k0,e=Vg(t,this.es,this.en),Math.abs(e)<Q){var y=Math.sin(e),v=Math.cos(e),p=Math.abs(v)>et?Math.tan(e):0,S=this.ep2*Math.pow(v,2),w=Math.pow(S,2),x=Math.pow(p,2),b=Math.pow(x,2);t=1-this.es*Math.pow(y,2);var R=l*Math.sqrt(t)/this.k0,L=Math.pow(R,2);t=t*p,s=e-t*L/(1-this.es)*.5*(1-L/12*(5+3*x-9*S*x+S-4*w-L/30*(61+90*x-252*S*x+45*b+46*S-L/56*(1385+3633*x+4095*b+1574*b*x)))),r=nt(this.long0+R*(1-L/6*(1+2*x+S-L/20*(5+28*x+24*b+8*S*x+6*S-L/42*(61+662*x+1320*b+720*b*x))))/v)}else s=Q*Zo(h),r=0;else{var u=Math.exp(l/this.k0),f=.5*(u-1/u),g=this.lat0+h/this.k0,_=Math.cos(g);t=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(f,2))),s=Math.asin(t),h<0&&(s=-s),f===0&&_===0?r=0:r=nt(Math.atan2(f,_)+this.long0)}return i.x=r,i.y=s,i}var KC=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ou={init:qC,forward:HC,inverse:ZC,names:KC};function rp(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function ai(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),s=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(s,2))}function VC(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function WC(i){var t=Math.abs(i);return t=VC(t*(1+t/(ai(1,t)+1))),i<0?-t:t}function Wg(i,t){for(var e=2*Math.cos(2*t),s=i.length-1,r=i[s],l=0,h;--s>=0;)h=-l+e*r+i[s],l=r,r=h;return t+h*Math.sin(2*t)}function QC(i,t){for(var e=2*Math.cos(t),s=i.length-1,r=i[s],l=0,h;--s>=0;)h=-l+e*r+i[s],l=r,r=h;return Math.sin(t)*h}function $C(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function lp(i,t,e){for(var s=Math.sin(t),r=Math.cos(t),l=rp(e),h=$C(e),u=2*r*h,f=-2*s*l,g=i.length-1,_=i[g],y=0,v=0,p=0,S,w;--g>=0;)S=v,w=y,v=_,y=p,_=-S+u*v-f*y+i[g],p=-w+f*v+u*y;return u=s*h,f=r*l,[u*_-f*p,u*p+f*_]}function JC(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ou.init.apply(this),this.forward=Ou.forward,this.inverse=Ou.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var s=Wg(this.cbg,this.lat0);this.Zb=-this.Qn*(s+QC(this.gtu,2*s))}function tT(i){var t=nt(i.x-this.long0),e=i.y;e=Wg(this.cbg,e);var s=Math.sin(e),r=Math.cos(e),l=Math.sin(t),h=Math.cos(t);e=Math.atan2(s,h*r),t=Math.atan2(l*r,ai(s,r*h)),t=WC(Math.tan(t));var u=lp(this.gtu,2*e,2*t);e=e+u[0],t=t+u[1];var f,g;return Math.abs(t)<=2.623395162778?(f=this.a*(this.Qn*t)+this.x0,g=this.a*(this.Qn*e+this.Zb)+this.y0):(f=1/0,g=1/0),i.x=f,i.y=g,i}function eT(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var s,r;if(Math.abs(t)<=2.623395162778){var l=lp(this.utg,2*e,2*t);e=e+l[0],t=t+l[1],t=Math.atan(rp(t));var h=Math.sin(e),u=Math.cos(e),f=Math.sin(t),g=Math.cos(t);e=Math.atan2(h*g,ai(f,g*u)),t=Math.atan2(f,g*u),s=nt(t+this.long0),r=Wg(this.cgb,e)}else s=1/0,r=1/0;return i.x=s,i.y=r,i}var iT=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Gu={init:JC,forward:tT,inverse:eT,names:iT};function nT(i,t){if(i===void 0){if(i=Math.floor((nt(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var sT="etmerc";function aT(){var i=nT(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Le,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Gu.init.apply(this),this.forward=Gu.forward,this.inverse=Gu.inverse}var rT=["Universal Transverse Mercator System","utm"];const lT={init:aT,names:rT,dependsOn:sT};function Qg(i,t){return Math.pow((1-i)/(1+i),t)}var oT=20;function hT(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+kt)/(Math.pow(Math.tan(.5*this.lat0+kt),this.C)*Qg(this.e*i,this.ratexp))}function uT(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+kt),this.C)*Qg(this.e*Math.sin(e),this.ratexp))-Q,i.x=this.C*t,i}function cT(i){for(var t=1e-14,e=i.x/this.C,s=i.y,r=Math.pow(Math.tan(.5*s+kt)/this.K,1/this.C),l=oT;l>0&&(s=2*Math.atan(r*Qg(this.e*Math.sin(i.y),-.5*this.e))-Q,!(Math.abs(s-i.y)<t));--l)i.y=s;return l?(i.x=e,i.y=s,i):null}const $g={init:hT,forward:uT,inverse:cT};function fT(){$g.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function dT(i){var t,e,s,r;return i.x=nt(i.x-this.long0),$g.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),s=Math.cos(i.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*s),i.x=r*e*Math.sin(i.x),i.y=r*(this.cosc0*t-this.sinc0*e*s),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function gT(i){var t,e,s,r,l;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,l=ai(i.x,i.y)){var h=2*Math.atan2(l,this.R2);t=Math.sin(h),e=Math.cos(h),r=Math.asin(e*this.sinc0+i.y*t*this.cosc0/l),s=Math.atan2(i.x*t,l*this.cosc0*e-i.y*this.sinc0*t)}else r=this.phic0,s=0;return i.x=s,i.y=r,$g.inverse.apply(this,[i]),i.x=nt(i.x+this.long0),i}var _T=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const mT={init:fT,forward:dT,inverse:gT,names:_T};function Jg(i,t,e){return t*=e,Math.tan(.5*(Q+i))*Math.pow((1-t)/(1+t),.5*e)}function yT(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=et&&(this.k0=.5*(1+Zo(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=et&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=et&&Math.abs(Math.cos(this.lat_ts))>et&&(this.k0=.5*this.cons*fn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Zi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=fn(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Jg(this.lat0,this.sinlat0,this.e))-Q,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function vT(i){var t=i.x,e=i.y,s=Math.sin(e),r=Math.cos(e),l,h,u,f,g,_,y=nt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=et&&Math.abs(e+this.lat0)<=et?(i.x=NaN,i.y=NaN,i):this.sphere?(l=2*this.k0/(1+this.sinlat0*s+this.coslat0*r*Math.cos(y)),i.x=this.a*l*r*Math.sin(y)+this.x0,i.y=this.a*l*(this.coslat0*s-this.sinlat0*r*Math.cos(y))+this.y0,i):(h=2*Math.atan(Jg(e,s,this.e))-Q,f=Math.cos(h),u=Math.sin(h),Math.abs(this.coslat0)<=et?(g=Zi(this.e,e*this.con,this.con*s),_=2*this.a*this.k0*g/this.cons,i.x=this.x0+_*Math.sin(t-this.long0),i.y=this.y0-this.con*_*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<et?(l=2*this.a*this.k0/(1+f*Math.cos(y)),i.y=l*u):(l=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*u+this.cosX0*f*Math.cos(y))),i.y=l*(this.cosX0*u-this.sinX0*f*Math.cos(y))+this.y0),i.x=l*f*Math.sin(y)+this.x0,i))}function ET(i){i.x-=this.x0,i.y-=this.y0;var t,e,s,r,l,h=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var u=2*Math.atan(h/(2*this.a*this.k0));return t=this.long0,e=this.lat0,h<=et?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(u)*this.sinlat0+i.y*Math.sin(u)*this.coslat0/h),Math.abs(this.coslat0)<et?this.lat0>0?t=nt(this.long0+Math.atan2(i.x,-1*i.y)):t=nt(this.long0+Math.atan2(i.x,i.y)):t=nt(this.long0+Math.atan2(i.x*Math.sin(u),h*this.coslat0*Math.cos(u)-i.y*this.sinlat0*Math.sin(u))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=et){if(h<=et)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,s=h*this.cons/(2*this.a*this.k0),e=this.con*Io(this.e,s),t=this.con*nt(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else r=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,h<=et?l=this.X0:(l=Math.asin(Math.cos(r)*this.sinX0+i.y*Math.sin(r)*this.cosX0/h),t=nt(this.long0+Math.atan2(i.x*Math.sin(r),h*this.cosX0*Math.cos(r)-i.y*this.sinX0*Math.sin(r)))),e=-1*Io(this.e,Math.tan(.5*(Q+l)));return i.x=t,i.y=e,i}var pT=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const ST={init:yT,forward:vT,inverse:ET,names:pT,ssfn_:Jg};function MT(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,s=this.rf,r=1/s,l=2*r-Math.pow(r,2),h=this.e=Math.sqrt(l);this.R=this.k0*e*Math.sqrt(1-l)/(1-l*Math.pow(t,2)),this.alpha=Math.sqrt(1+l/(1-l)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var u=Math.log(Math.tan(Math.PI/4+this.b0/2)),f=Math.log(Math.tan(Math.PI/4+i/2)),g=Math.log((1+h*t)/(1-h*t));this.K=u-this.alpha*f+this.alpha*h/2*g}function xT(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),s=-this.alpha*(t+e)+this.K,r=2*(Math.atan(Math.exp(s))-Math.PI/4),l=this.alpha*(i.x-this.lambda0),h=Math.atan(Math.sin(l)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(l))),u=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(l));return i.y=this.R/2*Math.log((1+Math.sin(u))/(1-Math.sin(u)))+this.y0,i.x=this.R*h+this.x0,i}function wT(i){for(var t=i.x-this.x0,e=i.y-this.y0,s=t/this.R,r=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),l=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(s)),h=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(r))),u=this.lambda0+h/this.alpha,f=0,g=l,_=-1e3,y=0;Math.abs(g-_)>1e-7;){if(++y>20)return;f=1/this.alpha*(Math.log(Math.tan(Math.PI/4+l/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(g))/2)),_=g,g=2*Math.atan(Math.exp(f))-Math.PI/2}return i.x=u,i.y=g,i}var bT=["somerc"];const CT={init:MT,forward:xT,inverse:wT,names:bT};var Tr=1e-7;function TT(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.projName=="object"?Object.keys(i.projName)[0]:i.projName;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1||t.indexOf(VE(e))!==-1}function RT(){var i,t,e,s,r,l,h,u,f,g,_=0,y,v=0,p=0,S=0,w=0,x=0,b=0;this.no_off=TT(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var L=!1;if("rectified_grid_angle"in this&&(L=!0),R&&(b=this.alpha),L&&(_=this.rectified_grid_angle),R||L)v=this.longc;else if(p=this.long1,w=this.lat1,S=this.long2,x=this.lat2,Math.abs(w-x)<=Tr||(i=Math.abs(w))<=Tr||Math.abs(i-Q)<=Tr||Math.abs(Math.abs(this.lat0)-Q)<=Tr||Math.abs(Math.abs(x)-Q)<=Tr)throw new Error;var O=1-this.es;t=Math.sqrt(O),Math.abs(this.lat0)>et?(u=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*u*u,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*t/i,s=this.B*t/(e*Math.sqrt(i)),r=s*s-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=s,this.E*=Math.pow(Zi(this.e,this.lat0,u),this.B)):(this.B=1/t,this.A=this.k0,this.E=s=r=1),R||L?(R?(y=Math.asin(Math.sin(b)/s),L||(_=b)):(y=_,b=Math.asin(s*Math.sin(y))),this.lam0=v-Math.asin(.5*(r-1/r)*Math.tan(y))/this.B):(l=Math.pow(Zi(this.e,w,Math.sin(w)),this.B),h=Math.pow(Zi(this.e,x,Math.sin(x)),this.B),r=this.E/l,f=(h-l)/(h+l),g=this.E*this.E,g=(g-h*l)/(g+h*l),i=p-S,i<-Math.PI?S-=No:i>Math.PI&&(S+=No),this.lam0=nt(.5*(p+S)-Math.atan(g*Math.tan(.5*this.B*(p-S))/f)/this.B),y=Math.atan(2*Math.sin(this.B*nt(p-this.lam0))/(r-1/r)),_=b=Math.asin(s*Math.sin(y))),this.singam=Math.sin(y),this.cosgam=Math.cos(y),this.sinrot=Math.sin(_),this.cosrot=Math.cos(_),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*y,this.v_pole_n=this.ArB*Math.log(Math.tan(kt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(kt+r))}function AT(i){var t={},e,s,r,l,h,u,f,g;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-Q)>et){if(h=this.E/Math.pow(Zi(this.e,i.y,Math.sin(i.y)),this.B),u=1/h,e=.5*(h-u),s=.5*(h+u),l=Math.sin(this.B*i.x),r=(e*this.singam-l*this.cosgam)/s,Math.abs(Math.abs(r)-1)<et)throw new Error;g=.5*this.ArB*Math.log((1-r)/(1+r)),u=Math.cos(this.B*i.x),Math.abs(u)<Tr?f=this.A*i.x:f=this.ArB*Math.atan2(e*this.cosgam+l*this.singam,u)}else g=i.y>0?this.v_pole_n:this.v_pole_s,f=this.ArB*i.y;return this.no_rot?(t.x=f,t.y=g):(f-=this.u_0,t.x=g*this.cosrot+f*this.sinrot,t.y=f*this.cosrot-g*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function OT(i){var t,e,s,r,l,h,u,f={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*e),r=.5*(s-1/s),l=.5*(s+1/s),h=Math.sin(this.BrA*t),u=(h*this.cosgam+r*this.singam)/l,Math.abs(Math.abs(u)-1)<et)f.x=0,f.y=u<0?-Q:Q;else{if(f.y=this.E/Math.sqrt((1+u)/(1-u)),f.y=Io(this.e,Math.pow(f.y,1/this.B)),f.y===1/0)throw new Error;f.x=-this.rB*Math.atan2(r*this.cosgam-h*this.singam,Math.cos(this.BrA*t))}return f.x+=this.lam0,f}var GT=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const LT={init:RT,forward:AT,inverse:OT,names:GT};function NT(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<et)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),s=fn(this.e,t,e),r=Zi(this.e,this.lat1,t),l=Math.sin(this.lat2),h=Math.cos(this.lat2),u=fn(this.e,l,h),f=Zi(this.e,this.lat2,l),g=Math.abs(Math.abs(this.lat0)-Q)<et?0:Zi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>et?this.ns=Math.log(s/u)/Math.log(r/f):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=s/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(g,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function DT(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=et&&(e=Zo(e)*(Q-2*et));var s=Math.abs(Math.abs(e)-Q),r,l;if(s>et)r=Zi(this.e,e,Math.sin(e)),l=this.a*this.f0*Math.pow(r,this.ns);else{if(s=e*this.ns,s<=0)return null;l=0}var h=this.ns*nt(t-this.long0);return i.x=this.k0*(l*Math.sin(h))+this.x0,i.y=this.k0*(this.rh-l*Math.cos(h))+this.y0,i}function IT(i){var t,e,s,r,l,h=(i.x-this.x0)/this.k0,u=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(h*h+u*u),e=1):(t=-Math.sqrt(h*h+u*u),e=-1);var f=0;if(t!==0&&(f=Math.atan2(e*h,e*u)),t!==0||this.ns>0){if(e=1/this.ns,s=Math.pow(t/(this.a*this.f0),e),r=Io(this.e,s),r===-9999)return null}else r=-Q;return l=nt(f/this.ns+this.long0),i.x=l,i.y=r,i}var PT=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const zT={init:NT,forward:DT,inverse:IT,names:PT};function FT(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function UT(i){var t,e,s,r,l,h,u,f=i.x,g=i.y,_=nt(f-this.long0);return t=Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(g/2+this.s45),this.alfa)/t)-this.s45),s=-_*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(s)),l=Math.asin(Math.cos(e)*Math.sin(s)/Math.cos(r)),h=this.n*l,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),i.y=u*Math.cos(h)/1,i.x=u*Math.sin(h)/1,this.czech||(i.y*=-1,i.x*=-1),i}function kT(i){var t,e,s,r,l,h,u,f,g=i.x;i.x=i.y,i.y=g,this.czech||(i.y*=-1,i.x*=-1),h=Math.sqrt(i.x*i.x+i.y*i.y),l=Math.atan2(i.y,i.x),r=l/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/h,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(r)),e=Math.asin(Math.cos(s)*Math.sin(r)/Math.cos(t)),i.x=this.long0-e/this.alfa,u=t,f=0;var _=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.e/2))-this.s45),Math.abs(u-i.y)<1e-10&&(f=1),u=i.y,_+=1;while(f===0&&_<15);return _>=15?null:i}var XT=["Krovak","krovak"];const jT={init:FT,forward:UT,inverse:kT,names:XT};function He(i,t,e,s,r){return i*r-t*Math.sin(2*r)+e*Math.sin(4*r)-s*Math.sin(6*r)}function Ko(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Vo(i){return .375*i*(1+.25*i*(1+.46875*i))}function Wo(i){return .05859375*i*i*(1+.75*i)}function Qo(i){return i*i*i*(35/3072)}function t_(i,t,e){var s=t*e;return i/Math.sqrt(1-s*s)}function Us(i){return Math.abs(i)<Q?i:i-Zo(i)*Math.PI}function tc(i,t,e,s,r){var l,h;l=i/t;for(var u=0;u<15;u++)if(h=(i-(t*l-e*Math.sin(2*l)+s*Math.sin(4*l)-r*Math.sin(6*l)))/(t-2*e*Math.cos(2*l)+4*s*Math.cos(4*l)-6*r*Math.cos(6*l)),l+=h,Math.abs(h)<=1e-10)return l;return NaN}function BT(){this.sphere||(this.e0=Ko(this.es),this.e1=Vo(this.es),this.e2=Wo(this.es),this.e3=Qo(this.es),this.ml0=this.a*He(this.e0,this.e1,this.e2,this.e3,this.lat0))}function YT(i){var t,e,s=i.x,r=i.y;if(s=nt(s-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(s)),e=this.a*(Math.atan2(Math.tan(r),Math.cos(s))-this.lat0);else{var l=Math.sin(r),h=Math.cos(r),u=t_(this.a,this.e,l),f=Math.tan(r)*Math.tan(r),g=s*Math.cos(r),_=g*g,y=this.es*h*h/(1-this.es),v=this.a*He(this.e0,this.e1,this.e2,this.e3,r);t=u*g*(1-_*f*(1/6-(8-f+8*y)*_/120)),e=v-this.ml0+u*l/h*_*(.5+(5-f+6*y)*_/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function qT(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,s,r;if(this.sphere){var l=e+this.lat0;s=Math.asin(Math.sin(l)*Math.cos(t)),r=Math.atan2(Math.tan(t),Math.cos(l))}else{var h=this.ml0/this.a+e,u=tc(h,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(u)-Q)<=et)return i.x=this.long0,i.y=Q,e<0&&(i.y*=-1),i;var f=t_(this.a,this.e,Math.sin(u)),g=f*f*f/this.a/this.a*(1-this.es),_=Math.pow(Math.tan(u),2),y=t*this.a/f,v=y*y;s=u-f*Math.tan(u)/g*y*y*(.5-(1+3*_)*y*y/24),r=y*(1-v*(_/3+(1+3*_)*_*v/15))/Math.cos(u)}return i.x=nt(r+this.long0),i.y=Us(s),i}var HT=["Cassini","Cassini_Soldner","cass"];const ZT={init:BT,forward:YT,inverse:qT,names:HT};function Ls(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var V0=1,W0=2,Q0=3,Lu=4;function KT(){var i=Math.abs(this.lat0);if(Math.abs(i-Q)<et?this.mode=this.lat0<0?V0:W0:Math.abs(i)<et?this.mode=Q0:this.mode=Lu,this.es>0){var t;switch(this.qp=Ls(this.e,1),this.mmf=.5/(1-this.es),this.apa=nR(this.es),this.mode){case W0:this.dd=1;break;case V0:this.dd=1;break;case Q0:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Lu:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ls(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Lu&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function VT(i){var t,e,s,r,l,h,u,f,g,_,y=i.x,v=i.y;if(y=nt(y-this.long0),this.sphere){if(l=Math.sin(v),_=Math.cos(v),s=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+_*s:1+this.sinph0*l+this.cosph0*_*s,e<=et)return null;e=Math.sqrt(2/e),t=e*_*Math.sin(y),e*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*_*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(v+this.lat0)<et)return null;e=kt-v*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(y),e*=s}}else{switch(u=0,f=0,g=0,s=Math.cos(y),r=Math.sin(y),l=Math.sin(v),h=Ls(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(u=h/this.qp,f=Math.sqrt(1-u*u)),this.mode){case this.OBLIQ:g=1+this.sinb1*u+this.cosb1*f*s;break;case this.EQUIT:g=1+f*s;break;case this.N_POLE:g=Q+v,h=this.qp-h;break;case this.S_POLE:g=v-Q,h=this.qp+h;break}if(Math.abs(g)<et)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:g=Math.sqrt(2/g),this.mode===this.OBLIQ?e=this.ymf*g*(this.cosb1*u-this.sinb1*f*s):e=(g=Math.sqrt(2/(1+f*s)))*u*this.ymf,t=this.xmf*g*f*r;break;case this.N_POLE:case this.S_POLE:h>=0?(t=(g=Math.sqrt(h))*r,e=s*(this.mode===this.S_POLE?g:-g)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function WT(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,s,r,l,h,u,f,g;if(this.sphere){var _=0,y,v=0;if(y=Math.sqrt(t*t+e*e),r=y*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(r),_=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(y)<=et?0:Math.asin(e*v/y),t*=v,e=_*y;break;case this.OBLIQ:r=Math.abs(y)<=et?this.lat0:Math.asin(_*this.sinph0+e*v*this.cosph0/y),t*=v*this.cosph0,e=(_-Math.sin(r)*this.sinph0)*y;break;case this.N_POLE:e=-e,r=Q-r;break;case this.S_POLE:r-=Q;break}s=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(g=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,f=Math.sqrt(t*t+e*e),f<et)return i.x=this.long0,i.y=this.lat0,i;h=2*Math.asin(.5*f/this.rq),l=Math.cos(h),t*=h=Math.sin(h),this.mode===this.OBLIQ?(g=l*this.sinb1+e*h*this.cosb1/f,u=this.qp*g,e=f*this.cosb1*l-e*this.sinb1*h):(g=e*h/f,u=this.qp*g,e=f*l)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),u=t*t+e*e,!u)return i.x=this.long0,i.y=this.lat0,i;g=1-u/this.qp,this.mode===this.S_POLE&&(g=-g)}s=Math.atan2(t,e),r=sR(Math.asin(g),this.apa)}return i.x=nt(this.long0+s),i.y=r,i}var QT=.3333333333333333,$T=.17222222222222222,JT=.10257936507936508,tR=.06388888888888888,eR=.0664021164021164,iR=.016415012942191543;function nR(i){var t,e=[];return e[0]=i*QT,t=i*i,e[0]+=t*$T,e[1]=t*tR,t*=i,e[0]+=t*JT,e[1]+=t*eR,e[2]=t*iR,e}function sR(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var aR=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const rR={init:KT,forward:VT,inverse:WT,names:aR,S_POLE:V0,N_POLE:W0,EQUIT:Q0,OBLIQ:Lu};function zs(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function lR(){Math.abs(this.lat1+this.lat2)<et||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=fn(this.e3,this.sin_po,this.cos_po),this.qs1=Ls(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=fn(this.e3,this.sin_po,this.cos_po),this.qs2=Ls(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ls(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>et?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function oR(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var s=Ls(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,l=this.ns0*nt(t-this.long0),h=r*Math.sin(l)+this.x0,u=this.rh-r*Math.cos(l)+this.y0;return i.x=h,i.y=u,i}function hR(i){var t,e,s,r,l,h;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),s=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),s=-1),r=0,t!==0&&(r=Math.atan2(s*i.x,s*i.y)),s=t*this.ns0/this.a,this.sphere?h=Math.asin((this.c-s*s)/(2*this.ns0)):(e=(this.c-s*s)/this.ns0,h=this.phi1z(this.e3,e)),l=nt(r/this.ns0+this.long0),i.x=l,i.y=h,i}function uR(i,t){var e,s,r,l,h,u=zs(.5*t);if(i<et)return u;for(var f=i*i,g=1;g<=25;g++)if(e=Math.sin(u),s=Math.cos(u),r=i*e,l=1-r*r,h=.5*l*l/s*(t/(1-f)-e/l+.5/i*Math.log((1-r)/(1+r))),u=u+h,Math.abs(h)<=1e-7)return u;return null}var cR=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const fR={init:lR,forward:oR,inverse:hR,names:cR,phi1z:uR};function dR(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function gR(i){var t,e,s,r,l,h,u,f,g=i.x,_=i.y;return s=nt(g-this.long0),t=Math.sin(_),e=Math.cos(_),r=Math.cos(s),h=this.sin_p14*t+this.cos_p14*e*r,l=1,h>0||Math.abs(h)<=et?(u=this.x0+this.a*l*e*Math.sin(s)/h,f=this.y0+this.a*l*(this.cos_p14*t-this.sin_p14*e*r)/h):(u=this.x0+this.infinity_dist*e*Math.sin(s),f=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*r)),i.x=u,i.y=f,i}function _R(i){var t,e,s,r,l,h;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(r=Math.atan2(t,this.rc),e=Math.sin(r),s=Math.cos(r),h=zs(s*this.sin_p14+i.y*e*this.cos_p14/t),l=Math.atan2(i.x*e,t*this.cos_p14*s-i.y*this.sin_p14*e),l=nt(this.long0+l)):(h=this.phic0,l=0),i.x=l,i.y=h,i}var mR=["gnom"];const yR={init:dR,forward:gR,inverse:_R,names:mR};function vR(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*Q:Q;for(var s=Math.asin(.5*t),r,l,h,u,f=0;f<30;f++)if(l=Math.sin(s),h=Math.cos(s),u=i*l,r=Math.pow(1-u*u,2)/(2*h)*(t/(1-i*i)-l/(1-u*u)+.5/i*Math.log((1-u)/(1+u))),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function ER(){this.sphere||(this.k0=fn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function pR(i){var t=i.x,e=i.y,s,r,l=nt(t-this.long0);if(this.sphere)s=this.x0+this.a*l*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var h=Ls(this.e,Math.sin(e));s=this.x0+this.a*this.k0*l,r=this.y0+this.a*h*.5/this.k0}return i.x=s,i.y=r,i}function SR(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=nt(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=vR(this.e,2*i.y*this.k0/this.a),t=nt(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var MR=["cea"];const xR={init:ER,forward:pR,inverse:SR,names:MR};function wR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function bR(i){var t=i.x,e=i.y,s=nt(t-this.long0),r=Us(e-this.lat0);return i.x=this.x0+this.a*s*this.rc,i.y=this.y0+this.a*r,i}function CR(i){var t=i.x,e=i.y;return i.x=nt(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=Us(this.lat0+(e-this.y0)/this.a),i}var TR=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const RR={init:wR,forward:bR,inverse:CR,names:TR};var pv=20;function AR(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ko(this.es),this.e1=Vo(this.es),this.e2=Wo(this.es),this.e3=Qo(this.es),this.ml0=this.a*He(this.e0,this.e1,this.e2,this.e3,this.lat0)}function OR(i){var t=i.x,e=i.y,s,r,l,h=nt(t-this.long0);if(l=h*Math.sin(e),this.sphere)Math.abs(e)<=et?(s=this.a*h,r=-1*this.a*this.lat0):(s=this.a*Math.sin(l)/Math.tan(e),r=this.a*(Us(e-this.lat0)+(1-Math.cos(l))/Math.tan(e)));else if(Math.abs(e)<=et)s=this.a*h,r=-1*this.ml0;else{var u=t_(this.a,this.e,Math.sin(e))/Math.tan(e);s=u*Math.sin(l),r=this.a*He(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+u*(1-Math.cos(l))}return i.x=s+this.x0,i.y=r+this.y0,i}function GR(i){var t,e,s,r,l,h,u,f,g;if(s=i.x-this.x0,r=i.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=et)t=nt(s/this.a+this.long0),e=0;else{h=this.lat0+r/this.a,u=s*s/this.a/this.a+h*h,f=h;var _;for(l=pv;l;--l)if(_=Math.tan(f),g=-1*(h*(f*_+1)-f-.5*(f*f+u)*_)/((f-h)/_-1),f+=g,Math.abs(g)<=et){e=f;break}t=nt(this.long0+Math.asin(s*Math.tan(f)/this.a)/Math.sin(e))}else if(Math.abs(r+this.ml0)<=et)e=0,t=nt(this.long0+s/this.a);else{h=(this.ml0+r)/this.a,u=s*s/this.a/this.a+h*h,f=h;var y,v,p,S,w;for(l=pv;l;--l)if(w=this.e*Math.sin(f),y=Math.sqrt(1-w*w)*Math.tan(f),v=this.a*He(this.e0,this.e1,this.e2,this.e3,f),p=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),S=v/this.a,g=(h*(y*S+1)-S-.5*y*(S*S+u))/(this.es*Math.sin(2*f)*(S*S+u-2*h*S)/(4*y)+(h-S)*(y*p-2/Math.sin(2*f))-p),f-=g,Math.abs(g)<=et){e=f;break}y=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=nt(this.long0+Math.asin(s*y/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var LR=["Polyconic","American_Polyconic","poly"];const NR={init:AR,forward:OR,inverse:GR,names:LR};function DR(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function IR(i){var t,e=i.x,s=i.y,r=s-this.lat0,l=e-this.long0,h=r/_o*1e-5,u=l,f=1,g=0;for(t=1;t<=10;t++)f=f*h,g=g+this.A[t]*f;var _=g,y=u,v=1,p=0,S,w,x=0,b=0;for(t=1;t<=6;t++)S=v*_-p*y,w=p*_+v*y,v=S,p=w,x=x+this.B_re[t]*v-this.B_im[t]*p,b=b+this.B_im[t]*v+this.B_re[t]*p;return i.x=b*this.a+this.x0,i.y=x*this.a+this.y0,i}function PR(i){var t,e=i.x,s=i.y,r=e-this.x0,l=s-this.y0,h=l/this.a,u=r/this.a,f=1,g=0,_,y,v=0,p=0;for(t=1;t<=6;t++)_=f*h-g*u,y=g*h+f*u,f=_,g=y,v=v+this.C_re[t]*f-this.C_im[t]*g,p=p+this.C_im[t]*f+this.C_re[t]*g;for(var S=0;S<this.iterations;S++){var w=v,x=p,b,R,L=h,O=u;for(t=2;t<=6;t++)b=w*v-x*p,R=x*v+w*p,w=b,x=R,L=L+(t-1)*(this.B_re[t]*w-this.B_im[t]*x),O=O+(t-1)*(this.B_im[t]*w+this.B_re[t]*x);w=1,x=0;var A=this.B_re[1],k=this.B_im[1];for(t=2;t<=6;t++)b=w*v-x*p,R=x*v+w*p,w=b,x=R,A=A+t*(this.B_re[t]*w-this.B_im[t]*x),k=k+t*(this.B_im[t]*w+this.B_re[t]*x);var j=A*A+k*k;v=(L*A+O*k)/j,p=(O*A-L*k)/j}var B=v,Z=p,J=1,st=0;for(t=1;t<=9;t++)J=J*B,st=st+this.D[t]*J;var tt=this.lat0+st*_o*1e5,it=this.long0+Z;return i.x=it,i.y=tt,i}var zR=["New_Zealand_Map_Grid","nzmg"];const FR={init:DR,forward:IR,inverse:PR,names:zR};function UR(){}function kR(i){var t=i.x,e=i.y,s=nt(t-this.long0),r=this.x0+this.a*s,l=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=r,i.y=l,i}function XR(i){i.x-=this.x0,i.y-=this.y0;var t=nt(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var jR=["Miller_Cylindrical","mill"];const BR={init:UR,forward:kR,inverse:XR,names:jR};var YR=20;function qR(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Kg(this.es)}function HR(i){var t,e,s=i.x,r=i.y;if(s=nt(s-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var l=this.n*Math.sin(r),h=YR;h;--h){var u=(this.m*r+Math.sin(r)-l)/(this.m+Math.cos(r));if(r-=u,Math.abs(u)<et)break}t=this.a*this.C_x*s*(this.m+Math.cos(r)),e=this.a*this.C_y*r}else{var f=Math.sin(r),g=Math.cos(r);e=this.a*Vr(r,f,g,this.en),t=this.a*s*g/Math.sqrt(1-this.es*f*f)}return i.x=t,i.y=e,i}function ZR(i){var t,e,s,r;return i.x-=this.x0,s=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(t))),this.m?t=zs((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=zs(Math.sin(t)/this.n)),s=nt(s+this.long0),t=Us(t)):(t=Vg(i.y/this.a,this.es,this.en),r=Math.abs(t),r<Q?(r=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(t)),s=nt(e)):r-et<Q&&(s=this.long0)),i.x=s,i.y=t,i}var KR=["Sinusoidal","sinu"];const VR={init:qR,forward:HR,inverse:ZR,names:KR};function WR(){}function QR(i){for(var t=i.x,e=i.y,s=nt(t-this.long0),r=e,l=Math.PI*Math.sin(e);;){var h=-(r+Math.sin(r)-l)/(1+Math.cos(r));if(r+=h,Math.abs(h)<et)break}r/=2,Math.PI/2-Math.abs(e)<et&&(s=0);var u=.900316316158*this.a*s*Math.cos(r)+this.x0,f=1.4142135623731*this.a*Math.sin(r)+this.y0;return i.x=u,i.y=f,i}function $R(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var s=nt(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var r=Math.asin(e);return i.x=s,i.y=r,i}var JR=["Mollweide","moll"];const t6={init:WR,forward:QR,inverse:$R,names:JR};function e6(){Math.abs(this.lat1+this.lat2)<et||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ko(this.es),this.e1=Vo(this.es),this.e2=Wo(this.es),this.e3=Qo(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=fn(this.e,this.sin_phi,this.cos_phi),this.ml1=He(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<et?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=fn(this.e,this.sin_phi,this.cos_phi),this.ml2=He(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=He(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function i6(i){var t=i.x,e=i.y,s;if(this.sphere)s=this.a*(this.g-e);else{var r=He(this.e0,this.e1,this.e2,this.e3,e);s=this.a*(this.g-r)}var l=this.ns*nt(t-this.long0),h=this.x0+s*Math.sin(l),u=this.y0+this.rh-s*Math.cos(l);return i.x=h,i.y=u,i}function n6(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,s,r;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*i.x,t*i.y)),this.sphere)return r=nt(this.long0+l/this.ns),s=Us(this.g-e/this.a),i.x=r,i.y=s,i;var h=this.g-e/this.a;return s=tc(h,this.e0,this.e1,this.e2,this.e3),r=nt(this.long0+l/this.ns),i.x=r,i.y=s,i}var s6=["Equidistant_Conic","eqdc"];const a6={init:e6,forward:i6,inverse:n6,names:s6};function r6(){this.R=this.a}function l6(i){var t=i.x,e=i.y,s=nt(t-this.long0),r,l;Math.abs(e)<=et&&(r=this.x0+this.R*s,l=this.y0);var h=zs(2*Math.abs(e/Math.PI));(Math.abs(s)<=et||Math.abs(Math.abs(e)-Q)<=et)&&(r=this.x0,e>=0?l=this.y0+Math.PI*this.R*Math.tan(.5*h):l=this.y0+Math.PI*this.R*-Math.tan(.5*h));var u=.5*Math.abs(Math.PI/s-s/Math.PI),f=u*u,g=Math.sin(h),_=Math.cos(h),y=_/(g+_-1),v=y*y,p=y*(2/g-1),S=p*p,w=Math.PI*this.R*(u*(y-S)+Math.sqrt(f*(y-S)*(y-S)-(S+f)*(v-S)))/(S+f);s<0&&(w=-w),r=this.x0+w;var x=f+y;return w=Math.PI*this.R*(p*x-u*Math.sqrt((S+f)*(f+1)-x*x))/(S+f),e>=0?l=this.y0+w:l=this.y0-w,i.x=r,i.y=l,i}function o6(i){var t,e,s,r,l,h,u,f,g,_,y,v,p;return i.x-=this.x0,i.y-=this.y0,y=Math.PI*this.R,s=i.x/y,r=i.y/y,l=s*s+r*r,h=-Math.abs(r)*(1+l),u=h-2*r*r+s*s,f=-2*h+1+2*r*r+l*l,p=r*r/f+(2*u*u*u/f/f/f-9*h*u/f/f)/27,g=(h-u*u/3/f)/f,_=2*Math.sqrt(-g/3),y=3*p/g/_,Math.abs(y)>1&&(y>=0?y=1:y=-1),v=Math.acos(y)/3,i.y>=0?e=(-_*Math.cos(v+Math.PI/3)-u/3/f)*Math.PI:e=-(-_*Math.cos(v+Math.PI/3)-u/3/f)*Math.PI,Math.abs(s)<et?t=this.long0:t=nt(this.long0+Math.PI*(l-1+Math.sqrt(1+2*(s*s-r*r)+l*l))/2/s),i.x=t,i.y=e,i}var h6=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const u6={init:r6,forward:l6,inverse:o6,names:h6};function c6(i,t,e,s,r,l){const h=s-t,u=Math.atan((1-l)*Math.tan(i)),f=Math.atan((1-l)*Math.tan(e)),g=Math.sin(u),_=Math.cos(u),y=Math.sin(f),v=Math.cos(f);let p=h,S,w=100,x,b,R,L,O,A,k,j,B,Z,J,st,tt,it;do{if(x=Math.sin(p),b=Math.cos(p),R=Math.sqrt(v*x*(v*x)+(_*y-g*v*b)*(_*y-g*v*b)),R===0)return{azi1:0,s12:0};L=g*y+_*v*b,O=Math.atan2(R,L),A=_*v*x/R,k=1-A*A,j=k!==0?L-2*g*y/k:0,B=l/16*k*(4+l*(4-3*k)),S=p,p=h+(1-B)*l*A*(O+B*R*(j+B*L*(-1+2*j*j)))}while(Math.abs(p-S)>1e-12&&--w>0);return w===0?{azi1:NaN,s12:NaN}:(Z=k*(r*r-r*(1-l)*(r*(1-l)))/(r*(1-l)*(r*(1-l))),J=1+Z/16384*(4096+Z*(-768+Z*(320-175*Z))),st=Z/1024*(256+Z*(-128+Z*(74-47*Z))),tt=st*R*(j+st/4*(L*(-1+2*j*j)-st/6*j*(-3+4*R*R)*(-3+4*j*j))),it=r*(1-l)*J*(O-tt),{azi1:Math.atan2(v*x,_*y-g*v*b),s12:it})}function f6(i,t,e,s,r,l){const h=Math.atan((1-l)*Math.tan(i)),u=Math.sin(h),f=Math.cos(h),g=Math.sin(e),_=Math.cos(e),y=Math.atan2(u,f*_),v=f*g,p=1-v*v,S=p*(r*r-r*(1-l)*(r*(1-l)))/(r*(1-l)*(r*(1-l))),w=1+S/16384*(4096+S*(-768+S*(320-175*S))),x=S/1024*(256+S*(-128+S*(74-47*S)));let b=s/(r*(1-l)*w),R,L=100,O,A,k,j;do O=Math.cos(2*y+b),A=Math.sin(b),k=Math.cos(b),j=x*A*(O+x/4*(k*(-1+2*O*O)-x/6*O*(-3+4*A*A)*(-3+4*O*O))),R=b,b=s/(r*(1-l)*w)+j;while(Math.abs(b-R)>1e-12&&--L>0);if(L===0)return{lat2:NaN,lon2:NaN};const B=u*A-f*k*_,Z=Math.atan2(u*k+f*A*_,(1-l)*Math.sqrt(v*v+B*B)),J=Math.atan2(A*g,f*k-u*A*_),st=l/16*p*(4+l*(4-3*p)),tt=J-(1-st)*l*v*(b+st*A*(O+st*k*(-1+2*O*O))),it=t+tt;return{lat2:Z,lon2:it}}function d6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function g6(i){var t=i.x,e=i.y,s=Math.sin(i.y),r=Math.cos(i.y),l=nt(t-this.long0),h,u,f,g,_,y,v,p,S,w,x;return this.sphere?Math.abs(this.sin_p12-1)<=et?(i.x=this.x0+this.a*(Q-e)*Math.sin(l),i.y=this.y0-this.a*(Q-e)*Math.cos(l),i):Math.abs(this.sin_p12+1)<=et?(i.x=this.x0+this.a*(Q+e)*Math.sin(l),i.y=this.y0+this.a*(Q+e)*Math.cos(l),i):(S=this.sin_p12*s+this.cos_p12*r*Math.cos(l),v=Math.acos(S),p=v?v/Math.sin(v):1,i.x=this.x0+this.a*p*r*Math.sin(l),i.y=this.y0+this.a*p*(this.cos_p12*s-this.sin_p12*r*Math.cos(l)),i):(h=Ko(this.es),u=Vo(this.es),f=Wo(this.es),g=Qo(this.es),Math.abs(this.sin_p12-1)<=et?(_=this.a*He(h,u,f,g,Q),y=this.a*He(h,u,f,g,e),i.x=this.x0+(_-y)*Math.sin(l),i.y=this.y0-(_-y)*Math.cos(l),i):Math.abs(this.sin_p12+1)<=et?(_=this.a*He(h,u,f,g,Q),y=this.a*He(h,u,f,g,e),i.x=this.x0+(_+y)*Math.sin(l),i.y=this.y0+(_+y)*Math.cos(l),i):Math.abs(t)<et&&Math.abs(e-this.lat0)<et?(i.x=i.y=0,i):(w=c6(this.lat0,this.long0,e,t,this.a,this.f),x=w.azi1,i.x=w.s12*Math.sin(x),i.y=w.s12*Math.cos(x),i))}function _6(i){i.x-=this.x0,i.y-=this.y0;var t,e,s,r,l,h,u,f,g,_,y,v,p,S,w,x;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*Q*this.a?void 0:(e=t/this.a,s=Math.sin(e),r=Math.cos(e),l=this.long0,Math.abs(t)<=et?h=this.lat0:(h=zs(r*this.sin_p12+i.y*s*this.cos_p12/t),u=Math.abs(this.lat0)-Q,Math.abs(u)<=et?this.lat0>=0?l=nt(this.long0+Math.atan2(i.x,-i.y)):l=nt(this.long0-Math.atan2(-i.x,i.y)):l=nt(this.long0+Math.atan2(i.x*s,t*this.cos_p12*r-i.y*this.sin_p12*s))),i.x=l,i.y=h,i)):(f=Ko(this.es),g=Vo(this.es),_=Wo(this.es),y=Qo(this.es),Math.abs(this.sin_p12-1)<=et?(v=this.a*He(f,g,_,y,Q),t=Math.sqrt(i.x*i.x+i.y*i.y),p=v-t,h=tc(p/this.a,f,g,_,y),l=nt(this.long0+Math.atan2(i.x,-1*i.y)),i.x=l,i.y=h,i):Math.abs(this.sin_p12+1)<=et?(v=this.a*He(f,g,_,y,Q),t=Math.sqrt(i.x*i.x+i.y*i.y),p=t-v,h=tc(p/this.a,f,g,_,y),l=nt(this.long0+Math.atan2(i.x,i.y)),i.x=l,i.y=h,i):(S=Math.atan2(i.x,i.y),w=Math.sqrt(i.x*i.x+i.y*i.y),x=f6(this.lat0,this.long0,S,w,this.a,this.f),i.x=x.lon2,i.y=x.lat2,i))}var m6=["Azimuthal_Equidistant","aeqd"];const y6={init:d6,forward:g6,inverse:_6,names:m6};function v6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function E6(i){var t,e,s,r,l,h,u,f,g=i.x,_=i.y;return s=nt(g-this.long0),t=Math.sin(_),e=Math.cos(_),r=Math.cos(s),h=this.sin_p14*t+this.cos_p14*e*r,l=1,(h>0||Math.abs(h)<=et)&&(u=this.a*l*e*Math.sin(s),f=this.y0+this.a*l*(this.cos_p14*t-this.sin_p14*e*r)),i.x=u,i.y=f,i}function p6(i){var t,e,s,r,l,h,u;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=zs(t/this.a),s=Math.sin(e),r=Math.cos(e),h=this.long0,Math.abs(t)<=et?(u=this.lat0,i.x=h,i.y=u,i):(u=zs(r*this.sin_p14+i.y*s*this.cos_p14/t),l=Math.abs(this.lat0)-Q,Math.abs(l)<=et?(this.lat0>=0?h=nt(this.long0+Math.atan2(i.x,-i.y)):h=nt(this.long0-Math.atan2(-i.x,i.y)),i.x=h,i.y=u,i):(h=nt(this.long0+Math.atan2(i.x*s,t*this.cos_p14*r-i.y*this.sin_p14*s)),i.x=h,i.y=u,i))}var S6=["ortho"];const M6={init:v6,forward:E6,inverse:p6,names:S6};var ne={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Xt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function x6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Q-kt/2?this.face=ne.TOP:this.lat0<=-(Q-kt/2)?this.face=ne.BOTTOM:Math.abs(this.long0)<=kt?this.face=ne.FRONT:Math.abs(this.long0)<=Q+kt?this.face=this.long0>0?ne.RIGHT:ne.LEFT:this.face=ne.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function w6(i){var t={x:0,y:0},e,s,r,l,h,u,f={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,s=i.x,this.face===ne.TOP)l=Q-e,s>=kt&&s<=Q+kt?(f.value=Xt.AREA_0,r=s-Q):s>Q+kt||s<=-(Q+kt)?(f.value=Xt.AREA_1,r=s>0?s-ce:s+ce):s>-(Q+kt)&&s<=-kt?(f.value=Xt.AREA_2,r=s+Q):(f.value=Xt.AREA_3,r=s);else if(this.face===ne.BOTTOM)l=Q+e,s>=kt&&s<=Q+kt?(f.value=Xt.AREA_0,r=-s+Q):s<kt&&s>=-kt?(f.value=Xt.AREA_1,r=-s):s<-kt&&s>=-(Q+kt)?(f.value=Xt.AREA_2,r=-s-Q):(f.value=Xt.AREA_3,r=s>0?-s+ce:-s-ce);else{var g,_,y,v,p,S,w;this.face===ne.RIGHT?s=zr(s,+Q):this.face===ne.BACK?s=zr(s,+ce):this.face===ne.LEFT&&(s=zr(s,-Q)),v=Math.sin(e),p=Math.cos(e),S=Math.sin(s),w=Math.cos(s),g=p*w,_=p*S,y=v,this.face===ne.FRONT?(l=Math.acos(g),r=bu(l,y,_,f)):this.face===ne.RIGHT?(l=Math.acos(_),r=bu(l,y,-g,f)):this.face===ne.BACK?(l=Math.acos(-g),r=bu(l,y,-_,f)):this.face===ne.LEFT?(l=Math.acos(-_),r=bu(l,y,g,f)):(l=r=0,f.value=Xt.AREA_0)}return u=Math.atan(12/ce*(r+Math.acos(Math.sin(r)*Math.cos(kt))-Q)),h=Math.sqrt((1-Math.cos(l))/(Math.cos(u)*Math.cos(u))/(1-Math.cos(Math.atan(1/Math.cos(r))))),f.value===Xt.AREA_1?u+=Q:f.value===Xt.AREA_2?u+=ce:f.value===Xt.AREA_3&&(u+=1.5*ce),t.x=h*Math.cos(u),t.y=h*Math.sin(u),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function b6(i){var t={lam:0,phi:0},e,s,r,l,h,u,f,g,_,y={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,s=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?y.value=Xt.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(y.value=Xt.AREA_1,e-=Q):i.x<0&&-i.x>=Math.abs(i.y)?(y.value=Xt.AREA_2,e=e<0?e+ce:e-ce):(y.value=Xt.AREA_3,e+=Q),_=ce/12*Math.tan(e),h=Math.sin(_)/(Math.cos(_)-1/Math.sqrt(2)),u=Math.atan(h),r=Math.cos(e),l=Math.tan(s),f=1-r*r*l*l*(1-Math.cos(Math.atan(1/Math.cos(u)))),f<-1?f=-1:f>1&&(f=1),this.face===ne.TOP)g=Math.acos(f),t.phi=Q-g,y.value===Xt.AREA_0?t.lam=u+Q:y.value===Xt.AREA_1?t.lam=u<0?u+ce:u-ce:y.value===Xt.AREA_2?t.lam=u-Q:t.lam=u;else if(this.face===ne.BOTTOM)g=Math.acos(f),t.phi=g-Q,y.value===Xt.AREA_0?t.lam=-u+Q:y.value===Xt.AREA_1?t.lam=-u:y.value===Xt.AREA_2?t.lam=-u-Q:t.lam=u<0?-u-ce:-u+ce;else{var v,p,S;v=f,_=v*v,_>=1?S=0:S=Math.sqrt(1-_)*Math.sin(u),_+=S*S,_>=1?p=0:p=Math.sqrt(1-_),y.value===Xt.AREA_1?(_=p,p=-S,S=_):y.value===Xt.AREA_2?(p=-p,S=-S):y.value===Xt.AREA_3&&(_=p,p=S,S=-_),this.face===ne.RIGHT?(_=v,v=-p,p=_):this.face===ne.BACK?(v=-v,p=-p):this.face===ne.LEFT&&(_=v,v=p,p=-_),t.phi=Math.acos(-S)-Q,t.lam=Math.atan2(p,v),this.face===ne.RIGHT?t.lam=zr(t.lam,-Q):this.face===ne.BACK?t.lam=zr(t.lam,-ce):this.face===ne.LEFT&&(t.lam=zr(t.lam,+Q))}if(this.es!==0){var w,x,b;w=t.phi<0?1:0,x=Math.tan(t.phi),b=this.b/Math.sqrt(x*x+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-b*b)/(this.one_minus_f*b)),w&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function bu(i,t,e,s){var r;return i<et?(s.value=Xt.AREA_0,r=0):(r=Math.atan2(t,e),Math.abs(r)<=kt?s.value=Xt.AREA_0:r>kt&&r<=Q+kt?(s.value=Xt.AREA_1,r-=Q):r>Q+kt||r<=-(Q+kt)?(s.value=Xt.AREA_2,r=r>=0?r-ce:r+ce):(s.value=Xt.AREA_3,r+=Q)),r}function zr(i,t){var e=i+t;return e<-ce?e+=No:e>+ce&&(e-=No),e}var C6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const T6={init:x6,forward:w6,inverse:b6,names:C6};var $0=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],co=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],op=.8487,hp=1.3523,up=un/5,R6=1/up,Lr=18,ec=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},A6=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function O6(i,t,e,s){for(var r=t;s;--s){var l=i(r);if(r-=l,Math.abs(l)<e)break}return r}function G6(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function L6(i){var t=nt(i.x-this.long0),e=Math.abs(i.y),s=Math.floor(e*up);s<0?s=0:s>=Lr&&(s=Lr-1),e=un*(e-R6*s);var r={x:ec($0[s],e)*t,y:ec(co[s],e)};return i.y<0&&(r.y=-r.y),r.x=r.x*this.a*op+this.x0,r.y=r.y*this.a*hp+this.y0,r}function N6(i){var t={x:(i.x-this.x0)/(this.a*op),y:Math.abs(i.y-this.y0)/(this.a*hp)};if(t.y>=1)t.x/=$0[Lr][0],t.y=i.y<0?-Q:Q;else{var e=Math.floor(t.y*Lr);for(e<0?e=0:e>=Lr&&(e=Lr-1);;)if(co[e][0]>t.y)--e;else if(co[e+1][0]<=t.y)++e;else break;var s=co[e],r=5*(t.y-s[0])/(co[e+1][0]-s[0]);r=O6(function(l){return(ec(s,l)-t.y)/A6(s,l)},r,et,100),t.x/=ec($0[e],r),t.y=(5*e+r)*Le,i.y<0&&(t.y=-t.y)}return t.x=nt(t.x+this.long0),t}var D6=["Robinson","robin"];const I6={init:G6,forward:L6,inverse:N6,names:D6};function P6(){this.name="geocent"}function z6(i){var t=QE(i,this.es,this.a);return t}function F6(i){var t=$E(i,this.es,this.a,this.b);return t}var U6=["Geocentric","geocentric","geocent","Geocent"];const k6={init:P6,forward:z6,inverse:F6,names:U6};var ke={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},eo={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function X6(){if(Object.keys(eo).forEach((function(e){if(typeof this[e]>"u")this[e]=eo[e].def;else{if(eo[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);eo[e].num&&(this[e]=parseFloat(this[e]))}eo[e].degrees&&(this[e]=this[e]*Le)}).bind(this)),Math.abs(Math.abs(this.lat0)-Q)<et?this.mode=this.lat0<0?ke.S_POLE:ke.N_POLE:Math.abs(this.lat0)<et?this.mode=ke.EQUIT:(this.mode=ke.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function j6(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),s=Math.cos(i.x),r,l;switch(this.mode){case ke.OBLIQ:l=this.sinph0*t+this.cosph0*e*s;break;case ke.EQUIT:l=e*s;break;case ke.S_POLE:l=-t;break;case ke.N_POLE:l=t;break}switch(l=this.pn1/(this.p-l),r=l*e*Math.sin(i.x),this.mode){case ke.OBLIQ:l*=this.cosph0*t-this.sinph0*e*s;break;case ke.EQUIT:l*=t;break;case ke.N_POLE:l*=-(e*s);break;case ke.S_POLE:l*=e*s;break}var h,u;return h=l*this.cg+r*this.sg,u=1/(h*this.sw*this.h1+this.cw),r=(r*this.cg-l*this.sg)*this.cw*u,l=h*u,i.x=r*this.a,i.y=l*this.a,i}function B6(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,s,r;r=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*r,s=this.pn1*i.y*this.cw*r,i.x=e*this.cg+s*this.sg,i.y=s*this.cg-e*this.sg;var l=ai(i.x,i.y);if(Math.abs(l)<et)t.x=0,t.y=i.y;else{var h,u;switch(u=1-l*l*this.pfact,u=(this.p-Math.sqrt(u))/(this.pn1/l+l/this.pn1),h=Math.sqrt(1-u*u),this.mode){case ke.OBLIQ:t.y=Math.asin(h*this.sinph0+i.y*u*this.cosph0/l),i.y=(h-this.sinph0*Math.sin(t.y))*l,i.x*=u*this.cosph0;break;case ke.EQUIT:t.y=Math.asin(i.y*u/l),i.y=h*l,i.x*=u;break;case ke.N_POLE:t.y=Math.asin(h),i.y=-i.y;break;case ke.S_POLE:t.y=-Math.asin(h);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var Y6=["Tilted_Perspective","tpers"];const q6={init:X6,forward:j6,inverse:B6,names:Y6};function H6(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Z6(i){var t=i.x,e=i.y,s,r,l,h;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var u=this.radius_p/ai(this.radius_p*Math.cos(e),Math.sin(e));if(r=u*Math.cos(t)*Math.cos(e),l=u*Math.sin(t)*Math.cos(e),h=u*Math.sin(e),(this.radius_g-r)*r-l*l-h*h*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;s=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(l/ai(h,s)),i.y=this.radius_g_1*Math.atan(h/s)):(i.x=this.radius_g_1*Math.atan(l/s),i.y=this.radius_g_1*Math.atan(h/ai(l,s)))}else this.shape==="sphere"&&(s=Math.cos(e),r=Math.cos(t)*s,l=Math.sin(t)*s,h=Math.sin(e),s=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(l/ai(h,s)),i.y=this.radius_g_1*Math.atan(h/s)):(i.x=this.radius_g_1*Math.atan(l/s),i.y=this.radius_g_1*Math.atan(h/ai(l,s))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function K6(i){var t=-1,e=0,s=0,r,l,h,u;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*ai(1,s)):(e=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*ai(1,e));var f=s/this.radius_p;if(r=e*e+f*f+t*t,l=2*this.radius_g*t,h=l*l-4*r*this.C,h<0)return i.x=Number.NaN,i.y=Number.NaN,i;u=(-l-Math.sqrt(h))/(2*r),t=this.radius_g+u*t,e*=u,s*=u,i.x=Math.atan2(e,t),i.y=Math.atan(s*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+s*s)):(e=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),r=e*e+s*s+t*t,l=2*this.radius_g*t,h=l*l-4*r*this.C,h<0)return i.x=Number.NaN,i.y=Number.NaN,i;u=(-l-Math.sqrt(h))/(2*r),t=this.radius_g+u*t,e*=u,s*=u,i.x=Math.atan2(e,t),i.y=Math.atan(s*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var V6=["Geostationary Satellite View","Geostationary_Satellite","geos"];const W6={init:H6,forward:Z6,inverse:K6,names:V6};var mo=1.340264,yo=-.081106,vo=893e-6,Eo=.003796,ic=Math.sqrt(3)/2;function Q6(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function $6(i){var t=nt(i.x-this.long0),e=i.y,s=Math.asin(ic*Math.sin(e)),r=s*s,l=r*r*r;return i.x=t*Math.cos(s)/(ic*(mo+3*yo*r+l*(7*vo+9*Eo*r))),i.y=s*(mo+yo*r+l*(vo+Eo*r)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function J6(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var t=1e-9,e=12,s=i.y,r,l,h,u,f,g;for(g=0;g<e&&(r=s*s,l=r*r*r,h=s*(mo+yo*r+l*(vo+Eo*r))-i.y,u=mo+3*yo*r+l*(7*vo+9*Eo*r),s-=f=h/u,!(Math.abs(f)<t));++g);return r=s*s,l=r*r*r,i.x=ic*i.x*(mo+3*yo*r+l*(7*vo+9*Eo*r))/Math.cos(s),i.y=Math.asin(Math.sin(s)/ic),i.x=nt(i.x+this.long0),i}var tA=["eqearth","Equal Earth","Equal_Earth"];const eA={init:Q6,forward:$6,inverse:J6,names:tA};var Po=1e-10;function iA(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<Po)throw new Error;this.es?(this.en=Kg(this.es),this.m1=Vr(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=sA,this.forward=nA):(Math.abs(this.phi1)+Po>=Q?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=rA,this.forward=aA)}function nA(i){var t=nt(i.x-(this.long0||0)),e=i.y,s,r,l;return s=this.am1+this.m1-Vr(e,r=Math.sin(e),l=Math.cos(e),this.en),r=l*t/(s*Math.sqrt(1-this.es*r*r)),i.x=s*Math.sin(r),i.y=this.am1-s*Math.cos(r),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function sA(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,s,r;if(e=ai(i.x,i.y=this.am1-i.y),r=Vg(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(r))<Q)t=Math.sin(r),s=e*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*t*t)/Math.cos(r);else if(Math.abs(t-Q)<=Po)s=0;else throw new Error;return i.x=nt(s+(this.long0||0)),i.y=Us(r),i}function aA(i){var t=nt(i.x-(this.long0||0)),e=i.y,s,r;return r=this.cphi1+this.phi1-e,Math.abs(r)>Po?(i.x=r*Math.sin(s=t*Math.cos(e)/r),i.y=this.cphi1-r*Math.cos(s)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function rA(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,s=ai(i.x,i.y=this.cphi1-i.y);if(e=this.cphi1+this.phi1-s,Math.abs(e)>Q)throw new Error;return Math.abs(Math.abs(e)-Q)<=Po?t=0:t=s*Math.atan2(i.x,i.y)/Math.cos(e),i.x=nt(t+(this.long0||0)),i.y=Us(e),i}var lA=["bonne","Bonne (Werner lat_1=90)"];const oA={init:iA,names:lA};function hA(i){i.Proj.projections.add(Ou),i.Proj.projections.add(Gu),i.Proj.projections.add(lT),i.Proj.projections.add(mT),i.Proj.projections.add(ST),i.Proj.projections.add(CT),i.Proj.projections.add(LT),i.Proj.projections.add(zT),i.Proj.projections.add(jT),i.Proj.projections.add(ZT),i.Proj.projections.add(rR),i.Proj.projections.add(fR),i.Proj.projections.add(yR),i.Proj.projections.add(xR),i.Proj.projections.add(RR),i.Proj.projections.add(NR),i.Proj.projections.add(FR),i.Proj.projections.add(BR),i.Proj.projections.add(VR),i.Proj.projections.add(t6),i.Proj.projections.add(a6),i.Proj.projections.add(u6),i.Proj.projections.add(y6),i.Proj.projections.add(M6),i.Proj.projections.add(T6),i.Proj.projections.add(I6),i.Proj.projections.add(k6),i.Proj.projections.add(q6),i.Proj.projections.add(W6),i.Proj.projections.add(eA),i.Proj.projections.add(oA)}const e_=Object.assign(wC,{defaultDatum:"WGS84",Proj:Ki,WGS84:new Ki("WGS84"),Point:qr,toPoint:JE,defs:Be,nadgrid:rC,transform:Ju,mgrs:bC,version:"__VERSION__"});hA(e_);function uA(i){const t=Object.keys(i.defs),e=t.length;let s,r;for(s=0;s<e;++s){const l=t[s];if(!Cu(l)){const h=i.defs(l);let u=h.units;!u&&h.projName==="longlat"&&(u="degrees"),zu(new hc({code:l,axisOrientation:h.axis,metersPerUnit:h.to_meter,units:u}))}}for(s=0;s<e;++s){const l=t[s],h=Cu(l);for(r=0;r<e;++r){const u=t[r],f=Cu(u);if(!Tu(l,u))if(i.defs[l]===i.defs[u])O0([h,f]);else{const g=i(l,u);XM(h,f,h2(h,f,g.forward),h2(f,h,g.inverse))}}}}const ua="EPSG:28992";e_.defs(ua,"+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +units=m +no_defs");uA(e_);const cA=$t(ua),fA=()=>{const i=qi.useRef(null),[t,e]=qi.useState(()=>X0.reduce((r,l)=>(r[l.id]={isLoading:!0,error:null,vectorLayer:null,visible:!0,opacity:1},r),{}));return qi.useEffect(()=>{if(!i.current)return;const r=new Tw({source:new Zw}),l=X0.map(f=>{const g=new T8({format:new $w,loader:(v,p,S)=>{e(x=>({...x,[f.id]:{...x[f.id],isLoading:!0,error:null}}));const w=`https://service.pdok.nl${f.wfsUrl}?service=WFS&version=2.0.0&request=GetFeature&typeName=${f.typeName}&outputFormat=application/json&srsName=${ua}&bbox=${v.join(",")},${ua}`;fetch(w).then(async x=>{if(!x.ok){const b=await x.text(),R=b.match(/<ows:ExceptionText[^>]*>([\s\S]*?)<\/ows:ExceptionText>/),L=R?R[1]:b;throw new Error(L||`HTTP error ${x.status}`)}return x.json()}).then(x=>{const b=g.getFormat()?.readFeatures(x,{dataProjection:ua,featureProjection:S})||[];g.clear(!0),b.length>0&&g.addFeatures(b),e(R=>({...R,[f.id]:{...R[f.id],isLoading:!1,error:null}}))}).catch(x=>{e(b=>({...b,[f.id]:{...b[f.id],isLoading:!1,error:`Failed to load WFS data: ${x.message}`}})),console.error(`WFS Load Error for ${f.id}:`,x)})},strategy:w8}),_=v=>{const p=v.get(f.featureType),S=f.colorMap[p]||"rgba(0, 0, 0, 0.2)";return new Gs({fill:new Hr({color:S}),stroke:new jo({color:"#000",width:1})})},y=new p8({source:g,visible:!0,opacity:.7,style:_});return{id:f.id,vectorLayer:y}}),h=new ow({target:i.current,layers:[r,...l.map(f=>f.vectorLayer)],view:new ln({projection:cA,center:[155e3,463e3],zoom:10}),controls:[]}),u=new gb({coordinateFormat:f=>{if(!f)return"Position not available";const[g,_]=jM(f,ua);return`Lat: ${_.toFixed(5)}, Lon: ${g.toFixed(5)}`},projection:ua,className:"absolute top-4 right-4 text-sm bg-white/80 px-3 py-1 rounded shadow z-10",target:document.getElementById("mouse-position")});return h.addControl(u),e(f=>{const g={...f};return l.forEach(({id:_,vectorLayer:y})=>{g[_]={...g[_],vectorLayer:y}}),g}),()=>h.setTarget(void 0)},[]),qi.useEffect(()=>{Object.values(t).forEach(r=>{if(!r.vectorLayer)return;const l=r.visible??!0,h=r.opacity??1;r.vectorLayer.getVisible()!==l&&r.vectorLayer.setVisible(l),r.visible&&r.vectorLayer.getOpacity()!==h&&r.vectorLayer.setOpacity(h)})},[t]),{layersState:t,setLayersState:e,reloadLayer:r=>{const l=t[r];if(l.vectorLayer){e(h=>({...h,[r]:{...h[r],isLoading:!0,error:null}}));try{l.vectorLayer.getSource()?.refresh(),e(h=>({...h,[r]:{...h[r],isLoading:!1}}))}catch(h){e(u=>({...u,[r]:{...u[r],error:`Failed to reload data: ${h instanceof Error?h.message:"Unknown error"}`,isLoading:!1}}))}}},mapRef:i}},dA=()=>{const{layersState:i,setLayersState:t,reloadLayer:e,mapRef:s}=fA(),r=Object.values(i).some(l=>l.isLoading);return bt.jsxs("div",{className:"relative w-full h-full",children:[r&&bt.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 z-20 pointer-events-none",children:bt.jsx(ZS,{className:"w-8 h-8 animate-spin"})}),Object.entries(i).map(([l,h])=>h.error?bt.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-20 flex items-center gap-2",children:[bt.jsx("span",{children:h.error}),bt.jsx("button",{onClick:()=>e(l),className:"text-red-700 hover:text-red-900 font-bold",children:bt.jsx(VS,{"aria-label":"Close",className:"w-4 h-4"})})]},`error-${l}`):null),bt.jsx(R8,{layersState:i,setLayersState:t}),bt.jsx("div",{ref:s,className:"w-full h-full"}),bt.jsx("div",{id:"mouse-position"})]})};function gA(){return bt.jsxs("div",{className:"min-h-screen flex flex-col w-full h-full",children:[bt.jsx(OS,{}),bt.jsx(dA,{})]})}AS.createRoot(document.getElementById("root")).render(bt.jsx(qi.StrictMode,{children:bt.jsx(gA,{})}));
